import{r as C,j as o,R as g,c as P,L as W,H as me}from"./app-BtEgdfcF.js";import{c as z,b as M,a as q,P as fe,u as xe}from"./index-CXC6SExh.js";import{d as Y,G as he,u as ve,A as ge,W as be}from"./app-layout-BATKKDM7.js";import{u as J,c as V,B as K}from"./button-D6GqUU0O.js";import{P as R}from"./index-B6_6Q1_M.js";import{C as Ce}from"./chevron-down-NgSwcKF5.js";import{B as U}from"./badge-CxInlYhR.js";import{b as je,C as Ae,a as Ne,d as ye,c as we}from"./card-iiWvKbLz.js";import{u as _e}from"./use-permissions-D8npY9c2.js";import{P as Ie}from"./plus-CXKzvKKs.js";import{C as Pe}from"./circle-alert-Bd_Ywibx.js";import{C as Re}from"./circle-check-DXUVRc-w.js";/* empty css            */import"./index-q7GIQJN5.js";import"./shield-Cdrx9xNT.js";var O="Collapsible",[Ee,Q]=z(O),[Se,$]=Ee(O),X=C.forwardRef((r,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:n,disabled:a,onOpenChange:i,...l}=r,[p,d]=M({prop:s,defaultProp:n??!1,onChange:i,caller:O});return o.jsx(Se,{scope:t,disabled:a,contentId:Y(),open:p,onOpenToggle:C.useCallback(()=>d(m=>!m),[d]),children:o.jsx(R.div,{"data-state":L(p),"data-disabled":a?"":void 0,...l,ref:e})})});X.displayName=O;var Z="CollapsibleTrigger",ee=C.forwardRef((r,e)=>{const{__scopeCollapsible:t,...s}=r,n=$(Z,t);return o.jsx(R.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":L(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...s,ref:e,onClick:q(r.onClick,n.onOpenToggle)})});ee.displayName=Z;var H="CollapsibleContent",te=C.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=$(H,r.__scopeCollapsible);return o.jsx(fe,{present:t||n.open,children:({present:a})=>o.jsx(Oe,{...s,ref:e,present:a})})});te.displayName=H;var Oe=C.forwardRef((r,e)=>{const{__scopeCollapsible:t,present:s,children:n,...a}=r,i=$(H,t),[l,p]=C.useState(s),d=C.useRef(null),m=J(e,d),u=C.useRef(0),j=u.current,b=C.useRef(0),w=b.current,f=i.open||l,x=C.useRef(f),h=C.useRef(void 0);return C.useEffect(()=>{const c=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(c)},[]),xe(()=>{const c=d.current;if(c){h.current=h.current||{transitionDuration:c.style.transitionDuration,animationName:c.style.animationName},c.style.transitionDuration="0s",c.style.animationName="none";const A=c.getBoundingClientRect();u.current=A.height,b.current=A.width,x.current||(c.style.transitionDuration=h.current.transitionDuration,c.style.animationName=h.current.animationName),p(s)}},[i.open,s]),o.jsx(R.div,{"data-state":L(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!f,...a,ref:m,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...r.style},children:f&&n})});function L(r){return r?"open":"closed"}var ke=X,De=ee,Te=te,N="Accordion",Me=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[B,Ve,$e]=he(N),[k,vt]=z(N,[$e,Q]),G=Q(),oe=g.forwardRef((r,e)=>{const{type:t,...s}=r,n=s,a=s;return o.jsx(B.Provider,{scope:r.__scopeAccordion,children:t==="multiple"?o.jsx(Ge,{...a,ref:e}):o.jsx(Be,{...n,ref:e})})});oe.displayName=N;var[re,He]=k(N),[se,Le]=k(N,{collapsible:!1}),Be=g.forwardRef((r,e)=>{const{value:t,defaultValue:s,onValueChange:n=()=>{},collapsible:a=!1,...i}=r,[l,p]=M({prop:t,defaultProp:s??"",onChange:n,caller:N});return o.jsx(re,{scope:r.__scopeAccordion,value:g.useMemo(()=>l?[l]:[],[l]),onItemOpen:p,onItemClose:g.useCallback(()=>a&&p(""),[a,p]),children:o.jsx(se,{scope:r.__scopeAccordion,collapsible:a,children:o.jsx(ne,{...i,ref:e})})})}),Ge=g.forwardRef((r,e)=>{const{value:t,defaultValue:s,onValueChange:n=()=>{},...a}=r,[i,l]=M({prop:t,defaultProp:s??[],onChange:n,caller:N}),p=g.useCallback(m=>l((u=[])=>[...u,m]),[l]),d=g.useCallback(m=>l((u=[])=>u.filter(j=>j!==m)),[l]);return o.jsx(re,{scope:r.__scopeAccordion,value:i,onItemOpen:p,onItemClose:d,children:o.jsx(se,{scope:r.__scopeAccordion,collapsible:!0,children:o.jsx(ne,{...a,ref:e})})})}),[Fe,D]=k(N),ne=g.forwardRef((r,e)=>{const{__scopeAccordion:t,disabled:s,dir:n,orientation:a="vertical",...i}=r,l=g.useRef(null),p=J(l,e),d=Ve(t),u=ve(n)==="ltr",j=q(r.onKeyDown,b=>{if(!Me.includes(b.key))return;const w=b.target,f=d().filter(I=>!I.ref.current?.disabled),x=f.findIndex(I=>I.ref.current===w),h=f.length;if(x===-1)return;b.preventDefault();let c=x;const A=0,y=h-1,v=()=>{c=x+1,c>y&&(c=A)},_=()=>{c=x-1,c<A&&(c=y)};switch(b.key){case"Home":c=A;break;case"End":c=y;break;case"ArrowRight":a==="horizontal"&&(u?v():_());break;case"ArrowDown":a==="vertical"&&v();break;case"ArrowLeft":a==="horizontal"&&(u?_():v());break;case"ArrowUp":a==="vertical"&&_();break}const E=c%h;f[E].ref.current?.focus()});return o.jsx(Fe,{scope:t,disabled:s,direction:n,orientation:a,children:o.jsx(B.Slot,{scope:t,children:o.jsx(R.div,{...i,"data-orientation":a,ref:p,onKeyDown:s?void 0:j})})})}),S="AccordionItem",[We,F]=k(S),ae=g.forwardRef((r,e)=>{const{__scopeAccordion:t,value:s,...n}=r,a=D(S,t),i=He(S,t),l=G(t),p=Y(),d=s&&i.value.includes(s)||!1,m=a.disabled||r.disabled;return o.jsx(We,{scope:t,open:d,disabled:m,triggerId:p,children:o.jsx(ke,{"data-orientation":a.orientation,"data-state":ue(d),...l,...n,ref:e,disabled:m,open:d,onOpenChange:u=>{u?i.onItemOpen(s):i.onItemClose(s)}})})});ae.displayName=S;var ie="AccordionHeader",le=g.forwardRef((r,e)=>{const{__scopeAccordion:t,...s}=r,n=D(N,t),a=F(ie,t);return o.jsx(R.h3,{"data-orientation":n.orientation,"data-state":ue(a.open),"data-disabled":a.disabled?"":void 0,...s,ref:e})});le.displayName=ie;var T="AccordionTrigger",ce=g.forwardRef((r,e)=>{const{__scopeAccordion:t,...s}=r,n=D(N,t),a=F(T,t),i=Le(T,t),l=G(t);return o.jsx(B.ItemSlot,{scope:t,children:o.jsx(De,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":n.orientation,id:a.triggerId,...l,...s,ref:e})})});ce.displayName=T;var de="AccordionContent",pe=g.forwardRef((r,e)=>{const{__scopeAccordion:t,...s}=r,n=D(N,t),a=F(de,t),i=G(t);return o.jsx(Te,{role:"region","aria-labelledby":a.triggerId,"data-orientation":n.orientation,...i,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});pe.displayName=de;function ue(r){return r?"open":"closed"}var Ke=oe,Ue=ae,ze=le,qe=ce,Ye=pe;function Je(r){const e=P.c(4);let t;e[0]!==r?({...t}=r,e[0]=r,e[1]=t):t=e[1];let s;return e[2]!==t?(s=o.jsx(Ke,{"data-slot":"accordion",...t}),e[2]=t,e[3]=s):s=e[3],s}function Qe(r){const e=P.c(8);let t,s;e[0]!==r?({className:t,...s}=r,e[0]=r,e[1]=t,e[2]=s):(t=e[1],s=e[2]);let n;e[3]!==t?(n=V("border-b last:border-b-0",t),e[3]=t,e[4]=n):n=e[4];let a;return e[5]!==s||e[6]!==n?(a=o.jsx(Ue,{"data-slot":"accordion-item",className:n,...s}),e[5]=s,e[6]=n,e[7]=a):a=e[7],a}function Xe(r){const e=P.c(11);let t,s,n;e[0]!==r?({className:s,children:t,...n}=r,e[0]=r,e[1]=t,e[2]=s,e[3]=n):(t=e[1],s=e[2],n=e[3]);let a;e[4]!==s?(a=V("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",s),e[4]=s,e[5]=a):a=e[5];let i;e[6]===Symbol.for("react.memo_cache_sentinel")?(i=o.jsx(Ce,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"}),e[6]=i):i=e[6];let l;return e[7]!==t||e[8]!==n||e[9]!==a?(l=o.jsx(ze,{className:"flex",children:o.jsxs(qe,{"data-slot":"accordion-trigger",className:a,...n,children:[t,i]})}),e[7]=t,e[8]=n,e[9]=a,e[10]=l):l=e[10],l}function Ze(r){const e=P.c(12);let t,s,n;e[0]!==r?({className:s,children:t,...n}=r,e[0]=r,e[1]=t,e[2]=s,e[3]=n):(t=e[1],s=e[2],n=e[3]);let a;e[4]!==s?(a=V("pt-0 pb-4",s),e[4]=s,e[5]=a):a=e[5];let i;e[6]!==t||e[7]!==a?(i=o.jsx("div",{className:a,children:t}),e[6]=t,e[7]=a,e[8]=i):i=e[8];let l;return e[9]!==n||e[10]!==i?(l=o.jsx(Ye,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:i}),e[9]=n,e[10]=i,e[11]=l):l=e[11],l}function gt(r){const e=P.c(18),{groupedVehicles:t,vehicles:s,isComandancia:n,userCompany:a}=r,{canCreate:i}=_e(),l=tt,p=et;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=y=>{const{vehicle:v}=y;return o.jsx(W,{href:`/vehicles/status/${v.id}`,children:o.jsxs(je,{className:"h-full transition-all hover:shadow-md",children:[o.jsxs(Ae,{className:"pb-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ne,{className:"text-2xl font-bold",children:v.name}),o.jsx(U,{variant:"secondary",className:l(v.status),children:o.jsxs("span",{className:"flex items-center gap-1",children:[p(v.status),v.status==="Operative"?"En Servicio":v.status==="Workshop"?"En Taller":"Fuera de Servicio"]})})]}),o.jsxs(ye,{children:[v.make," ",v.model]})]}),o.jsxs(we,{children:[o.jsxs("p",{className:"mb-2 text-sm text-muted-foreground",children:["PPU: ",v.plate]}),o.jsx(K,{variant:"outline",className:"w-full",children:"Ver Detalles"})]})]})})},e[0]=d):d=e[0];const m=d;let u,j;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=[{title:"Panel Principal",href:"/dashboard"},{title:"Material Mayor",href:"/vehicles/dashboard"},{title:"Estado de Carros",href:"/vehicles/status"}],j=o.jsx(me,{title:"Estado de Carros"}),e[1]=u,e[2]=j):(u=e[1],j=e[2]);let b;e[3]===Symbol.for("react.memo_cache_sentinel")?(b=o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Estado de la Flota"}),e[3]=b):b=e[3];const w=n?"Vista General de todas las compañías.":`Vehículos de ${a}`;let f;e[4]!==w?(f=o.jsxs("div",{children:[b,o.jsx("p",{className:"text-muted-foreground",children:w})]}),e[4]=w,e[5]=f):f=e[5];let x;e[6]!==i?(x=i("vehicles.status")&&o.jsx(K,{asChild:!0,children:o.jsxs(W,{href:"/vehicles/create",children:[o.jsx(Ie,{className:"mr-2 h-4 w-4"}),"Nuevo Vehículo"]})}),e[6]=i,e[7]=x):x=e[7];let h;e[8]!==f||e[9]!==x?(h=o.jsxs("div",{className:"flex items-center justify-between",children:[f,x]}),e[8]=f,e[9]=x,e[10]=h):h=e[10];let c;e[11]!==t||e[12]!==n||e[13]!==s?(c=n&&t?o.jsx(Je,{type:"multiple",className:"w-full space-y-4",children:Object.entries(t).map((y,v)=>{const[_,E]=y;return o.jsxs(Qe,{value:_,className:"rounded-lg border px-4",children:[o.jsx(Xe,{className:"py-4 hover:no-underline",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-lg font-semibold",children:_}),o.jsxs(U,{variant:"outline",children:[E.length," ","Unidades"]})]})}),o.jsx(Ze,{className:"pt-4 pb-4",children:o.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:E.map(I=>o.jsx(m,{vehicle:I},I.id))})})]},_)})}):o.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s?.map(y=>o.jsx(m,{vehicle:y},y.id))}),e[11]=t,e[12]=n,e[13]=s,e[14]=c):c=e[14];let A;return e[15]!==h||e[16]!==c?(A=o.jsxs(ge,{breadcrumbs:u,children:[j,o.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[h,c]})]}),e[15]=h,e[16]=c,e[17]=A):A=e[17],A}function et(r){switch(r){case"Operative":return o.jsx(Re,{className:"h-4 w-4 text-green-600"});case"Workshop":return o.jsx(be,{className:"h-4 w-4 text-yellow-600"});case"Out of Service":return o.jsx(Pe,{className:"h-4 w-4 text-red-600"});default:return null}}function tt(r){switch(r){case"Operative":return"bg-green-100 text-green-800 hover:bg-green-100";case"Workshop":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-100";case"Out of Service":return"bg-red-100 text-red-800 hover:bg-red-100";default:return"bg-gray-100 text-gray-800"}}export{gt as default};
