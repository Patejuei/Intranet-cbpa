import{c as q,b as $,r as z,j as s,L as P,a as A,H as J}from"./app-U2vxHv-X.js";import{B as K}from"./badge-1ZL-UITF.js";import{B as H,f as D}from"./button-FyRO0OzR.js";import{b as Q,c as U}from"./card-C4UHtn5o.js";import{I as X}from"./input-DD2lBbfJ.js";import{a as Y,b as Z,c as ee,d as V,S as se}from"./select-DXWYJTQP.js";import{b as F,e as i,a as te,c as o,T as le,d as ae}from"./table-DDFTIUqA.js";import{F as re,A as ie}from"./app-layout-4axmnVdW.js";import{P as ce}from"./plus-CV7CwJzr.js";import{E as oe}from"./eye-N5kCVEjy.js";import{S as ne}from"./search-BzFLfPRL.js";/* empty css            */import"./index-D32ltWjn.js";import"./index-DU5z2y3-.js";import"./index-DPe-BYJ3.js";import"./chevron-down-DeQ6wOE7.js";import"./check-a4N9gWVE.js";import"./index-C4J_hXM0.js";import"./shield-CcbdmCEL.js";function ze(){const e=q.c(41),{maintenances:l,filters:r}=$().props,[a,G]=z.useState(r.search||""),[c,O]=z.useState(a);let p,j;e[0]!==a?(p=()=>{const t=setTimeout(()=>{O(a)},300);return()=>clearTimeout(t)},j=[a],e[0]=a,e[1]=p,e[2]=j):(p=e[1],j=e[2]),z.useEffect(p,j);let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=t=>{G(t)},e[3]=g):g=e[3];const W=g;let v;e[4]!==a?(v=t=>{A.get("/vehicles/workshop",{status:t,search:a},{preserveState:!0,replace:!0})},e[4]=a,e[5]=v):v=e[5];const M=v;let b;e[6]!==c||e[7]!==r.search||e[8]!==r.status?(b=()=>{c!==r.search&&A.get("/vehicles/workshop",{status:r.status,search:c},{preserveState:!0,replace:!0})},e[6]=c,e[7]=r.search,e[8]=r.status,e[9]=b):b=e[9];let _;e[10]!==c?(_=[c],e[10]=c,e[11]=_):_=e[11],z.useEffect(b,_);const R=he;let S,N;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=[{title:"Panel Principal",href:"/dashboard"},{title:"Material Mayor",href:"/vehicles/dashboard"},{title:"Taller Mecánico",href:"/vehicles/workshop"}],N=s.jsx(J,{title:"Taller Mecánico"}),e[12]=S,e[13]=N):(S=e[12],N=e[13]);let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Taller Mecánico"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestión de ingresos y reparaciones de vehículos."})]}),e[14]=y):y=e[14];const B=$().props.auth.user.role!=="capitan"&&s.jsx(H,{asChild:!0,children:s.jsxs(P,{href:"/vehicles/workshop/create",children:[s.jsx(ce,{className:"mr-2 size-4"})," Nuevo Ingreso"]})});let n;e[15]!==B?(n=s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[y,s.jsx("div",{className:"flex items-center gap-2",children:B})]}),e[15]=B,e[16]=n):n=e[16];let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(ne,{className:"absolute top-2.5 left-2 h-4 w-4 text-muted-foreground"}),e[17]=T):T=e[17];let w;e[18]===Symbol.for("react.memo_cache_sentinel")?(w=t=>W(t.target.value),e[18]=w):w=e[18];let d;e[19]!==a?(d=s.jsxs("div",{className:"relative w-full md:w-64",children:[T,s.jsx(X,{placeholder:"Buscar vehículo...",value:a,onChange:w,className:"pl-8"})]}),e[19]=a,e[20]=d):d=e[20];const L=r.status||"active";let C;e[21]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(Y,{className:"w-full md:w-[200px]",children:s.jsx(Z,{placeholder:"Filtrar por estado"})}),e[21]=C):C=e[21];let E;e[22]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsxs(ee,{children:[s.jsx(V,{value:"active",children:"Activos (En Taller)"}),s.jsx(V,{value:"history",children:"Historial (Finalizados)"}),s.jsx(V,{value:"all",children:"Todos"})]}),e[22]=E):E=e[22];let h;e[23]!==M||e[24]!==L?(h=s.jsxs(se,{defaultValue:L,onValueChange:M,children:[C,E]}),e[23]=M,e[24]=L,e[25]=h):h=e[25];let m;e[26]!==d||e[27]!==h?(m=s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[d,h]}),e[26]=d,e[27]=h,e[28]=m):m=e[28];let k;e[29]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(te,{children:s.jsxs(F,{children:[s.jsx(o,{children:"Vehículo"}),s.jsx(o,{children:"Compañía"}),s.jsx(o,{children:"Taller"}),s.jsx(o,{children:"Fecha Ingreso"}),s.jsx(o,{children:"Salida Est."}),s.jsx(o,{children:"Estado"}),s.jsx(o,{className:"text-right",children:"Acciones"})]})}),e[29]=k):k=e[29];let x;e[30]!==l.data?(x=l.data.length===0?s.jsx(F,{children:s.jsx(i,{colSpan:7,className:"h-24 text-center",children:"No hay registros encontrados."})}):l.data.map(t=>s.jsxs(F,{children:[s.jsxs(i,{className:"font-medium",children:[t.vehicle.name,s.jsx("div",{className:"text-xs text-muted-foreground",children:t.vehicle.plate})]}),s.jsx(i,{children:t.vehicle.company}),s.jsx(i,{children:t.workshop_name}),s.jsx(i,{children:D(t.entry_date)}),s.jsx(i,{children:t.tentative_exit_date?D(t.tentative_exit_date):"-"}),s.jsx(i,{children:s.jsx(K,{className:`${R(t.status)} hover:${R(t.status)}`,children:t.status})}),s.jsx(i,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(H,{variant:"ghost",size:"icon",asChild:!0,title:"Ver Detalle",children:s.jsx(P,{href:`/vehicles/workshop/${t.id}`,children:s.jsx(oe,{className:"size-4"})})}),s.jsx(H,{variant:"ghost",size:"icon",asChild:!0,title:"Imprimir Orden",children:s.jsx("a",{href:`/vehicles/workshop/${t.id}/print`,target:"_blank",rel:"noreferrer",children:s.jsx(re,{className:"size-4"})})})]})})]},t.id)),e[30]=l.data,e[31]=x):x=e[31];let u;e[32]!==x?(u=s.jsx(Q,{children:s.jsx(U,{className:"p-0",children:s.jsxs(le,{children:[k,s.jsx(ae,{children:x})]})})}),e[32]=x,e[33]=u):u=e[33];let f;e[34]!==l.links?(f=l.links.length>3&&s.jsx("div",{className:"flex justify-center gap-2",children:l.links.map(de)}),e[34]=l.links,e[35]=f):f=e[35];let I;return e[36]!==n||e[37]!==m||e[38]!==u||e[39]!==f?(I=s.jsxs(ie,{breadcrumbs:S,children:[N,s.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[n,m,u,f]})]}),e[36]=n,e[37]=m,e[38]=u,e[39]=f,e[40]=I):I=e[40],I}function de(e,l){return e.url?s.jsx(H,{variant:e.active?"default":"outline",size:"sm",asChild:!0,children:s.jsx(P,{href:e.url,dangerouslySetInnerHTML:{__html:e.label}})},l):s.jsx("span",{className:"px-2 text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:e.label}},l)}function he(e){switch(e){case"En Taller":return"bg-blue-500";case"Esperando Repuestos":return"bg-yellow-500";case"Listo para Retiro":return"bg-green-500";default:return"bg-gray-500"}}export{ze as default};
