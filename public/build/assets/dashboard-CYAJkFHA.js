import{c as X,r as J,b as Z,j as s,L as a,H as ee}from"./app-1yum4nef.js";import{B as se,M as Y,A as re}from"./app-layout-CU1SNS-M.js";import{a as te,f as K}from"./button-CKGGjUwb.js";/* empty css            */import"./index-CThbTi0F.js";import"./index-C4D9tU3H.js";import"./index-C4J_hXM0.js";import"./shield-CJ5aZyZ9.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ae=te("Clock",le),de=[{title:"Panel Principal",href:"/dashboard"}],ne="recent_modules";function Se(r){const e=X.c(51),{upcomingBatteries:N,pendingTickets:d,respondedTickets:y,vehiclesStopped:w,pendingIncidents:k,vehiclesInWorkshop:S}=r;let _;e[0]!==N?(_=N===void 0?[]:N,e[0]=N,e[1]=_):_=e[1];const E=_;let T;e[2]!==d?(T=d===void 0?[]:d,e[2]=d,e[3]=T):T=e[3];const z=T;let I;e[4]!==y?(I=y===void 0?[]:y,e[4]=y,e[5]=I):I=e[5];const M=I;let P;e[6]!==w?(P=w===void 0?[]:w,e[6]=w,e[7]=P):P=e[7];const R=P;let $;e[8]!==k?($=k===void 0?[]:k,e[8]=k,e[9]=$):$=e[9];const D=$;let q;e[10]!==S?(q=S===void 0?[]:S,e[10]=S,e[11]=q):q=e[11];const B=q;let C;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[12]=C):C=e[12];const[L,G]=J.useState(C),{auth:n}=Z().props;let O;e[13]!==n.user?(O=t=>{const l=n.user;if(!l)return!1;if(l.role==="admin"||l.role==="capitan"||t.permission==="vehicles"&&["cuartelero","mechanic"].includes(l.role||""))return!0;const v=l.permissions||[],b=t.permission;return v.includes(b)||v.includes(`${b}.view`)||v.includes(`${b}.edit`)},e[13]=n.user,e[14]=O):O=e[14];const i=O;let V;e[15]!==i?(V=()=>{try{const t=localStorage.getItem(ne);if(t){const v=JSON.parse(t).map(fe).filter(b=>!!b&&i(b));G(v)}}catch(t){console.error("Error loading recent modules",t)}},e[15]=i,e[16]=V):V=e[16];let A;e[17]!==n.user?(A=[n.user],e[17]=n.user,e[18]=A):A=e[18],J.useEffect(V,A);const Q=he;let F;e[19]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(ee,{title:"Material Menor - CBPA"}),e[19]=F):F=e[19];let c;e[20]!==z?(c=z.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-yellow-500"}),"Tickets Pendientes"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes que requieren atención."})]}),s.jsx("div",{className:"space-y-3",children:z.map(pe)})]}),e[20]=z,e[21]=c):c=e[21];let o;e[22]!==M?(o=M.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-blue-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-blue-500"}),"Tickets en Proceso"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes con respuesta de Comandancia."})]}),s.jsx("div",{className:"space-y-3",children:M.map(ue)})]}),e[22]=M,e[23]=o):o=e[23];let m;e[24]!==R?(m=R.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-red-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-red-500"}),"Material Fuera de Servicio"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos detenidos o en taller."})]}),s.jsx("div",{className:"space-y-3",children:R.map(xe)})]}),e[24]=R,e[25]=m):m=e[25];let x;e[26]!==D?(x=D.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-orange-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-orange-500"}),"Incidencias Pendientes"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Novedades reportadas sin resolver."})]}),s.jsx("div",{className:"space-y-3",children:D.map(me)})]}),e[26]=D,e[27]=x):x=e[27];let u;e[28]!==m||e[29]!==x?(u=s.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[m,x]}),e[28]=m,e[29]=x,e[30]=u):u=e[30];let p;e[31]!==B?(p=B.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-600 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-yellow-600"}),"Unidades en Taller"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos con orden de trabajo activa."})]}),s.jsx("div",{className:"space-y-3",children:B.map(oe)})]}),e[31]=B,e[32]=p):p=e[32];let h;e[33]!==E?(h=E.length>0&&s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary",children:s.jsx(se,{className:"size-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"Próximos Cambios de Baterías"}),s.jsx("p",{className:"text-muted-foreground",children:"Equipos que requieren atención pronto"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left font-medium text-muted-foreground",children:[s.jsx("th",{className:"pb-2",children:"Fecha"}),s.jsx("th",{className:"pb-2",children:"Días"}),s.jsx("th",{className:"pb-2",children:"Equipo"}),s.jsx("th",{className:"pb-2",children:"Responsable"}),s.jsx("th",{className:"pb-2",children:"Compañía"})]})}),s.jsx("tbody",{className:"divide-y",children:E.map(t=>{const l=Q(t.next_change_date);return s.jsxs("tr",{children:[s.jsx("td",{className:"py-3",children:K(t.next_change_date)}),s.jsx("td",{className:"py-3",children:s.jsxs("span",{className:`rounded px-2 py-1 font-bold ${l<=3?"bg-destructive/20 text-destructive":"bg-muted text-muted-foreground"}`,children:[l," días"]})}),s.jsx("td",{className:"py-3",children:t.equipment_type}),s.jsx("td",{className:"py-3",children:t.responsible_name}),s.jsx("td",{className:"py-3",children:t.company})]},t.id)})})]})})]}),e[33]=E,e[34]=h):h=e[34];let f;e[35]!==L?(f=L.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ae,{className:"size-4"}),s.jsx("h2",{className:"text-sm font-medium tracking-wider uppercase",children:"Visitados Recientemente"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:L.map(ce)})]}),e[35]=L,e[36]=f):f=e[36];let U;e[37]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx("h2",{className:"text-sm font-medium tracking-wider text-muted-foreground uppercase",children:"Todos los Módulos"}),e[37]=U):U=e[37];let g;e[38]!==i?(g=Y.filter(ie).map(t=>{if(!i(t))return null;const l=t.icon;return s.jsx(a,{href:t.href,className:"group relative overflow-hidden rounded-xl border bg-card p-6 shadow-sm transition-all hover:border-primary hover:shadow-md",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:s.jsx(l,{className:"size-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:t.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]})},t.key)}),e[38]=i,e[39]=g):g=e[39];let j;e[40]!==g?(j=s.jsxs("div",{className:"space-y-4",children:[U,s.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:g})]}),e[40]=g,e[41]=j):j=e[41];let W;e[42]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs("div",{className:"rounded-xl border bg-muted/40 p-6",children:[s.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Bienvenido al Sistema de Material Menor"}),s.jsx("p",{className:"text-muted-foreground",children:"Seleccione una opción de arriba para comenzar sus operaciones."})]}),e[42]=W):W=e[42];let H;return e[43]!==c||e[44]!==o||e[45]!==u||e[46]!==p||e[47]!==h||e[48]!==f||e[49]!==j?(H=s.jsxs(re,{breadcrumbs:de,children:[F,s.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[c,o,u,p,h,f,j,W]})]}),e[43]=c,e[44]=o,e[45]=u,e[46]=p,e[47]=h,e[48]=f,e[49]=j,e[50]=H):H=e[50],H}function ie(r){return!r.key.startsWith("admin-")}function ce(r){const e=r.icon;return s.jsxs(a,{href:r.href,className:"group relative flex items-center gap-3 overflow-hidden rounded-lg border bg-card p-4 shadow-sm transition-all hover:border-primary hover:shadow-md",children:[s.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:s.jsx(e,{className:"size-5"})}),s.jsx("div",{children:s.jsx("h3",{className:"leading-none font-medium",children:r.title})})]},r.key)}function oe(r){const e=r.maintenances?.[0];return s.jsx(a,{href:`/vehicles/status/${r.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-bold",children:r.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",r.company,")"]})]}),e?s.jsxs("p",{className:"text-xs font-medium text-yellow-700",children:[e.workshop_name," ","-"," ",e.description]}):s.jsx("p",{className:"text-xs text-muted-foreground",children:"Sin detalles de orden."})]}),e?.entry_date&&s.jsxs("div",{className:"flex items-center gap-1 font-mono text-xs text-muted-foreground",children:["Ingreso:"," ",K(e.entry_date)]})]})},r.id)}function me(r){return s.jsx(a,{href:"/vehicles/incidents",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"line-clamp-1 font-medium",children:[r.vehicle.name," -"," ",r.description]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reportado:"," ",K(r.created_at)]})]}),s.jsx("div",{className:"rounded bg-orange-100 px-2 py-1 text-xs text-orange-700",children:r.severity})]})},r.id)}function xe(r){return s.jsx(a,{href:`/vehicles/status/${r.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:r.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.company})]}),s.jsx("div",{className:`rounded px-2 py-1 text-xs font-medium ${r.status==="Out of Service"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:r.status==="Out of Service"?"Fuera de Servicio":"En Taller"})]})},r.id)}function ue(r){return s.jsx(a,{href:`/tickets/${r.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:r.subject}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estado: ",r.status]})]}),s.jsx("div",{className:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-700",children:"Ver Respuesta"})]})},r.id)}function pe(r){return s.jsx(a,{href:`/tickets/${r.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:r.subject}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[r.user.company," -"," ",r.user.name]})]}),s.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:K(r.created_at)})]})},r.id)}function he(r){const e=new Date,d=new Date(r).getTime()-e.getTime();return Math.ceil(d/864e5)}function fe(r){return Y.find(e=>e.key===r)}export{Se as default};
