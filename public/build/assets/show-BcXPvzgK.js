import{c as he,b as xe,j as t,a as fe,H as ue,L as pe}from"./app-7T3l1Qi3.js";import{B as m}from"./badge-fPegXLhR.js";import{a as ve,f as X,B as se}from"./button-BkJ9ctea.js";import{b as Y,c as Z,C as te,a as ae}from"./card-BROKrNBm.js";import{A as je}from"./app-layout-BHffE17Q.js";import{A as ge}from"./arrow-left-C_xczCRg.js";import{C as _e}from"./circle-alert-B5moAo7e.js";import{C as be}from"./clock-CfvKcsP0.js";/* empty css            */import"./index-4gzLtCu3.js";import"./index-Cb5BQB3p.js";import"./index-C4J_hXM0.js";import"./shield-C01C4vrL.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],F=ve("CircleCheckBig",Ne),ye=[{title:"Vehículos",href:"/vehicles/status"},{title:"Historial Checklists",href:"/vehicles/checklists"}];function De(a){const e=he.c(102),{checklist:s,canReview:E}=a;xe();let o,d,h,x,l,n,c,f,r;if(e[0]!==E||e[1]!==s.captain||e[2]!==s.captain_reviewed_at||e[3]!==s.created_at||e[4]!==s.details||e[5]!==s.general_observations||e[6]!==s.id||e[7]!==s.machinist||e[8]!==s.machinist_reviewed_at||e[9]!==s.status||e[10]!==s.user.name||e[11]!==s.vehicle.company||e[12]!==s.vehicle.name||e[13]!==s.vehicle.plate){const ie=s.details.reduce(ke,{});let H;e[23]!==s.id?(H=()=>{confirm("¿Está seguro de visar este checklist?")&&fe.post(`/vehicles/checklists/${s.id}/review`)},e[23]=s.id,e[24]=H):H=e[24];const G=H,le=Ce,ne=we;o=je,f=ye;const K=`Checklist #${s.id}`;e[25]!==K?(r=t.jsx(ue,{title:K}),e[25]=K,e[26]=r):r=e[26],x="flex flex-1 flex-col gap-8 p-4",e[27]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsxs(pe,{href:"/vehicles/checklists",className:"flex w-fit items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[t.jsx(ge,{className:"size-4"}),"Volver a la lista"]}),e[27]=l):l=e[27];const J=s.status==="Completed"?"default":"secondary";let v;e[28]!==s.status||e[29]!==J?(v=t.jsx(m,{variant:J,children:s.status}),e[28]=s.status,e[29]=J,e[30]=v):v=e[30];let j;e[31]!==s.id||e[32]!==v?(j=t.jsxs("h1",{className:"flex items-center gap-2 text-2xl font-bold",children:["Checklist #",s.id,v]}),e[31]=s.id,e[32]=v,e[33]=j):j=e[33];let g;e[34]!==s.created_at?(g=X(s.created_at),e[34]=s.created_at,e[35]=g):g=e[35];let _;e[36]!==s.user.name||e[37]!==g?(_=t.jsxs("p",{className:"text-muted-foreground",children:[g," - Realizado por"," ",s.user.name]}),e[36]=s.user.name,e[37]=g,e[38]=_):_=e[38];let b;e[39]!==j||e[40]!==_?(b=t.jsxs("div",{children:[j,_]}),e[39]=j,e[40]=_,e[41]=b):b=e[41];let N;e[42]!==E||e[43]!==G?(N=E&&t.jsxs(se,{onClick:G,size:"lg",className:"bg-green-600 hover:bg-green-700",children:[t.jsx(F,{className:"mr-2 size-4"}),"Visar Checklist"]}),e[42]=E,e[43]=G,e[44]=N):N=e[44],e[45]!==b||e[46]!==N?(n=t.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[b,N]}),e[45]=b,e[46]=N,e[47]=n):n=e[47];let M;e[48]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(te,{children:t.jsx(ae,{children:"Datos del Vehículo"})}),e[48]=M):M=e[48];let O;e[49]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("span",{className:"font-medium text-muted-foreground",children:"Nombre:"}),e[49]=O):O=e[49];let y;e[50]!==s.vehicle.name?(y=t.jsxs("div",{className:"flex justify-between",children:[O,t.jsx("span",{children:s.vehicle.name})]}),e[50]=s.vehicle.name,e[51]=y):y=e[51];let D;e[52]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("span",{className:"font-medium text-muted-foreground",children:"Patente:"}),e[52]=D):D=e[52];let w;e[53]!==s.vehicle.plate?(w=t.jsxs("div",{className:"flex justify-between",children:[D,t.jsx("span",{children:s.vehicle.plate})]}),e[53]=s.vehicle.plate,e[54]=w):w=e[54];let I;e[55]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("span",{className:"font-medium text-muted-foreground",children:"Compañía:"}),e[55]=I):I=e[55];let C;e[56]!==s.vehicle.company?(C=t.jsxs("div",{className:"flex justify-between",children:[I,t.jsx("span",{children:s.vehicle.company})]}),e[56]=s.vehicle.company,e[57]=C):C=e[57];let k;e[58]!==y||e[59]!==w||e[60]!==C?(k=t.jsxs(Y,{children:[M,t.jsxs(Z,{className:"space-y-2",children:[y,w,C]})]}),e[58]=y,e[59]=w,e[60]=C,e[61]=k):k=e[61];let U;e[62]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(te,{children:t.jsx(ae,{children:"Estado de Revisión"})}),e[62]=U):U=e[62];let T;e[63]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("p",{className:"font-bold",children:"Capitán"}),e[63]=T):T=e[63];const Q=s.captain?s.captain.name:"Pendiente";let S;e[64]!==Q?(S=t.jsxs("div",{children:[T,t.jsx("p",{className:"text-xs text-muted-foreground",children:Q})]}),e[64]=Q,e[65]=S):S=e[65];let $;e[66]!==s.captain_reviewed_at?($=s.captain_reviewed_at?t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx(F,{className:"size-4"}),X(s.captain_reviewed_at)]}):t.jsx(m,{variant:"outline",children:"Pendiente"}),e[66]=s.captain_reviewed_at,e[67]=$):$=e[67];let z;e[68]!==S||e[69]!==$?(z=t.jsxs("div",{className:"flex items-center justify-between rounded border p-2",children:[S,$]}),e[68]=S,e[69]=$,e[70]=z):z=e[70];let q;e[71]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("p",{className:"font-bold",children:"Maquinista"}),e[71]=q):q=e[71];const W=s.machinist?s.machinist.name:"Pendiente";let P;e[72]!==W?(P=t.jsxs("div",{children:[q,t.jsx("p",{className:"text-xs text-muted-foreground",children:W})]}),e[72]=W,e[73]=P):P=e[73];let B;e[74]!==s.machinist_reviewed_at?(B=s.machinist_reviewed_at?t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx(F,{className:"size-4"}),X(s.machinist_reviewed_at)]}):t.jsx(m,{variant:"outline",children:"Pendiente"}),e[74]=s.machinist_reviewed_at,e[75]=B):B=e[75];let L;e[76]!==P||e[77]!==B?(L=t.jsxs("div",{className:"flex items-center justify-between rounded border p-2",children:[P,B]}),e[76]=P,e[77]=B,e[78]=L):L=e[78];let R;e[79]!==s.general_observations?(R=s.general_observations&&t.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[t.jsx("h3",{className:"mb-2 font-medium",children:"Observaciones Generales"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:s.general_observations})]}),e[79]=s.general_observations,e[80]=R):R=e[80];let A;e[81]!==z||e[82]!==L||e[83]!==R?(A=t.jsxs(Y,{children:[U,t.jsxs(Z,{className:"space-y-4",children:[z,L,R]})]}),e[81]=z,e[82]=L,e[83]=R,e[84]=A):A=e[84],e[85]!==k||e[86]!==A?(c=t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[k,A]}),e[85]=k,e[86]=A,e[87]=c):c=e[87],d="space-y-6",h=Object.entries(ie).map(ce=>{const[ee,re]=ce;return t.jsxs(Y,{children:[t.jsx("div",{className:"border-b bg-muted/50 px-6 py-4",children:t.jsx("h3",{className:"text-lg font-bold",children:ee})}),t.jsx(Z,{className:"p-0",children:t.jsx("div",{className:"divide-y",children:re.map(i=>t.jsxs("div",{className:"flex flex-col justify-between gap-4 p-4 md:flex-row md:items-center",children:[t.jsx("div",{className:"flex-1 font-medium",children:i.item.name}),t.jsxs("div",{className:"flex min-w-[150px] items-center gap-3",children:[ne(i.status),le(i.status)]}),t.jsx("div",{className:"flex-1 text-sm text-muted-foreground italic",children:i.notes||"Sin observaciones"}),i.status!=="ok"&&t.jsx(se,{size:"sm",variant:"secondary",onClick:()=>{const me=`Falla reportada: ${s.vehicle.name} - ${i.item.name}`,oe=`Se reporta falla en checklist #${s.id}.

Ítem: ${i.item.name}
Estado: ${i.status==="urgent"?"Urgente":"Próxima Mantención"}
Observación: ${i.notes||"Sin observaciones"}

Vehículo: ${s.vehicle.name} (${s.vehicle.plate})`,de=new URLSearchParams({subject:me,message:oe});window.location.href=`/tickets/create?${de.toString()}`},children:"Crear Incidencia"})]},i.id))})})]},ee)}),e[0]=E,e[1]=s.captain,e[2]=s.captain_reviewed_at,e[3]=s.created_at,e[4]=s.details,e[5]=s.general_observations,e[6]=s.id,e[7]=s.machinist,e[8]=s.machinist_reviewed_at,e[9]=s.status,e[10]=s.user.name,e[11]=s.vehicle.company,e[12]=s.vehicle.name,e[13]=s.vehicle.plate,e[14]=o,e[15]=d,e[16]=h,e[17]=x,e[18]=l,e[19]=n,e[20]=c,e[21]=f,e[22]=r}else o=e[14],d=e[15],h=e[16],x=e[17],l=e[18],n=e[19],c=e[20],f=e[21],r=e[22];let u;e[88]!==d||e[89]!==h?(u=t.jsx("div",{className:d,children:h}),e[88]=d,e[89]=h,e[90]=u):u=e[90];let p;e[91]!==x||e[92]!==l||e[93]!==n||e[94]!==c||e[95]!==u?(p=t.jsxs("div",{className:x,children:[l,n,c,u]}),e[91]=x,e[92]=l,e[93]=n,e[94]=c,e[95]=u,e[96]=p):p=e[96];let V;return e[97]!==o||e[98]!==p||e[99]!==f||e[100]!==r?(V=t.jsxs(o,{breadcrumbs:f,children:[r,p]}),e[97]=o,e[98]=p,e[99]=f,e[100]=r,e[101]=V):V=e[101],V}function we(a){switch(a){case"ok":return t.jsx(F,{className:"size-5 text-green-500"});case"next_maint":return t.jsx(be,{className:"size-5 text-yellow-500"});case"urgent":return t.jsx(_e,{className:"size-5 text-red-500"});default:return null}}function Ce(a){switch(a){case"ok":return t.jsx(m,{className:"bg-green-500",children:"OK"});case"next_maint":return t.jsx(m,{className:"bg-yellow-500",children:"Próx. Mant."});case"urgent":return t.jsx(m,{className:"bg-red-500",children:"Urgente"});default:return t.jsx(m,{variant:"outline",children:a})}}function ke(a,e){const s=e.item.category;return a[s]||(a[s]=[]),a[s].push(e),a}export{De as default};
