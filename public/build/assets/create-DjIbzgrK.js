import{c as pe,u as ue,r as he,j as s,H as _e}from"./app-Dhlq3v3a.js";import{B as ie}from"./button--SIjxSqf.js";import{C as ve,a as je,b as ge,c as ye}from"./card-uCocbDWG.js";import{C as be}from"./checkbox-B_y1UdQU.js";import{I as ae}from"./input-C2cgvfh9.js";import{L as n}from"./label-BxQUr8Yu.js";import{a as Ne,b as ke,c as Se,S as we,d as Ce}from"./select-fmhIgkuk.js";import{T as Te}from"./textarea-CNe33xpG.js";import{A as Ie}from"./app-layout-MERPYfxX.js";/* empty css            */import"./index-D5mPDqLq.js";import"./index-BHpkncZK.js";import"./index-DMfEEM0r.js";import"./check-DPwBeW2V.js";import"./chevron-down-DuM3--91.js";import"./index-C4J_hXM0.js";import"./shield-BQi5oA7D.js";function Ke(d){const e=pe.c(104),{vehicles:o}=d;let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=new Date().toISOString().split("T"),e[0]=P):P=e[0];let z;e[1]===Symbol.for("react.memo_cache_sentinel")?(z=[],e[1]=z):z=e[1];let H;e[2]===Symbol.for("react.memo_cache_sentinel")?(H=[],e[2]=H):H=e[2];let M;e[3]===Symbol.for("react.memo_cache_sentinel")?(M={vehicle_id:"",entry_date:P[0],tentative_exit_date:"",workshop_name:"Nemesio Vicuña 275, Puente Alto",description:"",tasks:z,issue_ids:H},e[3]=M):M=e[3];const{data:t,setData:l,post:re,processing:ce,errors:a}=ue(M),[r,me]=he.useState(null);let B;e[4]!==t.vehicle_id||e[5]!==l||e[6]!==o?(B=()=>{if(t.vehicle_id){const i=o.find(c=>c.id.toString()===t.vehicle_id);me(i||null),l("issue_ids",[])}else me(null)},e[4]=t.vehicle_id,e[5]=l,e[6]=o,e[7]=B):B=e[7];let G;e[8]!==t.vehicle_id?(G=[t.vehicle_id],e[8]=t.vehicle_id,e[9]=G):G=e[9],he.useEffect(B,G);let W;e[10]!==t.issue_ids||e[11]!==l?(W=i=>{const c=t.issue_ids;c.includes(i)?l("issue_ids",c.filter(F=>F!==i)):l("issue_ids",[...c,i])},e[10]=t.issue_ids,e[11]=l,e[12]=W):W=e[12];const ne=W;let q;e[13]!==re?(q=i=>{i.preventDefault(),re("/vehicles/workshop")},e[13]=re,e[14]=q):q=e[14];const de=q;let J,K;e[15]===Symbol.for("react.memo_cache_sentinel")?(K=[{title:"Panel Principal",href:"/dashboard"},{title:"Taller Mecánico",href:"/vehicles/workshop"},{title:"Nuevo Ingreso",href:"/vehicles/workshop/create"}],J=s.jsx(_e,{title:"Ingresar Vehículo a Taller"}),e[15]=J,e[16]=K):(J=e[15],K=e[16]);let Q;e[17]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(ve,{children:s.jsx(je,{children:"Ingresar Vehículo a Taller"})}),e[17]=Q):Q=e[17];let U;e[18]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(n,{children:"Vehículo"}),e[18]=U):U=e[18];let m;e[19]!==l?(m=i=>l("vehicle_id",i),e[19]=l,e[20]=m):m=e[20];const fe=t.vehicle_id;let X;e[21]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(Ne,{children:s.jsx(ke,{placeholder:"Seleccione un vehículo"})}),e[21]=X):X=e[21];let h;e[22]!==o?(h=o.map(Ve),e[22]=o,e[23]=h):h=e[23];let f;e[24]!==h?(f=s.jsx(Se,{children:h}),e[24]=h,e[25]=f):f=e[25];let x;e[26]!==t.vehicle_id||e[27]!==m||e[28]!==f?(x=s.jsxs(we,{onValueChange:m,value:fe,children:[X,f]}),e[26]=t.vehicle_id,e[27]=m,e[28]=f,e[29]=x):x=e[29];let p;e[30]!==a.vehicle_id?(p=a.vehicle_id&&s.jsx("p",{className:"text-sm text-destructive",children:a.vehicle_id}),e[30]=a.vehicle_id,e[31]=p):p=e[31];let u;e[32]!==x||e[33]!==p?(u=s.jsxs("div",{className:"space-y-2",children:[U,x,p]}),e[32]=x,e[33]=p,e[34]=u):u=e[34];let Y;e[35]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(n,{children:"Taller / Lugar"}),e[35]=Y):Y=e[35];let _;e[36]!==t.workshop_name?(_=s.jsx(ae,{value:t.workshop_name,readOnly:!0,className:"bg-muted text-muted-foreground"}),e[36]=t.workshop_name,e[37]=_):_=e[37];let v;e[38]!==a.workshop_name?(v=a.workshop_name&&s.jsx("p",{className:"text-sm text-destructive",children:a.workshop_name}),e[38]=a.workshop_name,e[39]=v):v=e[39];let j;e[40]!==_||e[41]!==v?(j=s.jsxs("div",{className:"space-y-2",children:[Y,_,v]}),e[40]=_,e[41]=v,e[42]=j):j=e[42];let g;e[43]!==u||e[44]!==j?(g=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u,j]}),e[43]=u,e[44]=j,e[45]=g):g=e[45];let y;e[46]!==r?(y=r&&s.jsxs("div",{className:"rounded-md border bg-muted/50 p-4",children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Detalles del Vehículo"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Patente:"})," ",r.plate||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Marca/Modelo:"})," ",r.make," ",r.model]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Compañía:"})," ",r.company]})]}),r.active_maintenance_id&&s.jsxs("div",{className:"mt-4 rounded-md border border-yellow-500/20 bg-yellow-500/10 p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"font-bold text-yellow-500",children:"⚠️ Este vehículo ya se encuentra en taller."}),s.jsx(ie,{asChild:!0,variant:"secondary",size:"sm",children:s.jsx("a",{href:`/vehicles/workshop/${r.active_maintenance_id}`,children:"Ver Orden Activa"})})]}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Si desea ingresar un nuevo registro, por favor finalice la orden anterior primero."})]})]}),e[46]=r,e[47]=y):y=e[47];let Z;e[48]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(n,{children:"Fecha de Ingreso"}),e[48]=Z):Z=e[48];let b;e[49]!==l?(b=i=>l("entry_date",i.target.value),e[49]=l,e[50]=b):b=e[50];let N;e[51]!==t.entry_date||e[52]!==b?(N=s.jsx(ae,{type:"date",value:t.entry_date,onChange:b}),e[51]=t.entry_date,e[52]=b,e[53]=N):N=e[53];let k;e[54]!==a.entry_date?(k=a.entry_date&&s.jsx("p",{className:"text-sm text-destructive",children:a.entry_date}),e[54]=a.entry_date,e[55]=k):k=e[55];let S;e[56]!==N||e[57]!==k?(S=s.jsxs("div",{className:"space-y-2",children:[Z,N,k]}),e[56]=N,e[57]=k,e[58]=S):S=e[58];let ee;e[59]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(n,{children:"Fecha Tentativa Salida (Opcional)"}),e[59]=ee):ee=e[59];let w;e[60]!==l?(w=i=>l("tentative_exit_date",i.target.value),e[60]=l,e[61]=w):w=e[61];let C;e[62]!==t.tentative_exit_date||e[63]!==w?(C=s.jsxs("div",{className:"space-y-2",children:[ee,s.jsx(ae,{type:"date",value:t.tentative_exit_date,onChange:w})]}),e[62]=t.tentative_exit_date,e[63]=w,e[64]=C):C=e[64];let T;e[65]!==S||e[66]!==C?(T=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[S,C]}),e[65]=S,e[66]=C,e[67]=T):T=e[67];let I;e[68]!==t.issue_ids||e[69]!==ne||e[70]!==r?(I=r&&r.issues.length>0&&s.jsxs("div",{className:"space-y-2 rounded-md border p-4",children:[s.jsx(n,{className:"text-base font-semibold",children:"Reportar Incidencias Existentes"}),s.jsx("div",{className:"space-y-2",children:r.issues.map(i=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(be,{id:`issue-${i.id}`,checked:t.issue_ids.includes(i.id),onCheckedChange:()=>ne(i.id)}),s.jsxs(n,{htmlFor:`issue-${i.id}`,className:"font-normal",children:[s.jsxs("span",{className:"font-semibold",children:[i.date,":"]})," ",i.description," ",s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.severity,")"]})]})]},i.id))})]}),e[68]=t.issue_ids,e[69]=ne,e[70]=r,e[71]=I):I=e[71];let se;e[72]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(n,{children:"Trabajos a Realizar (Lista)"}),e[72]=se):se=e[72];let V;e[73]!==t.tasks||e[74]!==l?(V=t.tasks.map((i,c)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ae,{value:i,onChange:F=>{const oe=[...t.tasks];oe[c]=F.target.value,l("tasks",oe)},placeholder:`Trabajo #${c+1}`}),s.jsxs(ie,{type:"button",variant:"destructive",size:"icon",onClick:()=>{const F=t.tasks.filter((oe,xe)=>xe!==c);l("tasks",F)},children:[s.jsx("span",{className:"sr-only",children:"Eliminar"}),"×"]})]},c)),e[73]=t.tasks,e[74]=l,e[75]=V):V=e[75];let E;e[76]!==t.tasks||e[77]!==l?(E=s.jsx(ie,{type:"button",variant:"outline",onClick:()=>l("tasks",[...t.tasks,""]),children:"+ Agregar Trabajo"}),e[76]=t.tasks,e[77]=l,e[78]=E):E=e[78];let A;e[79]!==V||e[80]!==E?(A=s.jsxs("div",{className:"space-y-2",children:[se,s.jsxs("div",{className:"space-y-2",children:[V,E]})]}),e[79]=V,e[80]=E,e[81]=A):A=e[81];let te;e[82]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(n,{children:"Observaciones Generales"}),e[82]=te):te=e[82];let D;e[83]!==l?(D=i=>l("description",i.target.value),e[83]=l,e[84]=D):D=e[84];let L;e[85]!==t.description||e[86]!==D?(L=s.jsx(Te,{value:t.description,onChange:D,placeholder:"Detalles adicionales...",rows:3}),e[85]=t.description,e[86]=D,e[87]=L):L=e[87];let O;e[88]!==a.description?(O=a.description&&s.jsx("p",{className:"text-sm text-destructive",children:a.description}),e[88]=a.description,e[89]=O):O=e[89];let R;e[90]!==L||e[91]!==O?(R=s.jsxs("div",{className:"space-y-2",children:[te,L,O]}),e[90]=L,e[91]=O,e[92]=R):R=e[92];let $;e[93]!==ce?($=s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(ie,{type:"submit",disabled:ce,children:"Registrar Ingreso"})}),e[93]=ce,e[94]=$):$=e[94];let le;return e[95]!==de||e[96]!==g||e[97]!==y||e[98]!==T||e[99]!==I||e[100]!==A||e[101]!==R||e[102]!==$?(le=s.jsxs(Ie,{breadcrumbs:K,children:[J,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsx("div",{className:"mx-auto w-full max-w-3xl",children:s.jsxs(ge,{children:[Q,s.jsx(ye,{children:s.jsxs("form",{onSubmit:de,className:"space-y-6",children:[g,y,T,I,A,R,$]})})]})})})]}),e[95]=de,e[96]=g,e[97]=y,e[98]=T,e[99]=I,e[100]=A,e[101]=R,e[102]=$,e[103]=le):le=e[103],le}function Ve(d){return s.jsxs(Ce,{value:d.id.toString(),children:[d.name," (",d.company,")"]},d.id)}export{Ke as default};
