import{c as Ne,r as _e,u as Ae,j as t,H as ke}from"./app-BKnrCjqt.js";import{M as Se}from"./MaterialSelector-DVq4MmBf.js";import{P as Ee}from"./Pagination-Dc_m4t3J.js";import{c as we,A as Ce}from"./app-layout-C6hzB9E0.js";import{a as ye}from"./button-DScxiekG.js";import{S as Le}from"./save-DMUsep6s.js";import{H as Te}from"./history-VgP1eVXb.js";/* empty css            */import"./index-BYamYuyY.js";import"./search-Dlz94hng.js";import"./index-DU85HIUT.js";import"./check-C18kHmnC.js";import"./index-C4J_hXM0.js";import"./shield-BqiuaNok.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],Me=ye("CircleArrowDown",qe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Be=ye("CircleArrowUp",Pe),Re=[{value:"EPP",label:"Equipos de Protección Personal (EPP)"},{value:"EXT",label:"Material de Extinción (EXT)"},{value:"RES",label:"Herramientas de Rescate (RES)"},{value:"MED",label:"Material Médico (MED)"},{value:"TEL",label:"Telecomunicaciones (TEL)"},{value:"EFO",label:"Entrada Forzada (EFO)"},{value:"ESC",label:"Escalas (ESC)"},{value:"VEN",label:"Ventilación (VEN)"},{value:"REL",label:"Riesgos Eléctricos (REL)"},{value:"HAZ",label:"Materiales Peligrosos (HAZ)"}];function Ye(a){const e=Ne.c(121),{logs:c,materials:$}=a,[i,je]=_e.useState("ALTA");let J;e[0]===Symbol.for("react.memo_cache_sentinel")?(J={item_name:"",brand:"",model:"",serial_number:"",inventory_number:"",category:"",type:"ALTA",quantity:1,reason:"",status:"",document:null},e[0]=J):J=e[0];const{data:r,setData:s,post:me,processing:de,reset:ue,errors:n}=Ae(J);let V;e[1]!==me||e[2]!==ue?(V=l=>{l.preventDefault(),me("/equipment",{onSuccess:()=>ue()})},e[1]=me,e[2]=ue,e[3]=V):V=e[3];const fe=V;let G;e[4]!==s?(G=l=>{je(l),s("type",l)},e[4]=s,e[5]=G):G=e[5];const m=G;let U,Z;e[6]===Symbol.for("react.memo_cache_sentinel")?(U=[{title:"Panel Principal",href:"/dashboard"},{title:"Material Menor",href:"/equipment"}],Z=t.jsx(ke,{title:"Gestión Material Menor"}),e[6]=U,e[7]=Z):(U=e[6],Z=e[7]);let K;e[8]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[t.jsx(we,{className:"size-5 text-primary"}),t.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Registro de Material"})]}),e[8]=K):K=e[8];let d;e[9]!==m?(d=()=>m("ALTA"),e[9]=m,e[10]=d):d=e[10];const be=`flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-all ${i==="ALTA"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`;let Q;e[11]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx(Be,{className:"size-4"})," Alta"]}),e[11]=Q):Q=e[11];let u;e[12]!==d||e[13]!==be?(u=t.jsx("button",{onClick:d,className:be,children:Q}),e[12]=d,e[13]=be,e[14]=u):u=e[14];let f;e[15]!==m?(f=()=>m("BAJA"),e[15]=m,e[16]=f):f=e[16];const xe=`flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-all ${i==="BAJA"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`;let W;e[17]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx(Me,{className:"size-4"})," Baja"]}),e[17]=W):W=e[17];let b;e[18]!==f||e[19]!==xe?(b=t.jsx("button",{onClick:f,className:xe,children:W}),e[18]=f,e[19]=xe,e[20]=b):b=e[20];let x;e[21]!==u||e[22]!==b?(x=t.jsxs("div",{className:"mb-6 flex gap-2 rounded-lg bg-muted p-1",children:[u,b]}),e[21]=u,e[22]=b,e[23]=x):x=e[23];let Y;e[24]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre del Material"}),e[24]=Y):Y=e[24];let p;e[25]!==s?(p=l=>s("item_name",l.target.value),e[25]=s,e[26]=p):p=e[26];let g;e[27]!==r.item_name||e[28]!==p?(g=t.jsx("input",{type:"text",value:r.item_name,onChange:p,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: Pitón Protek, Hacha...",required:!0}),e[27]=r.item_name,e[28]=p,e[29]=g):g=e[29];let h;e[30]!==n.item_name?(h=n.item_name&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.item_name}),e[30]=n.item_name,e[31]=h):h=e[31];let v;e[32]!==g||e[33]!==h?(v=t.jsxs("div",{children:[Y,g,h]}),e[32]=g,e[33]=h,e[34]=v):v=e[34];let y;e[35]!==i||e[36]!==r.inventory_number||e[37]!==$||e[38]!==s?(y=(i==="ALTA"||i==="BAJA")&&t.jsxs("div",{className:"space-y-4 rounded-lg bg-muted/50 p-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium",children:i==="ALTA"?"Buscador Inteligente (Autocompletar Alta)":"Buscador Inteligente (Seleccionar Baja)"}),t.jsx(Se,{materials:$,value:void 0,onChange:l=>{const o=$.find(ce=>ce.id===l);o&&s(ce=>({...ce,item_name:o.product_name,brand:o.brand||"",model:o.model||"",category:o.category||ce.category,serial_number:o.serial_number||"",inventory_number:o.code||o.serial_number||""}))},placeholder:"Buscar por Nombre, Código o S/N..."}),t.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:i==="ALTA"?"Busque un material existente para sumar stock automáticamente.":"Busque el material que desea dar de baja."})]}),t.jsxs("div",{className:i==="BAJA"?"opacity-50":"",children:[t.jsx("label",{className:"mb-1 block text-sm font-medium",children:i==="ALTA"?"N° Inventario Personalizado (Opcional)":"N° Inventario Seleccionado"}),t.jsx("input",{type:"text",value:r.inventory_number,onChange:l=>s("inventory_number",l.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:i==="ALTA"?"Dejar vacío para generación automática (ej: EPP-XXXX)":"Se rellena automáticamente...",readOnly:!0})]})]}),e[35]=i,e[36]=r.inventory_number,e[37]=$,e[38]=s,e[39]=y):y=e[39];let ee;e[40]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Marca"}),e[40]=ee):ee=e[40];const pe=r.brand||"";let j;e[41]!==s?(j=l=>s("brand",l.target.value),e[41]=s,e[42]=j):j=e[42];let N;e[43]!==pe||e[44]!==j?(N=t.jsxs("div",{children:[ee,t.jsx("input",{type:"text",value:pe,onChange:j,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: Protek"})]}),e[43]=pe,e[44]=j,e[45]=N):N=e[45];let te;e[46]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Modelo"}),e[46]=te):te=e[46];const ge=r.model||"";let _;e[47]!==s?(_=l=>s("model",l.target.value),e[47]=s,e[48]=_):_=e[48];let A;e[49]!==ge||e[50]!==_?(A=t.jsxs("div",{children:[te,t.jsx("input",{type:"text",value:ge,onChange:_,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: 366"})]}),e[49]=ge,e[50]=_,e[51]=A):A=e[51];let k;e[52]!==N||e[53]!==A?(k=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N,A]}),e[52]=N,e[53]=A,e[54]=k):k=e[54];let S;e[55]!==i||e[56]!==r.category||e[57]!==n.category||e[58]!==s?(S=i==="ALTA"&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Categoría (Necesaria para Auto-Generar Código)"}),t.jsxs("select",{value:r.category,onChange:l=>s("category",l.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",required:!0,children:[t.jsx("option",{value:"",children:"Seleccione Categoría"}),Re.map(He)]}),n.category&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.category})]}),e[55]=i,e[56]=r.category,e[57]=n.category,e[58]=s,e[59]=S):S=e[59];let se;e[60]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Cantidad"}),e[60]=se):se=e[60];let E;e[61]!==s?(E=l=>s("quantity",parseInt(l.target.value)||1),e[61]=s,e[62]=E):E=e[62];let w;e[63]!==r.quantity||e[64]!==E?(w=t.jsx("input",{type:"number",min:"1",value:r.quantity,onChange:E,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",required:!0}),e[63]=r.quantity,e[64]=E,e[65]=w):w=e[65];let C;e[66]!==n.quantity?(C=n.quantity&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.quantity}),e[66]=n.quantity,e[67]=C):C=e[67];let L;e[68]!==w||e[69]!==C?(L=t.jsxs("div",{children:[se,w,C]}),e[68]=w,e[69]=C,e[70]=L):L=e[70];let le;e[71]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Número de Serie (Fabricante)"}),e[71]=le):le=e[71];let T;e[72]!==s?(T=l=>s("serial_number",l.target.value),e[72]=s,e[73]=T):T=e[73];let q;e[74]!==r.serial_number||e[75]!==T?(q=t.jsx("input",{type:"text",value:r.serial_number,onChange:T,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ingrese S/N si aplica (Limita stock a 1 en Alta)"}),e[74]=r.serial_number,e[75]=T,e[76]=q):q=e[76];let M;e[77]!==n.serial_number?(M=n.serial_number&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.serial_number}),e[77]=n.serial_number,e[78]=M):M=e[78];let P;e[79]!==q||e[80]!==M?(P=t.jsxs("div",{children:[le,q,M]}),e[79]=q,e[80]=M,e[81]=P):P=e[81];let re;e[82]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Motivo / Descripción"}),e[82]=re):re=e[82];let B;e[83]!==s?(B=l=>s("reason",l.target.value),e[83]=s,e[84]=B):B=e[84];const he=i==="ALTA"?"Detalles de la adquisición...":"Razón de la baja (daño, pérdida, etc)...";let R;e[85]!==r.reason||e[86]!==B||e[87]!==he?(R=t.jsxs("div",{children:[re,t.jsx("textarea",{value:r.reason,onChange:B,className:"min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:he})]}),e[85]=r.reason,e[86]=B,e[87]=he,e[88]=R):R=e[88];let ae;e[89]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Documento de Respaldo (Opcional)"}),e[89]=ae):ae=e[89];let D;e[90]!==s?(D=t.jsxs("div",{children:[ae,t.jsx("input",{type:"file",onChange:l=>s("document",l.target.files?l.target.files[0]:null),className:"w-full cursor-pointer rounded-md border border-input bg-background px-3 py-2 text-sm file:mr-4 file:rounded-full file:border-0 file:bg-primary/10 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-primary hover:file:bg-primary/20",accept:".pdf,.jpg,.png,.jpeg"})]}),e[90]=s,e[91]=D):D=e[91];let ie;e[92]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(Le,{className:"size-4"}),e[92]=ie):ie=e[92];const ve=i==="ALTA"?"Alta":"Baja";let H;e[93]!==de||e[94]!==ve?(H=t.jsxs("button",{type:"submit",disabled:de,className:"flex h-10 w-full items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90",children:[ie,"Registrar"," ",ve]}),e[93]=de,e[94]=ve,e[95]=H):H=e[95];let I;e[96]!==fe||e[97]!==v||e[98]!==y||e[99]!==k||e[100]!==S||e[101]!==L||e[102]!==P||e[103]!==R||e[104]!==D||e[105]!==H?(I=t.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[v,y,k,S,L,P,R,D,H]}),e[96]=fe,e[97]=v,e[98]=y,e[99]=k,e[100]=S,e[101]=L,e[102]=P,e[103]=R,e[104]=D,e[105]=H,e[106]=I):I=e[106];let z;e[107]!==x||e[108]!==I?(z=t.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[K,x,I]}),e[107]=x,e[108]=I,e[109]=z):z=e[109];let ne;e[110]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs("div",{className:"mb-6 flex items-center gap-2 text-primary",children:[t.jsx(Te,{className:"size-5"}),t.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Historial de Movimientos"})]}),e[110]=ne):ne=e[110];let O;e[111]!==c.data?(O=t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.data.length===0?t.jsx("p",{className:"py-8 text-center text-muted-foreground",children:"No hay registros recientes."}):t.jsx("div",{className:"space-y-4",children:c.data.map(De)})}),e[111]=c.data,e[112]=O):O=e[112];let X;e[113]!==c.links?(X=t.jsx(Ee,{links:c.links}),e[113]=c.links,e[114]=X):X=e[114];let F;e[115]!==O||e[116]!==X?(F=t.jsxs("div",{className:"flex max-h-[600px] flex-col overflow-hidden rounded-xl border bg-card p-6 shadow-sm",children:[ne,O,X]}),e[115]=O,e[116]=X,e[117]=F):F=e[117];let oe;return e[118]!==z||e[119]!==F?(oe=t.jsxs(Ce,{breadcrumbs:U,children:[Z,t.jsx("div",{className:"flex flex-col gap-6 p-4",children:t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[z,F]})})]}),e[118]=z,e[119]=F,e[120]=oe):oe=e[120],oe}function De(a){return t.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3 transition-colors hover:bg-muted/50",children:[t.jsxs("div",{className:"mb-1 flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block font-semibold",children:a.item_name}),a.inventory_number&&t.jsx("span",{className:"rounded border bg-background px-1.5 py-0.5 font-mono text-xs",children:a.inventory_number})]}),t.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${a.type==="ALTA"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.type})]}),t.jsxs("p",{className:"mb-1 text-sm text-muted-foreground",children:[a.serial_number&&t.jsxs("span",{className:"mr-2",children:["S/N: ",a.serial_number]}),"Por: ",a.user.name]}),a.reason&&t.jsxs("p",{className:"border-l-2 border-primary/30 pl-2 text-sm italic",children:['"',a.reason,'"']}),t.jsx("div",{className:"mt-2 flex items-center justify-between",children:t.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleString()})})]},a.id)}function He(a){return t.jsx("option",{value:a.value,children:a.label},a.value)}export{Ye as default};
