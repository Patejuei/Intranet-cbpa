import{c as oe,u as me,j as s,H as ce}from"./app-f77woEWo.js";import{S as te,c as le,a as ie,b as ae,d as re}from"./select-CUASvSPl.js";import{A as de}from"./app-layout-B4XzD86h.js";import{S as ue}from"./shield-R2tHue2s.js";/* empty css            */import"./index-CE2_aldF.js";import"./button-BUox-IYX.js";import"./index-BJkESKFP.js";import"./index-CPAQGPCJ.js";import"./check-DZ06pTr0.js";import"./index-C4J_hXM0.js";const fe=[{id:"inventory",label:"Inventario"},{id:"tickets",label:"Ticketera"},{id:"batteries",label:"Baterías"},{id:"equipment",label:"Material Menor"},{id:"deliveries",label:"Actas de Entrega"},{id:"firefighters",label:"Bomberos"}],pe=["Primera Compañía","Segunda Compañía","Tercera Compañía","Cuarta Compañía","Quinta Compañía","Sexta Compañía","Séptima Compañía","Octava Compañía","Novena Compañía","Décima Compañía","Brigada Juvenil","Comandancia"],xe=[{value:"user",label:"Usuario Estándar"},{value:"admin",label:"Administrador del Sistema"},{value:"capitan",label:"Capitán"},{value:"teniente",label:"Teniente"},{value:"maquinista",label:"Maquinista"},{value:"ayudante",label:"Ayudante"},{value:"comandancia",label:"Comandancia"}];function Ee(){const e=oe.c(90);let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A=[],e[0]=A):A=e[0];let R;e[1]===Symbol.for("react.memo_cache_sentinel")?(R={name:"",email:"",password:"",company:"",role:"user",permissions:A},e[1]=R):R=e[1];const{data:l,setData:i,post:I,processing:ee,errors:a}=me(R);let M;e[2]!==I?(M=t=>{t.preventDefault(),I("/admin/users")},e[2]=I,e[3]=M):M=e[3];const se=M;let T;e[4]!==l.permissions||e[5]!==i?(T=(t,Z)=>{const V=l.permissions.filter(ne=>!ne.startsWith(`${t}.`));Z==="view"?V.push(`${t}.view`):Z==="edit"&&V.push(`${t}.view`,`${t}.edit`),i("permissions",V)},e[4]=l.permissions,e[5]=i,e[6]=T):T=e[6];const P=T;let q;e[7]!==l.permissions?(q=t=>{const Z=l.permissions.includes(`${t}.edit`),V=l.permissions.includes(`${t}.view`);return Z?"edit":V?"view":"none"},e[7]=l.permissions,e[8]=q):q=e[8];const U=q;let B,D;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=[{title:"Panel Principal",href:"/dashboard"},{title:"Usuarios",href:"/admin/users"},{title:"Nuevo Usuario",href:"/admin/users/create"}],D=s.jsx(ce,{title:"Crear Usuario"}),e[9]=B,e[10]=D):(B=e[9],D=e[10]);let H;e[11]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Crear Nuevo Usuario"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete los detalles para registrar un nuevo usuario en el sistema."})]}),e[11]=H):H=e[11];let z;e[12]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre Completo"}),e[12]=z):z=e[12];let r;e[13]!==i?(r=t=>i("name",t.target.value),e[13]=i,e[14]=r):r=e[14];let n;e[15]!==l.name||e[16]!==r?(n=s.jsx("input",{type:"text",value:l.name,onChange:r,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[15]=l.name,e[16]=r,e[17]=n):n=e[17];let o;e[18]!==a.name?(o=a.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.name}),e[18]=a.name,e[19]=o):o=e[19];let m;e[20]!==n||e[21]!==o?(m=s.jsxs("div",{children:[z,n,o]}),e[20]=n,e[21]=o,e[22]=m):m=e[22];let F;e[23]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Correo Electrónico"}),e[23]=F):F=e[23];let c;e[24]!==i?(c=t=>i("email",t.target.value),e[24]=i,e[25]=c):c=e[25];let d;e[26]!==l.email||e[27]!==c?(d=s.jsx("input",{type:"email",value:l.email,onChange:c,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[26]=l.email,e[27]=c,e[28]=d):d=e[28];let u;e[29]!==a.email?(u=a.email&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.email}),e[29]=a.email,e[30]=u):u=e[30];let f;e[31]!==d||e[32]!==u?(f=s.jsxs("div",{children:[F,d,u]}),e[31]=d,e[32]=u,e[33]=f):f=e[33];let p;e[34]!==m||e[35]!==f?(p=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[m,f]}),e[34]=m,e[35]=f,e[36]=p):p=e[36];let J;e[37]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Contraseña"}),e[37]=J):J=e[37];let x;e[38]!==i?(x=t=>i("password",t.target.value),e[38]=i,e[39]=x):x=e[39];let b;e[40]!==l.password||e[41]!==x?(b=s.jsx("input",{type:"password",value:l.password,onChange:x,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[40]=l.password,e[41]=x,e[42]=b):b=e[42];let h;e[43]!==a.password?(h=a.password&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.password}),e[43]=a.password,e[44]=h):h=e[44];let g;e[45]!==b||e[46]!==h?(g=s.jsxs("div",{children:[J,b,h]}),e[45]=b,e[46]=h,e[47]=g):g=e[47];let L;e[48]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Compañía"}),e[48]=L):L=e[48];let v;e[49]!==i?(v=t=>i("company",t),e[49]=i,e[50]=v):v=e[50];let O;e[51]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(ie,{className:"w-full",children:s.jsx(ae,{placeholder:"Seleccione una Compañía"})}),e[51]=O):O=e[51];let Q;e[52]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(le,{children:pe.map(he)}),e[52]=Q):Q=e[52];let j;e[53]!==l.company||e[54]!==v?(j=s.jsxs(te,{value:l.company,onValueChange:v,children:[O,Q]}),e[53]=l.company,e[54]=v,e[55]=j):j=e[55];let y;e[56]!==a.company?(y=a.company&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.company}),e[56]=a.company,e[57]=y):y=e[57];let N;e[58]!==j||e[59]!==y?(N=s.jsxs("div",{children:[L,j,y]}),e[58]=j,e[59]=y,e[60]=N):N=e[60];let C;e[61]!==g||e[62]!==N?(C=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[g,N]}),e[61]=g,e[62]=N,e[63]=C):C=e[63];let w;e[64]!==p||e[65]!==C?(w=s.jsxs("div",{className:"space-y-4",children:[p,C]}),e[64]=p,e[65]=C,e[66]=w):w=e[66];let W;e[67]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(ue,{className:"size-4"})," Roles y Permisos"]}),e[67]=W):W=e[67];let G;e[68]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Rol del Sistema"}),e[68]=G):G=e[68];let S;e[69]!==i?(S=t=>i("role",t),e[69]=i,e[70]=S):S=e[70];let K;e[71]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(ie,{className:"w-full",children:s.jsx(ae,{placeholder:"Seleccione un Rol"})}),e[71]=K):K=e[71];let X;e[72]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(le,{children:xe.map(be)}),e[72]=X):X=e[72];let _;e[73]!==l.role||e[74]!==S?(_=s.jsxs("div",{className:"mb-6",children:[G,s.jsxs(te,{value:l.role,onValueChange:S,children:[K,X]})]}),e[73]=l.role,e[74]=S,e[75]=_):_=e[75];let k;e[76]!==l.role||e[77]!==U||e[78]!==P?(k=l.role!=="admin"&&l.role!=="capitan"&&s.jsxs("div",{children:[s.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Permisos por Módulo"}),s.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-muted-foreground",children:[s.jsx("th",{className:"pb-2 font-medium",children:"Módulo"}),s.jsx("th",{className:"pb-2 font-medium",children:"Nivel de Acceso"})]})}),s.jsx("tbody",{className:"divide-y",children:fe.map(t=>s.jsxs("tr",{children:[s.jsx("td",{className:"py-2.5 font-medium",children:t.label}),s.jsx("td",{className:"py-2",children:s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>P(t.id,"none"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${U(t.id)==="none"?"bg-background shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ninguno"}),s.jsx("button",{type:"button",onClick:()=>P(t.id,"view"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${U(t.id)==="view"?"bg-blue-100 text-blue-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ver"}),s.jsx("button",{type:"button",onClick:()=>P(t.id,"edit"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${U(t.id)==="edit"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Editar"})]})})]},t.id))})]})}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"'Editar' incluye permisos de 'Ver'."})]}),e[76]=l.role,e[77]=U,e[78]=P,e[79]=k):k=e[79];let $;e[80]!==_||e[81]!==k?($=s.jsxs("div",{className:"rounded-lg border p-4",children:[W,_,k]}),e[80]=_,e[81]=k,e[82]=$):$=e[82];let E;e[83]!==ee?(E=s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:ee,className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground text-white transition-colors hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-primary focus-visible:outline-none disabled:opacity-50",children:"Registrar Usuario"})}),e[83]=ee,e[84]=E):E=e[84];let Y;return e[85]!==se||e[86]!==w||e[87]!==$||e[88]!==E?(Y=s.jsxs(de,{breadcrumbs:B,children:[D,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsxs("div",{className:"max-w-4xl rounded-xl border bg-card p-6 shadow-sm",children:[H,s.jsxs("form",{onSubmit:se,className:"space-y-6",children:[w,$,E]})]})})]}),e[85]=se,e[86]=w,e[87]=$,e[88]=E,e[89]=Y):Y=e[89],Y}function be(e){return s.jsx(re,{value:e.value,children:e.label},e.value)}function he(e){return s.jsx(re,{value:e,children:e},e)}export{Ee as default};
