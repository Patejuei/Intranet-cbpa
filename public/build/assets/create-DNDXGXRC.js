import{c as ne,u as ce,j as s,H as me}from"./app-CPM0qqBN.js";import{S as ie,a as le,b as ae,c as re,d as P}from"./select-BBnrt3Tn.js";import{A as de}from"./app-layout-BRytu26V.js";import{S as ue}from"./shield-DKSAdIwv.js";/* empty css            */import"./index-CWMEVgmi.js";import"./button-CqEo9HDw.js";import"./index-BlbzEdsQ.js";import"./index-B-snUCRd.js";import"./chevron-down-BYJQCYpr.js";import"./check-CqO1qPRE.js";import"./index-C4J_hXM0.js";const fe=[{id:"inventory",label:"Inventario"},{id:"tickets",label:"Ticketera"},{id:"batteries",label:"Baterías"},{id:"equipment",label:"Material Menor"},{id:"deliveries",label:"Actas de Entrega"},{id:"firefighters",label:"Bomberos"},{id:"vehicles",label:"Material Mayor (General)"},{id:"vehicles.incidents",label:"M. Mayor - Incidencias"},{id:"vehicles.logs",label:"M. Mayor - Bitácora"},{id:"vehicles.workshop",label:"M. Mayor - Taller"},{id:"vehicles.inventory",label:"M. Mayor - Inventario"}],pe=["Primera Compañía","Segunda Compañía","Tercera Compañía","Cuarta Compañía","Quinta Compañía","Sexta Compañía","Séptima Compañía","Octava Compañía","Novena Compañía","Décima Compañía","Brigada Juvenil","Comandancia"];function Me(){const e=ne.c(90);let R;e[0]===Symbol.for("react.memo_cache_sentinel")?(R=[],e[0]=R):R=e[0];let A;e[1]===Symbol.for("react.memo_cache_sentinel")?(A={name:"",email:"",password:"",company:"",role:"user",permissions:R},e[1]=A):A=e[1];const{data:i,setData:l,post:ee,processing:se,errors:a}=ce(A);let T;e[2]!==ee?(T=t=>{t.preventDefault(),ee("/admin/users")},e[2]=ee,e[3]=T):T=e[3];const te=T;let B;e[4]!==i.permissions||e[5]!==l?(B=(t,Z)=>{const V=i.permissions.filter(oe=>!oe.startsWith(`${t}.`));Z==="view"?V.push(`${t}.view`):Z==="edit"&&V.push(`${t}.view`,`${t}.edit`),l("permissions",V)},e[4]=i.permissions,e[5]=l,e[6]=B):B=e[6];const E=B;let D;e[7]!==i.permissions?(D=t=>{const Z=i.permissions.includes(`${t}.edit`),V=i.permissions.includes(`${t}.view`);return Z?"edit":V?"view":"none"},e[7]=i.permissions,e[8]=D):D=e[8];const U=D;let H,q;e[9]===Symbol.for("react.memo_cache_sentinel")?(H=[{title:"Panel Principal",href:"/dashboard"},{title:"Usuarios",href:"/admin/users"},{title:"Nuevo Usuario",href:"/admin/users/create"}],q=s.jsx(me,{title:"Crear Usuario"}),e[9]=H,e[10]=q):(H=e[9],q=e[10]);let z;e[11]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Crear Nuevo Usuario"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete los detalles para registrar un nuevo usuario en el sistema."})]}),e[11]=z):z=e[11];let F;e[12]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre Completo"}),e[12]=F):F=e[12];let r;e[13]!==l?(r=t=>l("name",t.target.value),e[13]=l,e[14]=r):r=e[14];let o;e[15]!==i.name||e[16]!==r?(o=s.jsx("input",{type:"text",value:i.name,onChange:r,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[15]=i.name,e[16]=r,e[17]=o):o=e[17];let n;e[18]!==a.name?(n=a.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.name}),e[18]=a.name,e[19]=n):n=e[19];let c;e[20]!==o||e[21]!==n?(c=s.jsxs("div",{children:[F,o,n]}),e[20]=o,e[21]=n,e[22]=c):c=e[22];let G;e[23]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Correo Electrónico"}),e[23]=G):G=e[23];let m;e[24]!==l?(m=t=>l("email",t.target.value),e[24]=l,e[25]=m):m=e[25];let d;e[26]!==i.email||e[27]!==m?(d=s.jsx("input",{type:"email",value:i.email,onChange:m,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[26]=i.email,e[27]=m,e[28]=d):d=e[28];let u;e[29]!==a.email?(u=a.email&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.email}),e[29]=a.email,e[30]=u):u=e[30];let f;e[31]!==d||e[32]!==u?(f=s.jsxs("div",{children:[G,d,u]}),e[31]=d,e[32]=u,e[33]=f):f=e[33];let p;e[34]!==c||e[35]!==f?(p=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[c,f]}),e[34]=c,e[35]=f,e[36]=p):p=e[36];let J;e[37]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Contraseña"}),e[37]=J):J=e[37];let x;e[38]!==l?(x=t=>l("password",t.target.value),e[38]=l,e[39]=x):x=e[39];let b;e[40]!==i.password||e[41]!==x?(b=s.jsx("input",{type:"password",value:i.password,onChange:x,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[40]=i.password,e[41]=x,e[42]=b):b=e[42];let h;e[43]!==a.password?(h=a.password&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.password}),e[43]=a.password,e[44]=h):h=e[44];let g;e[45]!==b||e[46]!==h?(g=s.jsxs("div",{children:[J,b,h]}),e[45]=b,e[46]=h,e[47]=g):g=e[47];let L;e[48]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Compañía"}),e[48]=L):L=e[48];let v;e[49]!==l?(v=t=>l("company",t),e[49]=l,e[50]=v):v=e[50];let O;e[51]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(le,{className:"w-full",children:s.jsx(ae,{placeholder:"Seleccione una Compañía"})}),e[51]=O):O=e[51];let Q;e[52]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(re,{children:pe.map(xe)}),e[52]=Q):Q=e[52];let j;e[53]!==i.company||e[54]!==v?(j=s.jsxs(ie,{value:i.company,onValueChange:v,children:[O,Q]}),e[53]=i.company,e[54]=v,e[55]=j):j=e[55];let y;e[56]!==a.company?(y=a.company&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.company}),e[56]=a.company,e[57]=y):y=e[57];let N;e[58]!==j||e[59]!==y?(N=s.jsxs("div",{children:[L,j,y]}),e[58]=j,e[59]=y,e[60]=N):N=e[60];let C;e[61]!==g||e[62]!==N?(C=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[g,N]}),e[61]=g,e[62]=N,e[63]=C):C=e[63];let w;e[64]!==p||e[65]!==C?(w=s.jsxs("div",{className:"space-y-4",children:[p,C]}),e[64]=p,e[65]=C,e[66]=w):w=e[66];let W;e[67]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(ue,{className:"size-4"})," Roles y Permisos"]}),e[67]=W):W=e[67];let I;e[68]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Rol del Sistema"}),e[68]=I):I=e[68];let S;e[69]!==l?(S=t=>l("role",t),e[69]=l,e[70]=S):S=e[70];let K;e[71]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(le,{className:"w-full",children:s.jsx(ae,{placeholder:"Seleccione un Rol"})}),e[71]=K):K=e[71];let X;e[72]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs(re,{children:[s.jsx(P,{value:"user",children:"Usuario (Por Defecto)"}),s.jsx(P,{value:"admin",children:"Administrador"}),s.jsx(P,{value:"capitan",children:"Capitán"}),s.jsx(P,{value:"cuartelero",children:"Cuartelero"}),s.jsx(P,{value:"mechanic",children:"Taller Mecánico"})]}),e[72]=X):X=e[72];let _;e[73]!==i.role||e[74]!==S?(_=s.jsxs("div",{className:"mb-6",children:[I,s.jsxs(ie,{value:i.role,onValueChange:S,children:[K,X]})]}),e[73]=i.role,e[74]=S,e[75]=_):_=e[75];let k;e[76]!==i.role||e[77]!==U||e[78]!==E?(k=i.role!=="admin"&&i.role!=="capitan"&&s.jsxs("div",{children:[s.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Permisos por Módulo"}),s.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-muted-foreground",children:[s.jsx("th",{className:"pb-2 font-medium",children:"Módulo"}),s.jsx("th",{className:"pb-2 font-medium",children:"Nivel de Acceso"})]})}),s.jsx("tbody",{className:"divide-y",children:fe.map(t=>s.jsxs("tr",{children:[s.jsx("td",{className:"py-2.5 font-medium",children:t.label}),s.jsx("td",{className:"py-2",children:s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>E(t.id,"none"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${U(t.id)==="none"?"bg-background shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ninguno"}),s.jsx("button",{type:"button",onClick:()=>E(t.id,"view"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${U(t.id)==="view"?"bg-blue-100 text-blue-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ver"}),s.jsx("button",{type:"button",onClick:()=>E(t.id,"edit"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${U(t.id)==="edit"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Editar"})]})})]},t.id))})]})}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"'Editar' incluye permisos de 'Ver'."})]}),e[76]=i.role,e[77]=U,e[78]=E,e[79]=k):k=e[79];let M;e[80]!==_||e[81]!==k?(M=s.jsxs("div",{className:"rounded-lg border p-4",children:[W,_,k]}),e[80]=_,e[81]=k,e[82]=M):M=e[82];let $;e[83]!==se?($=s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:se,className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground text-white transition-colors hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-primary focus-visible:outline-none disabled:opacity-50",children:"Registrar Usuario"})}),e[83]=se,e[84]=$):$=e[84];let Y;return e[85]!==te||e[86]!==w||e[87]!==M||e[88]!==$?(Y=s.jsxs(de,{breadcrumbs:H,children:[q,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsxs("div",{className:"max-w-4xl rounded-xl border bg-card p-6 shadow-sm",children:[z,s.jsxs("form",{onSubmit:te,className:"space-y-6",children:[w,M,$]})]})})]}),e[85]=te,e[86]=w,e[87]=M,e[88]=$,e[89]=Y):Y=e[89],Y}function xe(e){return s.jsx(P,{value:e,children:e},e)}export{Me as default};
