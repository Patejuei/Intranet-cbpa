import{c as Ae,b as Ee,u as qe,r as Fe,j as t,H as Te,L as De}from"./app-CGuCfgbg.js";import{P as Le,C as Oe,a as ze,b as Be,c as Me,d as Re,e as $e,f as Ge,g as He,M as Qe}from"./MaterialSelector-D8B8yVev.js";import{B as ae,c as Ve}from"./button-D65nKyRz.js";import{I as ke}from"./input-Cres2N1d.js";import{L as C}from"./label-DIhg13Fn.js";import{a as Ue,b as Je,c as Ke,d as b,S as We}from"./select-eF6aVqKn.js";import{S as Xe}from"./switch-DzP6S3R9.js";import{b as Ye,A as Ze}from"./app-layout-u9Q5DKjD.js";import{C as et}from"./check-_Go1bDRb.js";import{P as tt}from"./plus-34okoe-c.js";import{S as at}from"./save-BRgJbQeW.js";import{T as st}from"./trash-J1lzQFjk.js";/* empty css            */import"./index-CUc2K9e4.js";import"./search-DkT1WhgV.js";import"./index-Cq7Q3MAY.js";import"./index-j9aIAwFT.js";import"./index-q7GIQJN5.js";import"./shield-7FbujOzr.js";function wt(_){const e=Ae.c(124),{firefighters:l,materials:r}=_,{props:y}=Ee(),{auth:f}=y,p=f.user;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=new Date().toISOString().split("T"),e[0]=c):c=e[0];const m=p.company==="Comandancia"||p.role==="admin"||p.role==="capitan"?"Segunda Compañía":p.company||"";let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=[{material_id:"",quantity:1}],e[1]=d):d=e[1];let o;e[2]!==m?(o={firefighter_id:"",date:c[0],observations:"",company:m,items:d,assignment_type:"firefighter"},e[2]=m,e[3]=o):o=e[3];const{data:a,setData:s,post:x,processing:g,errors:n}=qe(o),[u,j]=Fe.useState(!1),S=p.company==="Comandancia"||p.role==="admin"||p.role==="comandante";let v;e[4]!==a.items||e[5]!==s?(v=()=>{s("items",[...a.items,{material_id:"",quantity:1}])},e[4]=a.items,e[5]=s,e[6]=v):v=e[6];const ye=v;let se;e[7]!==a.items||e[8]!==s?(se=i=>{const h=[...a.items];h.splice(i,1),s("items",h)},e[7]=a.items,e[8]=s,e[9]=se):se=e[9];const ee=se;let ie;e[10]!==a.items||e[11]!==s?(ie=(i,h,_e)=>{const Pe=[...a.items];Pe[i][h]=_e,s("items",Pe)},e[10]=a.items,e[11]=s,e[12]=ie):ie=e[12];const te=ie;let le;e[13]!==x?(le=i=>{i.preventDefault(),x("/deliveries")},e[13]=x,e[14]=le):le=e[14];const Ce=le;let re,ne;e[15]===Symbol.for("react.memo_cache_sentinel")?(ne=[{title:"Actas de Entrega",href:"/deliveries"},{title:"Nueva Acta",href:"/deliveries/create"}],re=t.jsx(Te,{title:"Nueva Acta de Entrega"}),e[15]=re,e[16]=ne):(re=e[15],ne=e[16]);let oe;e[17]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Nueva Acta de Entrega"}),t.jsx("p",{className:"text-muted-foreground",children:"Registre la entrega de material a un voluntario."})]})}),e[17]=oe):oe=e[17];const Se=a.assignment_type==="firefighter"?"Asignación al Bombero":"Asignación a la Compañía";let N;e[18]!==Se?(N=t.jsx(C,{className:"text-base",children:Se}),e[18]=Se,e[19]=N):N=e[19];const Ne=a.assignment_type==="firefighter"?"El material se cargará a la cuenta personal del bombero.":"El material se moverá al inventario de la compañía (sin cargo personal).";let w;e[20]!==Ne?(w=t.jsx("p",{className:"text-sm text-muted-foreground",children:Ne}),e[20]=Ne,e[21]=w):w=e[21];let I;e[22]!==N||e[23]!==w?(I=t.jsxs("div",{className:"space-y-0.5",children:[N,w]}),e[22]=N,e[23]=w,e[24]=I):I=e[24];const we=a.assignment_type==="company";let A;e[25]!==s?(A=i=>s("assignment_type",i?"company":"firefighter"),e[25]=s,e[26]=A):A=e[26];const Ie=!S;let k;e[27]!==we||e[28]!==A||e[29]!==Ie?(k=t.jsx(Xe,{checked:we,onCheckedChange:A,disabled:Ie}),e[27]=we,e[28]=A,e[29]=Ie,e[30]=k):k=e[30];let P;e[31]!==I||e[32]!==k?(P=t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4 shadow-sm",children:[I,k]}),e[31]=I,e[32]=k,e[33]=P):P=e[33];let ce;e[34]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(C,{children:"Bombero Receptor"}),e[34]=ce):ce=e[34];let E;e[35]!==a.firefighter_id||e[36]!==l?(E=a.firefighter_id?l.find(i=>i.id.toString()===a.firefighter_id)?.full_name:"Seleccione bombero...",e[35]=a.firefighter_id,e[36]=l,e[37]=E):E=e[37];let me;e[38]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Ye,{className:"opacity-50"}),e[38]=me):me=e[38];let q;e[39]!==u||e[40]!==E?(q=t.jsx(Le,{asChild:!0,children:t.jsxs(ae,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between",children:[E,me]})}),e[39]=u,e[40]=E,e[41]=q):q=e[41];let de;e[42]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(Oe,{placeholder:"Buscar bombero..."}),e[42]=de):de=e[42];let fe;e[43]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ze,{children:"No se encontró bombero."}),e[43]=fe):fe=e[43];let F;if(e[44]!==a.firefighter_id||e[45]!==l||e[46]!==s){let i;e[48]!==a.firefighter_id||e[49]!==s?(i=h=>t.jsxs(Be,{value:h.full_name,onSelect:()=>{s("firefighter_id",h.id.toString()),j(!1)},children:[h.full_name,t.jsx(et,{className:Ve("ml-auto",a.firefighter_id===h.id.toString()?"opacity-100":"opacity-0")})]},h.id),e[48]=a.firefighter_id,e[49]=s,e[50]=i):i=e[50],F=l.map(i),e[44]=a.firefighter_id,e[45]=l,e[46]=s,e[47]=F}else F=e[47];let T;e[51]!==F?(T=t.jsx(Me,{className:"w-[--radix-popover-trigger-width] p-0",children:t.jsxs(Re,{children:[de,t.jsxs($e,{children:[fe,t.jsx(Ge,{children:F})]})]})}),e[51]=F,e[52]=T):T=e[52];let D;e[53]!==u||e[54]!==q||e[55]!==T?(D=t.jsxs(He,{open:u,onOpenChange:j,children:[q,T]}),e[53]=u,e[54]=q,e[55]=T,e[56]=D):D=e[56];let L;e[57]!==n.firefighter_id?(L=n.firefighter_id&&t.jsx("p",{className:"text-sm text-red-500",children:n.firefighter_id}),e[57]=n.firefighter_id,e[58]=L):L=e[58];let O;e[59]!==D||e[60]!==L?(O=t.jsxs("div",{className:"flex flex-col gap-2",children:[ce,D,L]}),e[59]=D,e[60]=L,e[61]=O):O=e[61];let pe;e[62]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(C,{htmlFor:"date",children:"Fecha"}),e[62]=pe):pe=e[62];let z;e[63]!==s?(z=i=>s("date",i.target.value),e[63]=s,e[64]=z):z=e[64];let B;e[65]!==a.date||e[66]!==z?(B=t.jsx(ke,{type:"date",id:"date",value:a.date,onChange:z,onClick:it,required:!0}),e[65]=a.date,e[66]=z,e[67]=B):B=e[67];let M;e[68]!==n.date?(M=n.date&&t.jsx("p",{className:"text-sm text-red-500",children:n.date}),e[68]=n.date,e[69]=M):M=e[69];let R;e[70]!==B||e[71]!==M?(R=t.jsxs("div",{className:"grid gap-2",children:[pe,B,M]}),e[70]=B,e[71]=M,e[72]=R):R=e[72];let $;e[73]!==O||e[74]!==R?($=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[O,R]}),e[73]=O,e[74]=R,e[75]=$):$=e[75];let he;e[76]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(C,{htmlFor:"company",children:"Compañía"}),e[76]=he):he=e[76];let G;e[77]!==s?(G=i=>s("company",i),e[77]=s,e[78]=G):G=e[78];let H;e[79]!==a.company||e[80]!==G?(H=t.jsxs("div",{className:"grid gap-2",children:[he,t.jsx(rt,{value:a.company,onChange:G})]}),e[79]=a.company,e[80]=G,e[81]=H):H=e[81];let Q;e[82]!==P||e[83]!==$||e[84]!==H?(Q=t.jsxs("div",{className:"grid gap-4 rounded-xl border bg-card p-6 shadow-sm",children:[P,$,H]}),e[82]=P,e[83]=$,e[84]=H,e[85]=Q):Q=e[85];let ue;e[86]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("h3",{className:"text-lg font-semibold",children:"Materiales"}),e[86]=ue):ue=e[86];let xe;e[87]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(tt,{className:"mr-2 size-4"}),e[87]=xe):xe=e[87];let V;e[88]!==ye?(V=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[ue,t.jsxs(ae,{type:"button",variant:"outline",size:"sm",onClick:ye,children:[xe," Agregar Item"]})]}),e[88]=ye,e[89]=V):V=e[89];let U;if(e[90]!==a.items||e[91]!==r||e[92]!==ee||e[93]!==te){let i;e[95]!==a.items.length||e[96]!==r||e[97]!==ee||e[98]!==te?(i=(h,_e)=>t.jsx(lt,{item:h,index:_e,materials:r,updateItem:te,removeItem:ee,isSingle:a.items.length===1},_e),e[95]=a.items.length,e[96]=r,e[97]=ee,e[98]=te,e[99]=i):i=e[99],U=a.items.map(i),e[90]=a.items,e[91]=r,e[92]=ee,e[93]=te,e[94]=U}else U=e[94];let J;e[100]!==U?(J=t.jsx("div",{className:"space-y-4",children:U}),e[100]=U,e[101]=J):J=e[101];let K;e[102]!==n.items?(K=n.items&&t.jsx("p",{className:"mt-2 text-sm text-red-500",children:n.items}),e[102]=n.items,e[103]=K):K=e[103];let W;e[104]!==V||e[105]!==J||e[106]!==K?(W=t.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[V,J,K]}),e[104]=V,e[105]=J,e[106]=K,e[107]=W):W=e[107];let ge;e[108]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(C,{htmlFor:"observations",children:"Observaciones"}),e[108]=ge):ge=e[108];let X;e[109]!==s?(X=i=>s("observations",i.target.value),e[109]=s,e[110]=X):X=e[110];let Y;e[111]!==a.observations||e[112]!==X?(Y=t.jsxs("div",{className:"grid gap-2 rounded-xl border bg-card p-6 shadow-sm",children:[ge,t.jsx("textarea",{id:"observations",value:a.observations,onChange:X,className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50"})]}),e[111]=a.observations,e[112]=X,e[113]=Y):Y=e[113];let be;e[114]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(De,{href:"/deliveries",children:t.jsx(ae,{type:"button",variant:"outline",children:"Cancelar"})}),e[114]=be):be=e[114];let je;e[115]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(at,{className:"size-4"}),e[115]=je):je=e[115];let Z;e[116]!==g?(Z=t.jsxs("div",{className:"flex justify-end gap-4",children:[be,t.jsxs(ae,{type:"submit",disabled:g,className:"gap-2",children:[je," Guardar Acta"]})]}),e[116]=g,e[117]=Z):Z=e[117];let ve;return e[118]!==Ce||e[119]!==Q||e[120]!==W||e[121]!==Y||e[122]!==Z?(ve=t.jsxs(Ze,{breadcrumbs:ne,children:[re,t.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-6 p-4",children:[oe,t.jsxs("form",{onSubmit:Ce,className:"flex flex-col gap-6",children:[Q,W,Y,Z]})]})]}),e[118]=Ce,e[119]=Q,e[120]=W,e[121]=Y,e[122]=Z,e[123]=ve):ve=e[123],ve}function it(_){return _.currentTarget.showPicker()}function lt(_){const e=Ae.c(26),{item:l,index:r,materials:y,updateItem:f,removeItem:p,isSingle:c}=_;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(C,{children:"Material"}),e[0]=m):m=e[0];const d=l.material_id?parseInt(l.material_id):void 0;let o;e[1]!==r||e[2]!==f?(o=v=>f(r,"material_id",v.toString()),e[1]=r,e[2]=f,e[3]=o):o=e[3];let a;e[4]!==y||e[5]!==d||e[6]!==o?(a=t.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[m,t.jsx(Qe,{materials:y,value:d,onChange:o,placeholder:"Seleccione material (Nombre, Cód, o S/N)..."})]}),e[4]=y,e[5]=d,e[6]=o,e[7]=a):a=e[7];let s;e[8]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(C,{children:"Cantidad"}),e[8]=s):s=e[8];let x;e[9]!==r||e[10]!==f?(x=v=>f(r,"quantity",parseInt(v.target.value)),e[9]=r,e[10]=f,e[11]=x):x=e[11];let g;e[12]!==l.quantity||e[13]!==x?(g=t.jsxs("div",{className:"grid w-32 gap-2",children:[s,t.jsx(ke,{type:"number",min:"1",value:l.quantity,onChange:x,required:!0})]}),e[12]=l.quantity,e[13]=x,e[14]=g):g=e[14];let n;e[15]!==r||e[16]!==p?(n=()=>p(r),e[15]=r,e[16]=p,e[17]=n):n=e[17];let u;e[18]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(st,{className:"size-4"}),e[18]=u):u=e[18];let j;e[19]!==c||e[20]!==n?(j=t.jsx(ae,{type:"button",variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-50 hover:text-red-600",onClick:n,disabled:c,children:u}),e[19]=c,e[20]=n,e[21]=j):j=e[21];let S;return e[22]!==j||e[23]!==a||e[24]!==g?(S=t.jsxs("div",{className:"flex items-end gap-4 border-b pb-4 last:border-0 last:pb-0",children:[a,g,j]}),e[22]=j,e[23]=a,e[24]=g,e[25]=S):S=e[25],S}function rt(_){const e=Ae.c(7),{value:l,onChange:r}=_,{auth:y}=Ee().props,f=y.user;if(!(f.role==="admin"||f.role==="capitan"||f.company==="Comandancia")){let o;return e[0]!==l?(o=t.jsx(ke,{value:l,disabled:!0,className:"bg-muted text-muted-foreground opacity-100"}),e[0]=l,e[1]=o):o=e[1],o}let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(Ue,{className:"w-full",children:t.jsx(Je,{placeholder:"Seleccione Compañía"})}),e[2]=c):c=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs(Ke,{children:[t.jsx(b,{value:"Primera Compañía",children:"Primera Compañía"}),t.jsx(b,{value:"Segunda Compañía",children:"Segunda Compañía"}),t.jsx(b,{value:"Tercera Compañía",children:"Tercera Compañía"}),t.jsx(b,{value:"Cuarta Compañía",children:"Cuarta Compañía"}),t.jsx(b,{value:"Quinta Compañía",children:"Quinta Compañía"}),t.jsx(b,{value:"Séptima Compañía",children:"Séptima Compañía"}),t.jsx(b,{value:"Octava Compañía",children:"Octava Compañía"}),t.jsx(b,{value:"Novena Compañía",children:"Novena Compañía"}),t.jsx(b,{value:"Décima Compañía",children:"Décima Compañía"}),t.jsx(b,{value:"Comandancia",children:"Comandancia"})]}),e[3]=m):m=e[3];let d;return e[4]!==r||e[5]!==l?(d=t.jsxs(We,{value:l,onValueChange:r,children:[c,m]}),e[4]=r,e[5]=l,e[6]=d):d=e[6],d}export{wt as default};
