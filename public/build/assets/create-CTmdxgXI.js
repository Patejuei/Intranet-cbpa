import{r as p,j as s,c as H,u as ve,H as je}from"./app-Dhlq3v3a.js";import{a as be,u as z,c as Q,B as X}from"./button--SIjxSqf.js";import{b as Y,c as J,C as Re,a as ye}from"./card-uCocbDWG.js";import{I as ge}from"./input-C2cgvfh9.js";import{L as V}from"./label-BxQUr8Yu.js";import{b as Ne,c as Z,a as U,d as _e,P as Ce}from"./index-D5mPDqLq.js";import{P as M}from"./index-DMfEEM0r.js";import{x as ee,u as we,y as Se,I as ke,A as Ie}from"./app-layout-MERPYfxX.js";import{u as Pe}from"./index-BHpkncZK.js";import{a as Ee,b as Ge,c as Ae,S as De,d as Fe}from"./select-fmhIgkuk.js";/* empty css            */import"./index-C4J_hXM0.js";import"./shield-BQi5oA7D.js";import"./chevron-down-DuM3--91.js";import"./check-DPwBeW2V.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Le=be("Circle",Oe);var W="Radio",[Ve,te]=Z(W),[$e,Me]=Ve(W),se=p.forwardRef((i,e)=>{const{__scopeRadio:t,name:a,checked:r=!1,required:o,disabled:l,value:n="on",onCheck:c,form:u,...h}=i,[f,x]=p.useState(null),d=z(e,b=>x(b)),m=p.useRef(!1),j=f?u||!!f.closest("form"):!0;return s.jsxs($e,{scope:t,checked:r,disabled:l,children:[s.jsx(M.button,{type:"button",role:"radio","aria-checked":r,"data-state":ie(r),"data-disabled":l?"":void 0,disabled:l,value:n,...h,ref:d,onClick:U(i.onClick,b=>{r||c?.(),j&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),j&&s.jsx(ae,{control:f,bubbles:!m.current,name:a,value:n,checked:r,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});se.displayName=W;var re="RadioIndicator",oe=p.forwardRef((i,e)=>{const{__scopeRadio:t,forceMount:a,...r}=i,o=Me(re,t);return s.jsx(Ce,{present:a||o.checked,children:s.jsx(M.span,{"data-state":ie(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e})})});oe.displayName=re;var Be="RadioBubbleInput",ae=p.forwardRef(({__scopeRadio:i,control:e,checked:t,bubbles:a=!0,...r},o)=>{const l=p.useRef(null),n=z(l,o),c=Pe(t),u=_e(e);return p.useEffect(()=>{const h=l.current;if(!h)return;const f=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==t&&d){const m=new Event("click",{bubbles:a});d.call(h,t),h.dispatchEvent(m)}},[c,t,a]),s.jsx(M.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:n,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ae.displayName=Be;function ie(i){return i?"checked":"unchecked"}var Te=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],B="RadioGroup",[qe,pt]=Z(B,[ee,te]),le=ee(),ce=te(),[Ke,Ue]=qe(B),ne=p.forwardRef((i,e)=>{const{__scopeRadioGroup:t,name:a,defaultValue:r,value:o,required:l=!1,disabled:n=!1,orientation:c,dir:u,loop:h=!0,onValueChange:f,...x}=i,d=le(t),m=we(u),[j,b]=Ne({prop:o,defaultProp:r??null,onChange:f,caller:B});return s.jsx(Ke,{scope:t,name:a,required:l,disabled:n,value:j,onValueChange:b,children:s.jsx(Se,{asChild:!0,...d,orientation:c,dir:m,loop:h,children:s.jsx(M.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":n?"":void 0,dir:m,...x,ref:e})})})});ne.displayName=B;var de="RadioGroupItem",ue=p.forwardRef((i,e)=>{const{__scopeRadioGroup:t,disabled:a,...r}=i,o=Ue(de,t),l=o.disabled||a,n=le(t),c=ce(t),u=p.useRef(null),h=z(e,u),f=o.value===r.value,x=p.useRef(!1);return p.useEffect(()=>{const d=j=>{Te.includes(j.key)&&(x.current=!0)},m=()=>x.current=!1;return document.addEventListener("keydown",d),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",m)}},[]),s.jsx(ke,{asChild:!0,...n,focusable:!l,active:f,children:s.jsx(se,{disabled:l,required:o.required,checked:f,...c,...r,name:o.name,ref:h,onCheck:()=>o.onValueChange(r.value),onKeyDown:U(d=>{d.key==="Enter"&&d.preventDefault()}),onFocus:U(r.onFocus,()=>{x.current&&u.current?.click()})})})});ue.displayName=de;var He="RadioGroupIndicator",me=p.forwardRef((i,e)=>{const{__scopeRadioGroup:t,...a}=i,r=ce(t);return s.jsx(oe,{...r,...a,ref:e})});me.displayName=He;var pe=ne,fe=ue,ze=me;const he=p.forwardRef((i,e)=>{const t=H.c(9);let a,r;t[0]!==i?({className:a,...r}=i,t[0]=i,t[1]=a,t[2]=r):(a=t[1],r=t[2]);let o;t[3]!==a?(o=Q("grid gap-2",a),t[3]=a,t[4]=o):o=t[4];let l;return t[5]!==r||t[6]!==e||t[7]!==o?(l=s.jsx(pe,{className:o,...r,ref:e}),t[5]=r,t[6]=e,t[7]=o,t[8]=l):l=t[8],l});he.displayName=pe.displayName;const $=p.forwardRef((i,e)=>{const t=H.c(10);let a,r;t[0]!==i?({className:a,...r}=i,t[0]=i,t[1]=a,t[2]=r):(a=t[1],r=t[2]);let o;t[3]!==a?(o=Q("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),t[3]=a,t[4]=o):o=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(ze,{className:"flex items-center justify-center",children:s.jsx(Le,{className:"h-2.5 w-2.5 fill-current text-current"})}),t[5]=l):l=t[5];let n;return t[6]!==r||t[7]!==e||t[8]!==o?(n=s.jsx(fe,{ref:e,className:o,...r,children:l}),t[6]=r,t[7]=e,t[8]=o,t[9]=n):n=t[9],n});$.displayName=fe.displayName;const We=[{title:"Vehículos",href:"/vehicles/status"},{title:"Nuevo Checklist",href:"/vehicles/checklists/create"}];function ft(i){const e=H.c(44),{vehicles:t,items:a}=i;let r,o,l;if(e[0]!==a){const R=Object.values(a).flat();l=ve,r="",o=R.map(Je),e[0]=a,e[1]=r,e[2]=o,e[3]=l}else r=e[1],o=e[2],l=e[3];let n;e[4]!==r||e[5]!==o?(n={vehicle_id:r,details:o},e[4]=r,e[5]=o,e[6]=n):n=e[6];const{data:c,setData:u,post:h,processing:f,errors:x}=l(n);let d;e[7]!==c.details||e[8]!==u?(d=(R,L,T)=>{const v=[...c.details];v[R]={...v[R],[L]:T},u("details",v)},e[7]=c.details,e[8]=u,e[9]=d):d=e[9];const m=d;let j;e[10]!==h?(j=R=>{R.preventDefault(),h("/vehicles/checklists")},e[10]=h,e[11]=j):j=e[11];const b=j;let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(je,{title:"Nuevo Checklist Preventivo"}),e[12]=P):P=e[12];let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Checklist Preventivo"}),s.jsx("p",{className:"text-muted-foreground",children:"Complete el formulario para registrar el estado del vehículo."})]})}),e[13]=E):E=e[13];let G;e[14]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(Re,{children:s.jsx(ye,{children:"Selección de Vehículo"})}),e[14]=G):G=e[14];let A;e[15]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(V,{htmlFor:"vehicle_id",children:"Vehículo"}),e[15]=A):A=e[15];let y;e[16]!==u?(y=R=>u("vehicle_id",R),e[16]=u,e[17]=y):y=e[17];const xe=c.vehicle_id;let D;e[18]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(Ee,{children:s.jsx(Ge,{placeholder:"Seleccione un vehículo"})}),e[18]=D):D=e[18];let g;e[19]!==t?(g=t.map(Ye),e[19]=t,e[20]=g):g=e[20];let N;e[21]!==g?(N=s.jsx(Ae,{children:g}),e[21]=g,e[22]=N):N=e[22];let _;e[23]!==c.vehicle_id||e[24]!==y||e[25]!==N?(_=s.jsxs(De,{onValueChange:y,value:xe,children:[D,N]}),e[23]=c.vehicle_id,e[24]=y,e[25]=N,e[26]=_):_=e[26];let C;e[27]!==x.vehicle_id?(C=x.vehicle_id&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:x.vehicle_id}),e[27]=x.vehicle_id,e[28]=C):C=e[28];let w;e[29]!==_||e[30]!==C?(w=s.jsxs(Y,{children:[G,s.jsx(J,{children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.jsxs("div",{className:"space-y-2",children:[A,_,C]})})})]}),e[29]=_,e[30]=C,e[31]=w):w=e[31];let S;e[32]!==c.details||e[33]!==a||e[34]!==m?(S=Object.entries(a).map(R=>{const[L,T]=R;return s.jsxs(Y,{className:"overflow-hidden",children:[s.jsx("div",{className:"border-b bg-muted/50 px-6 py-4",children:s.jsx("h3",{className:"text-lg font-bold",children:L})}),s.jsx(J,{className:"p-0",children:s.jsx("div",{className:"divide-y",children:T.map(v=>{const q=c.details.findIndex(I=>I.item_id===v.id),K=c.details[q];return K?s.jsxs("div",{className:"grid gap-4 p-4 md:grid-cols-[1fr_auto_1fr] md:p-6",children:[s.jsx("div",{className:"flex items-center font-medium",children:v.name}),s.jsx("div",{className:"flex items-start justify-center",children:s.jsxs(he,{value:K.status,onValueChange:I=>m(q,"status",I),className:"flex gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($,{value:"ok",id:`ok-${v.id}`,className:"border-green-600 text-green-600"}),s.jsx(V,{htmlFor:`ok-${v.id}`,className:"cursor-pointer font-bold text-green-700",children:"OK"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($,{value:"next_maint",id:`nm-${v.id}`,className:"border-yellow-600 text-yellow-600"}),s.jsx(V,{htmlFor:`nm-${v.id}`,className:"cursor-pointer font-bold text-yellow-700",children:"Próx. Mant."})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($,{value:"urgent",id:`urg-${v.id}`,className:"border-red-600 text-red-600"}),s.jsx(V,{htmlFor:`urg-${v.id}`,className:"cursor-pointer font-bold text-red-700",children:"Urgente"})]})]})}),s.jsx("div",{className:"flex items-center",children:s.jsx(ge,{placeholder:"Observaciones (opcional)",value:K.notes,onChange:I=>m(q,"notes",I.target.value),className:"h-9"})})]},v.id):null})})})]},L)}),e[32]=c.details,e[33]=a,e[34]=m,e[35]=S):S=e[35];let F;e[36]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(X,{variant:"outline",type:"button",onClick:Xe,children:"Cancelar"}),e[36]=F):F=e[36];let k;e[37]!==f?(k=s.jsxs("div",{className:"flex justify-end gap-4 pb-8",children:[F,s.jsx(X,{type:"submit",disabled:f,size:"lg",className:"w-full md:w-auto",children:"Registrar Checklist"})]}),e[37]=f,e[38]=k):k=e[38];let O;return e[39]!==b||e[40]!==w||e[41]!==S||e[42]!==k?(O=s.jsxs(Ie,{breadcrumbs:We,children:[P,s.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[E,s.jsxs("form",{onSubmit:b,className:"space-y-8",children:[w,S,k]})]})]}),e[39]=b,e[40]=w,e[41]=S,e[42]=k,e[43]=O):O=e[43],O}function Xe(){return window.history.back()}function Ye(i){return s.jsxs(Fe,{value:i.id.toString(),children:[i.name," (",i.plate,") -"," ",i.company]},i.id)}function Je(i){return{item_id:i.id,status:"ok",notes:""}}export{ft as default};
