import{c as se,b as te,j as s,L as J,H as ae}from"./app-CT7bnRJf.js";import{B as X}from"./badge-BW8djDdk.js";import{a as le,B as K,f as P}from"./button-C2tZZxJa.js";import{b as L,C as M,a as T,c as A}from"./card-8wGN_gYN.js";import{W as G,A as re}from"./app-layout-DZuOocv5.js";import{C as Y}from"./circle-check-35mOu3is.js";import{C as ie}from"./circle-alert-DpjTo8-q.js";import{C as Q}from"./calendar-i1DWCAAt.js";import{A as ce}from"./arrow-left-BzefbkeM.js";/* empty css            */import"./index-psSA1t21.js";import"./index-B_ugykvu.js";import"./index-C4J_hXM0.js";import"./shield-DRzuHyK1.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],de=le("DollarSign",ne);function Ee(a){const e=se.c(76),{vehicle:t,totalMaintenanceCost:z}=a,r=te().props,i=t.issues?.[0],l=t.maintenances?.[0],Z=he;let I;e[0]===Symbol.for("react.memo_cache_sentinel")?(I={title:"Material Mayor",href:"/vehicles/status"},e[0]=I):I=e[0];const R=`/vehicles/status/${t.id}`;let c;e[1]!==R||e[2]!==t.name?(c=[I,{title:t.name,href:R}],e[1]=R,e[2]=t.name,e[3]=c):c=e[3];const q=`Detalle ${t.name}`;let n;e[4]!==q?(n=s.jsx(ae,{title:q}),e[4]=q,e[5]=n):n=e[5];let O;e[6]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(K,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(J,{href:"/vehicles/status",children:s.jsx(ce,{className:"h-5 w-5"})})}),e[6]=O):O=e[6];const ee=t.name,U=Z(t.status),V=t.status==="Operative"?"En Servicio":t.status==="Workshop"?"En Taller":"Fuera de Servicio";let d;e[7]!==U||e[8]!==V?(d=s.jsx(X,{className:U,children:V}),e[7]=U,e[8]=V,e[9]=d):d=e[9];let o;e[10]!==d||e[11]!==t.name?(o=s.jsxs("h1",{className:"flex items-center gap-3 text-2xl font-bold",children:[ee,d]}),e[10]=d,e[11]=t.name,e[12]=o):o=e[12];let m;e[13]!==t.company||e[14]!==t.make||e[15]!==t.model?(m=s.jsxs("p",{className:"text-muted-foreground",children:[t.company," - ",t.make," ",t.model]}),e[13]=t.company,e[14]=t.make,e[15]=t.model,e[16]=m):m=e[16];let x;e[17]!==o||e[18]!==m?(x=s.jsxs("div",{className:"flex items-center gap-4",children:[O,s.jsxs("div",{children:[o,m]})]}),e[17]=o,e[18]=m,e[19]=x):x=e[19];let h;e[20]!==r.auth||e[21]!==t.id?(h=r.auth?.user&&(r.auth.user.role==="admin"||r.auth.user.role==="capitan")&&s.jsx(K,{asChild:!0,children:s.jsxs(J,{href:`/vehicles/${t.id}/edit`,children:[s.jsx(G,{className:"mr-2 h-4 w-4"}),"Editar Unidad"]})}),e[20]=r.auth,e[21]=t.id,e[22]=h):h=e[22];let p;e[23]!==x||e[24]!==h?(p=s.jsxs("div",{className:"flex items-center justify-between",children:[x,h]}),e[23]=x,e[24]=h,e[25]=p):p=e[25];let $;e[26]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(M,{children:s.jsx(T,{children:"Información del Vehículo"})}),e[26]=$):$=e[26];let H;e[27]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Patente"}),e[27]=H):H=e[27];let u;e[28]!==t.plate?(u=s.jsxs("div",{children:[H,s.jsx("p",{className:"text-lg font-semibold",children:t.plate})]}),e[28]=t.plate,e[29]=u):u=e[29];let W;e[30]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Año"}),e[30]=W):W=e[30];let f;e[31]!==t.year?(f=s.jsxs("div",{children:[W,s.jsx("p",{className:"text-lg font-semibold",children:t.year})]}),e[31]=t.year,e[32]=f):f=e[32];let B;e[33]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Marca"}),e[33]=B):B=e[33];let j;e[34]!==t.make?(j=s.jsxs("div",{children:[B,s.jsx("p",{className:"text-lg font-semibold",children:t.make})]}),e[34]=t.make,e[35]=j):j=e[35];let D;e[36]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Modelo"}),e[36]=D):D=e[36];let N;e[37]!==t.model?(N=s.jsxs("div",{children:[D,s.jsx("p",{className:"text-lg font-semibold",children:t.model})]}),e[37]=t.model,e[38]=N):N=e[38];let g;e[39]!==u||e[40]!==f||e[41]!==j||e[42]!==N?(g=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u,f,j,N]}),e[39]=u,e[40]=f,e[41]=j,e[42]=N,e[43]=g):g=e[43];let b;e[44]!==r.auth||e[45]!==z?(b=r.auth?.user&&(r.auth.user.company==="Comandancia"||r.auth.user.role==="admin")&&s.jsxs("div",{className:"mt-4 rounded-md bg-blue-50 p-4",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2 text-blue-800",children:[s.jsx(de,{className:"h-5 w-5"}),s.jsx("span",{className:"font-bold",children:"Inversión Total en Mantenimiento"})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["$",(z||0).toLocaleString("es-CL")]}),s.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Suma histórica de todas los trabajos realizados."})]}),e[44]=r.auth,e[45]=z,e[46]=b):b=e[46];let y;e[47]!==g||e[48]!==b?(y=s.jsxs(L,{className:"md:col-span-2",children:[$,s.jsxs(A,{className:"space-y-4",children:[g,b]})]}),e[47]=g,e[48]=b,e[49]=y):y=e[49];let v;e[50]!==t.status?(v=t.status==="Operative"&&s.jsxs(L,{className:"border-green-200 bg-green-50",children:[s.jsx(M,{className:"pb-2",children:s.jsxs(T,{className:"flex items-center gap-2 text-green-800",children:[s.jsx(Y,{className:"h-5 w-5"}),"Unidad Operativa"]})}),s.jsx(A,{children:s.jsx("p",{className:"text-sm text-green-700",children:"La unidad se encuentra operativa y disponible para el servicio."})})]}),e[50]=t.status,e[51]=v):v=e[51];let w;e[52]!==i||e[53]!==t.status?(w=t.status==="Out of Service"&&i&&s.jsxs(L,{className:"border-red-200 bg-red-50",children:[s.jsx(M,{className:"pb-2",children:s.jsxs(T,{className:"flex items-center gap-2 text-red-800",children:[s.jsx(ie,{className:"h-5 w-5"}),"Fuera de Servicio"]})}),s.jsxs(A,{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-red-900",children:"Motivo:"}),s.jsx("p",{className:"text-sm text-red-800",children:i.description}),s.jsxs("div",{className:"mt-2 flex gap-2 text-xs text-red-700",children:[s.jsx(Q,{className:"h-3 w-3"})," ",i.date?P(i.date):P(i.created_at)]})]})]}),e[52]=i,e[53]=t.status,e[54]=w):w=e[54];let _;e[55]!==i||e[56]!==l||e[57]!==t.status?(_=(t.status==="Workshop"||t.status==="Out of Service"&&!i&&l)&&(l?s.jsxs(L,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(M,{className:"pb-2",children:s.jsxs(T,{className:"flex items-center gap-2 text-yellow-800",children:[s.jsx(G,{className:"h-5 w-5"}),"En Taller (",l.status==="Scheduled"?"Agendado":"En Proceso",")"]})}),s.jsxs(A,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:l.workshop_name}),s.jsx("p",{className:"text-sm text-yellow-800",children:l.description}),s.jsxs("div",{className:"mt-1 flex gap-2 text-xs text-yellow-700",children:[s.jsx(Q,{className:"h-3 w-3"})," ","Ingreso:"," ",P(l.entry_date)]})]}),l.tasks&&l.tasks.length>0&&s.jsxs("div",{className:"rounded-md bg-white/50 p-3",children:[s.jsx("h4",{className:"mb-2 text-xs font-bold tracking-wider text-yellow-900 uppercase",children:"Tareas"}),s.jsx("div",{className:"space-y-2",children:l.tasks.map(xe)})]}),l.issues&&l.issues.length>0&&s.jsxs("div",{className:"rounded-md bg-white/50 p-3",children:[s.jsx("h4",{className:"mb-2 text-xs font-bold tracking-wider text-yellow-900 uppercase",children:"Incidencias Asociadas"}),s.jsx("ul",{className:"list-disc pl-4 text-sm text-slate-700",children:l.issues.map(me)})]})]})]}):s.jsxs(L,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(M,{className:"pb-2",children:s.jsxs(T,{className:"flex items-center gap-2 text-yellow-800",children:[s.jsx(G,{className:"h-5 w-5"}),"En Taller"]})}),s.jsx(A,{children:s.jsx("p",{className:"text-sm text-yellow-800",children:"No hay información detallada de la orden de trabajo."})})]})),e[55]=i,e[56]=l,e[57]=t.status,e[58]=_):_=e[58];let S;e[59]!==v||e[60]!==w||e[61]!==_?(S=s.jsxs("div",{className:"space-y-6",children:[v,w,_]}),e[59]=v,e[60]=w,e[61]=_,e[62]=S):S=e[62];let C;e[63]!==y||e[64]!==S?(C=s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[y,S]}),e[63]=y,e[64]=S,e[65]=C):C=e[65];let k;e[66]!==t.maintenances?(k=t.maintenances&&t.maintenances.length>0&&s.jsxs(L,{children:[s.jsx(M,{children:s.jsx(T,{children:"Historial de Órdenes de Trabajo"})}),s.jsx(A,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"border-b bg-muted/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 py-3 font-medium",children:"Fecha Ingreso"}),s.jsx("th",{className:"p-2 py-3 font-medium",children:"Taller"}),s.jsx("th",{className:"p-2 py-3 font-medium",children:"Trabajo"}),s.jsx("th",{className:"p-2 py-3 font-medium",children:"Estado"}),s.jsx("th",{className:"p-2 py-3 text-right font-medium",children:"Costo"})]})}),s.jsx("tbody",{children:t.maintenances.map(oe)})]})})})]}),e[66]=t.maintenances,e[67]=k):k=e[67];let E;e[68]!==p||e[69]!==C||e[70]!==k?(E=s.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-6 p-4",children:[p,C,k]}),e[68]=p,e[69]=C,e[70]=k,e[71]=E):E=e[71];let F;return e[72]!==c||e[73]!==E||e[74]!==n?(F=s.jsxs(re,{breadcrumbs:c,children:[n,E]}),e[72]=c,e[73]=E,e[74]=n,e[75]=F):F=e[75],F}function oe(a){return s.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/20",children:[s.jsx("td",{className:"p-2 py-3",children:P(a.entry_date)}),s.jsx("td",{className:"p-2 py-3",children:a.workshop_name}),s.jsx("td",{className:"p-2 py-3",children:a.description}),s.jsx("td",{className:"p-2 py-3",children:s.jsx(X,{variant:"outline",className:["Finalizado","Entregado"].includes(a.status)?"border-green-200 bg-green-50 text-green-700":"border-yellow-200 bg-yellow-50 text-yellow-700",children:a.status})}),s.jsx("td",{className:"p-2 py-3 text-right",children:a.cost>0?`$${a.cost.toLocaleString("es-CL")}`:"-"})]},a.id)}function me(a){return s.jsxs("li",{children:[a.description,a.status==="Resolved"&&s.jsx("span",{className:"ml-2 text-xs font-bold text-green-600",children:"(Solucionado)"})]},a.id)}function xe(a){return s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.is_completed?s.jsx(Y,{className:"mt-0.5 h-4 w-4 text-green-600"}):s.jsx("div",{className:"mt-0.5 h-4 w-4 rounded-full border-2 border-slate-300"}),s.jsx("span",{className:a.is_completed?"text-slate-700 line-through opacity-70":"font-medium text-slate-800",children:a.description})]},a.id)}function he(a){switch(a){case"Operative":return"bg-green-100 text-green-800";case"Workshop":return"bg-yellow-100 text-yellow-800";case"Out of Service":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}export{Ee as default};
