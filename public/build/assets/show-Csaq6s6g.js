import{c as Pe,r as Be,u as Ve,j as t,H as Ge,L as He}from"./app-Y3wPkO7k.js";import{B as we}from"./badge-A8f5rW1Z.js";import{a as Ue,B as Y}from"./button-IaI-p2sT.js";import{C as ze,a as Oe,b as Te,c as $e,d as Ye}from"./card-DrCK2JXg.js";import{e as Je,b as Ke,D as Qe,a as We,f as Xe,c as Ze,d as et}from"./dialog-BQ3iqOif.js";import{I as G}from"./input-Ci3WR__e.js";import{L as U}from"./label-CIN9rteu.js";import{F as tt,c as st,A as lt}from"./app-layout-LB7JlbCh.js";import{A as at}from"./arrow-left-CbI2k3uL.js";import{H as it}from"./history-DbXwPO-l.js";/* empty css            */import"./index-DHyoASyW.js";import"./index-CxTk-NYF.js";import"./index-C4J_hXM0.js";import"./shield-YzFc6gme.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rt=Ue("SquarePen",nt);function St(l){const e=Pe.c(138),{material:s,history:J}=l,[be,Ne]=Be.useState(!1),ve=s.brand||"",Se=s.model||"",Ce=s.category||"",De=s.code||"";let K;e[0]!==s.company||e[1]!==s.product_name||e[2]!==s.stock_quantity||e[3]!==ve||e[4]!==Se||e[5]!==Ce||e[6]!==De?(K={product_name:s.product_name,brand:ve,model:Se,category:Ce,code:De,stock_quantity:s.stock_quantity,company:s.company},e[0]=s.company,e[1]=s.product_name,e[2]=s.stock_quantity,e[3]=ve,e[4]=Se,e[5]=Ce,e[6]=De,e[7]=K):K=e[7];const{data:a,setData:i,put:ke,processing:Ee,errors:Q}=Ve(K);let W;e[8]!==s.id||e[9]!==ke?(W=n=>{n.preventDefault(),ke(`/inventory/${s.id}`,{onSuccess:()=>Ne(!1)})},e[8]=s.id,e[9]=ke,e[10]=W):W=e[10];const qe=W;let X,Z;e[11]===Symbol.for("react.memo_cache_sentinel")?(X={title:"Panel Principal",href:"/dashboard"},Z={title:"Inventario",href:"/inventory"},e[11]=X,e[12]=Z):(X=e[11],Z=e[12]);const Me=`/inventory/${s.id}`;let r;e[13]!==s.product_name||e[14]!==Me?(r=[X,Z,{title:s.product_name,href:Me}],e[13]=s.product_name,e[14]=Me,e[15]=r):r=e[15];const Ie=`Detalle: ${s.product_name}`;let c;e[16]!==Ie?(c=t.jsx(Ge,{title:Ie}),e[16]=Ie,e[17]=c):c=e[17];let ee;e[18]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(He,{href:"/inventory",children:t.jsx(at,{className:"size-5"})})}),e[18]=ee):ee=e[18];let o;e[19]!==s.product_name?(o=t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.product_name}),e[19]=s.product_name,e[20]=o):o=e[20];let te;e[21]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("p",{className:"text-muted-foreground",children:"Detalles e Historial de Movimientos"}),e[21]=te):te=e[21];let d;e[22]!==o?(d=t.jsxs("div",{className:"flex items-center gap-4",children:[ee,t.jsxs("div",{children:[o,te]})]}),e[22]=o,e[23]=d):d=e[23];let se;e[24]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Je,{asChild:!0,children:t.jsxs(Y,{variant:"outline",className:"gap-2",children:[t.jsx(rt,{className:"size-4"})," Editar"]})}),e[24]=se):se=e[24];let le;e[25]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs(Ke,{children:[t.jsx(Qe,{children:"Editar Material"}),t.jsx(We,{children:"Modificar detalles del material o ajustar stock manualmente."})]}),e[25]=le):le=e[25];let ae;e[26]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(U,{htmlFor:"name",children:"Nombre"}),e[26]=ae):ae=e[26];let m;e[27]!==i?(m=n=>i("product_name",n.target.value),e[27]=i,e[28]=m):m=e[28];let h;e[29]!==a.product_name||e[30]!==m?(h=t.jsx(G,{id:"name",value:a.product_name,onChange:m,required:!0}),e[29]=a.product_name,e[30]=m,e[31]=h):h=e[31];let f;e[32]!==Q.product_name?(f=Q.product_name&&t.jsx("p",{className:"mt-1 text-xs text-red-500",children:Q.product_name}),e[32]=Q.product_name,e[33]=f):f=e[33];let x;e[34]!==h||e[35]!==f?(x=t.jsxs("div",{children:[ae,h,f]}),e[34]=h,e[35]=f,e[36]=x):x=e[36];let ie;e[37]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(U,{htmlFor:"brand",children:"Marca"}),e[37]=ie):ie=e[37];let u;e[38]!==i?(u=n=>i("brand",n.target.value),e[38]=i,e[39]=u):u=e[39];let p;e[40]!==a.brand||e[41]!==u?(p=t.jsxs("div",{children:[ie,t.jsx(G,{id:"brand",value:a.brand,onChange:u})]}),e[40]=a.brand,e[41]=u,e[42]=p):p=e[42];let ne;e[43]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(U,{htmlFor:"model",children:"Modelo"}),e[43]=ne):ne=e[43];let j;e[44]!==i?(j=n=>i("model",n.target.value),e[44]=i,e[45]=j):j=e[45];let g;e[46]!==a.model||e[47]!==j?(g=t.jsxs("div",{children:[ne,t.jsx(G,{id:"model",value:a.model,onChange:j})]}),e[46]=a.model,e[47]=j,e[48]=g):g=e[48];let _;e[49]!==p||e[50]!==g?(_=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p,g]}),e[49]=p,e[50]=g,e[51]=_):_=e[51];let re;e[52]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(U,{htmlFor:"category",children:"Categoría"}),e[52]=re):re=e[52];let y;e[53]!==i?(y=n=>i("category",n.target.value),e[53]=i,e[54]=y):y=e[54];let b;e[55]!==a.category||e[56]!==y?(b=t.jsxs("div",{children:[re,t.jsx(G,{id:"category",value:a.category,onChange:y})]}),e[55]=a.category,e[56]=y,e[57]=b):b=e[57];let ce;e[58]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(U,{htmlFor:"code",children:"Código/N°"}),e[58]=ce):ce=e[58];let N;e[59]!==i?(N=n=>i("code",n.target.value),e[59]=i,e[60]=N):N=e[60];let v;e[61]!==a.code||e[62]!==N?(v=t.jsxs("div",{children:[ce,t.jsx(G,{id:"code",value:a.code,onChange:N})]}),e[61]=a.code,e[62]=N,e[63]=v):v=e[63];let S;e[64]!==b||e[65]!==v?(S=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b,v]}),e[64]=b,e[65]=v,e[66]=S):S=e[66];let oe;e[67]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(U,{htmlFor:"stock",children:"Stock Actual"}),e[67]=oe):oe=e[67];let C;e[68]!==i?(C=n=>i("stock_quantity",parseInt(n.target.value)),e[68]=i,e[69]=C):C=e[69];let D;e[70]!==a.stock_quantity||e[71]!==C?(D=t.jsx(G,{id:"stock",type:"number",value:a.stock_quantity,onChange:C,required:!0}),e[70]=a.stock_quantity,e[71]=C,e[72]=D):D=e[72];let de;e[73]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Ajustar el stock aquí registrará un movimiento de edición."}),e[73]=de):de=e[73];let k;e[74]!==D?(k=t.jsxs("div",{children:[oe,D,de]}),e[74]=D,e[75]=k):k=e[75];let me;e[76]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Y,{type:"button",variant:"ghost",onClick:()=>Ne(!1),children:"Cancelar"}),e[76]=me):me=e[76];let E;e[77]!==Ee?(E=t.jsxs(Xe,{children:[me,t.jsx(Y,{type:"submit",disabled:Ee,children:"Guardar Cambios"})]}),e[77]=Ee,e[78]=E):E=e[78];let q;e[79]!==qe||e[80]!==x||e[81]!==_||e[82]!==S||e[83]!==k||e[84]!==E?(q=t.jsxs(Ze,{children:[le,t.jsxs("form",{onSubmit:qe,className:"space-y-4 py-4",children:[x,_,S,k,E]})]}),e[79]=qe,e[80]=x,e[81]=_,e[82]=S,e[83]=k,e[84]=E,e[85]=q):q=e[85];let M;e[86]!==be||e[87]!==q?(M=t.jsxs(et,{open:be,onOpenChange:Ne,children:[se,q]}),e[86]=be,e[87]=q,e[88]=M):M=e[88];let I;e[89]!==d||e[90]!==M?(I=t.jsxs("div",{className:"flex items-center justify-between",children:[d,M]}),e[89]=d,e[90]=M,e[91]=I):I=e[91];let he;e[92]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ze,{children:t.jsxs(Oe,{className:"flex items-center gap-2",children:[t.jsx(st,{className:"size-5 text-primary"}),"Información del Material"]})}),e[92]=he):he=e[92];let fe;e[93]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Categoría"}),e[93]=fe):fe=e[93];const Ae=s.category||"Sin Categoría";let A;e[94]!==Ae?(A=t.jsxs("div",{children:[fe,t.jsx("p",{className:"text-sm font-semibold",children:Ae})]}),e[94]=Ae,e[95]=A):A=e[95];let xe;e[96]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Marca"}),e[96]=xe):xe=e[96];const Re=s.brand||"-";let R;e[97]!==Re?(R=t.jsxs("div",{children:[xe,t.jsx("p",{className:"text-sm",children:Re})]}),e[97]=Re,e[98]=R):R=e[98];let ue;e[99]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Modelo"}),e[99]=ue):ue=e[99];const Fe=s.model||"-";let F;e[100]!==Fe?(F=t.jsxs("div",{children:[ue,t.jsx("p",{className:"text-sm",children:Fe})]}),e[100]=Fe,e[101]=F):F=e[101];let L;e[102]!==R||e[103]!==F?(L=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R,F]}),e[102]=R,e[103]=F,e[104]=L):L=e[104];let pe;e[105]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Código Interno"}),e[105]=pe):pe=e[105];let H;e[106]!==s.code?(H=s.code?t.jsx(we,{variant:"outline",className:"font-mono",children:s.code}):"-",e[106]=s.code,e[107]=H):H=e[107];let w;e[108]!==H?(w=t.jsxs("div",{children:[pe,t.jsx("div",{className:"mt-1",children:H})]}),e[108]=H,e[109]=w):w=e[109];let je;e[110]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Stock Actual"}),e[110]=je):je=e[110];const Le=s.stock_quantity>0?"bg-green-500":"bg-red-500";let z;e[111]!==s.stock_quantity||e[112]!==Le?(z=t.jsxs("div",{children:[je,t.jsx("div",{className:"mt-1",children:t.jsxs(we,{className:Le,children:[s.stock_quantity," unidades"]})})]}),e[111]=s.stock_quantity,e[112]=Le,e[113]=z):z=e[113];let O;e[114]!==s.document_path?(O=s.document_path&&t.jsx("div",{className:"border-t pt-4",children:t.jsx(Y,{variant:"outline",className:"w-full gap-2",asChild:!0,children:t.jsxs("a",{href:`/storage/${s.document_path}`,target:"_blank",rel:"noopener noreferrer",children:[t.jsx(tt,{className:"size-4"}),"Ver Documento General"]})})}),e[114]=s.document_path,e[115]=O):O=e[115];let T;e[116]!==A||e[117]!==L||e[118]!==w||e[119]!==z||e[120]!==O?(T=t.jsxs(Te,{className:"h-fit md:col-span-1",children:[he,t.jsxs($e,{className:"space-y-4",children:[A,L,w,z,O]})]}),e[116]=A,e[117]=L,e[118]=w,e[119]=z,e[120]=O,e[121]=T):T=e[121];let ge;e[122]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs(ze,{children:[t.jsxs(Oe,{className:"flex items-center gap-2",children:[t.jsx(it,{className:"size-5 text-primary"}),"Historial de Movimientos Unificado"]}),t.jsx(Ye,{children:"Registro completo de Entregas, Recepciones y Ajustes"})]}),e[122]=ge):ge=e[122];let _e;e[123]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("thead",{className:"bg-muted text-muted-foreground",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 font-medium",children:"Fecha"}),t.jsx("th",{className:"p-3 font-medium",children:"Tipo"}),t.jsx("th",{className:"p-3 font-medium",children:"Cambio"}),t.jsx("th",{className:"p-3 font-medium",children:"Descripción"}),t.jsx("th",{className:"p-3 font-medium",children:"Usuario"}),t.jsx("th",{className:"p-3 font-medium",children:"Ref"})]})}),e[123]=_e):_e=e[123];let $;e[124]!==J?($=J.length>0?J.map(ct):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No hay historial unificado disponible."})}),e[124]=J,e[125]=$):$=e[125];let P;e[126]!==$?(P=t.jsxs(Te,{className:"md:col-span-2",children:[ge,t.jsx($e,{children:t.jsx("div",{className:"rounded-md border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[_e,t.jsx("tbody",{className:"divide-y",children:$})]})})})})]}),e[126]=$,e[127]=P):P=e[127];let B;e[128]!==T||e[129]!==P?(B=t.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[T,P]}),e[128]=T,e[129]=P,e[130]=B):B=e[130];let V;e[131]!==I||e[132]!==B?(V=t.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[I,B]}),e[131]=I,e[132]=B,e[133]=V):V=e[133];let ye;return e[134]!==r||e[135]!==c||e[136]!==V?(ye=t.jsxs(lt,{breadcrumbs:r,children:[c,V]}),e[134]=r,e[135]=c,e[136]=V,e[137]=ye):ye=e[137],ye}function ct(l){return t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"p-3",children:new Date(l.created_at).toLocaleString()}),t.jsx("td",{className:"p-3",children:t.jsx(we,{variant:l.type==="DELIVERY"||l.type==="RECEPTION"?"outline":l.type==="ADD"?"secondary":l.type==="REMOVE"?"destructive":"default",className:l.type==="DELIVERY"?"bg-blue-50 text-blue-700":l.type==="RECEPTION"?"bg-green-50 text-green-700":l.type==="ADD"?"bg-green-100 text-green-700":l.type==="REMOVE"?"bg-red-100 text-red-700":"",children:l.type})}),t.jsx("td",{className:"p-3 font-medium",children:t.jsxs("span",{className:l.quantity_change>0?"text-green-600":"text-red-600",children:[l.quantity_change>0?"+":"",l.quantity_change]})}),t.jsx("td",{className:"max-w-[200px] truncate p-3",title:l.description,children:l.description}),t.jsx("td",{className:"p-3 text-muted-foreground",children:l.user?.name||"-"}),t.jsxs("td",{className:"p-3",children:[l.reference_type?.includes("DeliveryCertificate")&&t.jsxs(He,{href:`/deliveries/${l.reference_id}`,className:"text-blue-500 hover:underline",children:["Acta #",l.reference_id]}),l.reference_type?.includes("ReceptionCertificate")&&t.jsxs(He,{href:`/receptions/${l.reference_id}`,className:"text-blue-500 hover:underline",children:["Acta #",l.reference_id]}),l.reference_type?.includes("EquipmentLog")&&t.jsx("span",{className:"text-xs text-muted-foreground",children:"Manual"})]})]},l.id)}export{St as default};
