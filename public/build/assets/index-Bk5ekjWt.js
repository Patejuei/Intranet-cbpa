import{c as D,r as k,j as t,L as E,a as L,H as F}from"./app-lrD-X_g2.js";import{B as K}from"./badge-CNMh2flQ.js";import{B}from"./button-C30YfVAU.js";import{I as V}from"./input-u8KO988D.js";import{a as q,b as G,c as J,d as I,S as O}from"./select-CyJ-A37M.js";import{b as M,e as o,a as Q,c,T as W,d as X}from"./table-cRJ9TjCv.js";import{A as Y}from"./app-layout-B-w059ge.js";import{S as Z}from"./square-pen-CFM1DWSL.js";import{T as ee}from"./trash-2-Dqx59gL-.js";import{P as te}from"./plus-DUGX3CSH.js";import{S as se}from"./search-DkrkwTHA.js";/* empty css            */import"./index-zozu2mmz.js";import"./index-D28iW8MQ.js";import"./index-BxHzOl0z.js";import"./chevron-down-DC4OJ025.js";import"./check-KNjNtnR0.js";import"./index-C4J_hXM0.js";import"./shield-DP_TgMF-.js";function _e(x){const e=D.c(30),{items:u,filters:r}=x,[l,R]=k.useState(r.search||""),[a,A]=k.useState(r.category||"all");let f,g;e[0]!==a||e[1]!==r.category||e[2]!==r.search||e[3]!==l?(f=()=>{const s=setTimeout(()=>{const $=r.search||"",z=r.category||"all";(l!==$||a!==z)&&L.get("/vehicles/inventory",{search:l,category:a!=="all"?a:void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},g=[l,a,r.search,r.category],e[0]=a,e[1]=r.category,e[2]=r.search,e[3]=l,e[4]=f,e[5]=g):(f=e[4],g=e[5]),k.useEffect(f,g);let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j=s=>{A(s)},e[6]=j):j=e[6];const H=j,P=ae,U=re;let p,b;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=[{title:"Material Mayor",href:"/vehicles/status"},{title:"Bodega",href:"/vehicles/inventory"}],b=t.jsx(F,{title:"Bodega Material Mayor"}),e[7]=p,e[8]=b):(p=e[7],b=e[8]);let y;e[9]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Bodega Material Mayor"}),t.jsx("p",{className:"text-muted-foreground",children:"Gestión de repuestos, insumos y control de stock."})]}),e[9]=y):y=e[9];let v;e[10]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[y,t.jsx(B,{asChild:!0,children:t.jsxs(E,{href:"/vehicles/inventory/create",children:[t.jsx(te,{className:"mr-2 h-4 w-4"}),"Nuevo Ítem"]})})]}),e[10]=v):v=e[10];let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(se,{className:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"}),e[11]=N):N=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=s=>R(s.target.value),e[12]=S):S=e[12];let n;e[13]!==l?(n=t.jsxs("div",{className:"relative flex-1",children:[N,t.jsx(V,{placeholder:"Buscar por nombre, SKU o ubicación...",className:"pl-9",value:l,onChange:S})]}),e[13]=l,e[14]=n):n=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(q,{className:"w-[180px]",children:t.jsx(G,{placeholder:"Categoría"})}),e[15]=_):_=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsxs(J,{children:[t.jsx(I,{value:"all",children:"Todas"}),t.jsx(I,{value:"insumo",children:"Insumos"}),t.jsx(I,{value:"repuesto",children:"Repuestos"})]}),e[16]=C):C=e[16];let i;e[17]!==a?(i=t.jsxs(O,{value:a,onValueChange:H,children:[_,C]}),e[17]=a,e[18]=i):i=e[18];let d;e[19]!==n||e[20]!==i?(d=t.jsxs("div",{className:"flex items-center gap-4 rounded-lg border bg-card p-4 shadow-sm",children:[n,i]}),e[19]=n,e[20]=i,e[21]=d):d=e[21];let w;e[22]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(Q,{className:"bg-muted/50",children:t.jsxs(M,{children:[t.jsx(c,{className:"w-[100px]",children:"SKU"}),t.jsx(c,{children:"Nombre"}),t.jsx(c,{children:"Categoría"}),t.jsx(c,{className:"text-right",children:"Stock"}),t.jsx(c,{className:"text-right",children:"Costo Unit."}),t.jsx(c,{children:"Ubicación"}),t.jsx(c,{className:"text-right",children:"Acciones"})]})}),e[22]=w):w=e[22];let m;e[23]!==u.data?(m=u.data.length===0?t.jsx(M,{children:t.jsx(o,{colSpan:7,className:"h-24 text-center text-muted-foreground",children:"No se encontraron ítems en la bodega."})}):u.data.map(s=>t.jsxs(M,{className:"transition-colors hover:bg-muted/50",children:[t.jsx(o,{className:"font-mono text-xs font-medium text-muted-foreground",children:s.sku||"N/A"}),t.jsx(o,{className:"font-medium",children:s.name}),t.jsx(o,{children:t.jsx(K,{variant:s.category==="insumo"?"secondary":"outline",className:s.category==="insumo"?"bg-blue-100 text-blue-700 hover:bg-blue-100":"border-orange-200 text-orange-700",children:s.category==="insumo"?"Insumo":"Repuesto"})}),t.jsx(o,{className:"text-right",children:t.jsxs("div",{className:"flex flex-col items-end",children:[t.jsx("span",{className:s.stock<=s.min_stock?"font-bold text-red-600":"font-medium",children:s.stock}),s.stock<=s.min_stock&&t.jsx("span",{className:"text-[10px] font-medium text-red-500",children:"Bajo Stock"})]})}),t.jsx(o,{className:"text-right text-muted-foreground tabular-nums",children:U(s.unit_cost)}),t.jsx(o,{className:"text-muted-foreground",children:s.location||"-"}),t.jsx(o,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(B,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 hover:bg-blue-50 hover:text-blue-600",children:t.jsx(E,{href:`/vehicles/inventory/${s.id}/edit`,children:t.jsx(Z,{className:"h-4 w-4"})})}),t.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:bg-red-50 hover:text-red-600",onClick:()=>P(s.id),children:t.jsx(ee,{className:"h-4 w-4"})})]})})]},s.id)),e[23]=u.data,e[24]=m):m=e[24];let h;e[25]!==m?(h=t.jsx("div",{className:"overflow-hidden rounded-xl border bg-card shadow-sm",children:t.jsxs(W,{children:[w,t.jsx(X,{children:m})]})}),e[25]=m,e[26]=h):h=e[26];let T;return e[27]!==d||e[28]!==h?(T=t.jsxs(Y,{breadcrumbs:p,children:[b,t.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[v,d,h]})]}),e[27]=d,e[28]=h,e[29]=T):T=e[29],T}function re(x){return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(x)}function ae(x){confirm("¿Está seguro de eliminar este ítem?")&&L.delete(`/vehicles/inventory/${x}`)}export{_e as default};
