import{c as M,r as A,u as L,j as e,H as P}from"./app-f77woEWo.js";import{P as T}from"./Pagination-BOLB8CdC.js";import{B,A as $}from"./app-layout-B4XzD86h.js";import{C as F}from"./CompanyFilter-D-Tvvwo6.js";import{c as z}from"./button-BUox-IYX.js";import{S as H}from"./save-CRxZ0H0S.js";/* empty css            */import"./index-BJkESKFP.js";import"./index-CE2_aldF.js";import"./index-C4J_hXM0.js";import"./shield-R2tHue2s.js";import"./select-CUASvSPl.js";import"./index-CPAQGPCJ.js";import"./check-DZ06pTr0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],O=z("Activity",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],D=z("Calendar",V);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],J=z("ClipboardList",G);function ne(a){const s=M.c(31),{logs:x}=a,[p,k]=A.useState("log");let u;s[0]===Symbol.for("react.memo_cache_sentinel")?(u={change_date:new Date().toISOString().split("T")[0],equipment_id:"",equipment_type:"Equipo de Respiracion",responsible_name:"",observations:""},s[0]=u):u=s[0];const{data:r,setData:o,post:w,processing:C,reset:S,errors:i}=L(u);let h;s[1]!==w||s[2]!==S?(h=t=>{t.preventDefault(),w("/batteries",{onSuccess:()=>{S(),k("log")}})},s[1]=w,s[2]=S,s[3]=h):h=s[3];const q=h;let b,f;s[4]===Symbol.for("react.memo_cache_sentinel")?(b=[{title:"Panel Principal",href:"/dashboard"},{title:"Baterías",href:"/batteries"}],f=e.jsx(P,{title:"Control de Baterías"}),s[4]=b,s[5]=f):(b=s[4],f=s[5]);let g;s[6]===Symbol.for("react.memo_cache_sentinel")?(g=()=>k("log"),s[6]=g):g=s[6];const E=`flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${p==="log"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"}`;let j;s[7]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx(J,{className:"size-4"}),s[7]=j):j=s[7];let l;s[8]!==E?(l=e.jsxs("button",{onClick:g,className:E,children:[j,"Bitácora"]}),s[8]=E,s[9]=l):l=s[9];let y;s[10]===Symbol.for("react.memo_cache_sentinel")?(y=()=>k("new"),s[10]=y):y=s[10];const R=`flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${p==="new"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"}`;let v;s[11]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx(B,{className:"size-4"}),s[11]=v):v=s[11];let n;s[12]!==R?(n=e.jsxs("button",{onClick:y,className:R,children:[v,"Nuevo Registro"]}),s[12]=R,s[13]=n):n=s[13];let d;s[14]!==n||s[15]!==l?(d=e.jsxs("div",{className:"flex w-full space-x-1 rounded-xl bg-muted p-1 md:w-fit",children:[l,n]}),s[14]=n,s[15]=l,s[16]=d):d=s[16];let N;s[17]===Symbol.for("react.memo_cache_sentinel")?(N=e.jsx(F,{}),s[17]=N):N=s[17];let c;s[18]!==d?(c=e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[d,N]}),s[18]=d,s[19]=c):c=s[19];let m;s[20]!==p||s[21]!==r||s[22]!==i||s[23]!==x||s[24]!==C||s[25]!==o||s[26]!==q?(m=p==="new"?e.jsxs("div",{className:"max-w-2xl rounded-xl border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-primary",children:[e.jsx(B,{className:"size-5"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Registrar Cambio de Batería"})]}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Fecha de Cambio"}),e.jsx("input",{type:"date",value:r.change_date,onChange:t=>o("change_date",t.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),i.change_date&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.change_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"ID del Equipo"}),e.jsx("input",{type:"text",value:r.equipment_id,onChange:t=>o("equipment_id",t.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: ERA-01"}),i.equipment_id&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.equipment_id})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Tipo de Equipo"}),e.jsxs("select",{value:r.equipment_type,onChange:t=>o("equipment_type",t.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",children:[e.jsx("option",{value:"Equipo de Respiracion",children:"Equipo de Respiración"}),e.jsx("option",{value:"Toma presion",children:"Toma Presión"}),e.jsx("option",{value:"Saturometro",children:"Saturómetro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Responsable del Cambio"}),e.jsx("input",{type:"text",value:r.responsible_name,onChange:t=>o("responsible_name",t.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Nombre del Bombero"}),i.responsible_name&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.responsible_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Observaciones"}),e.jsx("textarea",{value:r.observations,onChange:t=>o("observations",t.target.value),className:"min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Detalles adicionales..."})]}),e.jsx("div",{className:"rounded-lg bg-muted/50 p-4 text-sm text-muted-foreground",children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"size-4"}),"Próximo cambio programado:"," ",e.jsx("span",{className:"font-semibold text-foreground",children:"6 meses después de la fecha seleccionada"})]})}),e.jsxs("button",{type:"submit",disabled:C,className:"flex h-10 w-full items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90",children:[e.jsx(H,{className:"size-4"}),"Registrar Cambio"]})]})]}):e.jsxs("div",{className:"rounded-xl border bg-card shadow-sm",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(O,{className:"size-5 text-primary"}),"Bitácora de Cambios"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-muted/50 text-muted-foreground",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-medium",children:"Fecha Cambio"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Equipo"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Responsable"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Próx. Cambio"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Observaciones"})]})}),e.jsx("tbody",{className:"divide-y",children:x.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-muted-foreground",children:"No hay registros en la bitácora."})}):x.data.map(K)})]})}),e.jsx(T,{links:x.links})]}),s[20]=p,s[21]=r,s[22]=i,s[23]=x,s[24]=C,s[25]=o,s[26]=q,s[27]=m):m=s[27];let _;return s[28]!==c||s[29]!==m?(_=e.jsxs($,{breadcrumbs:b,children:[f,e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[c,m]})]}),s[28]=c,s[29]=m,s[30]=_):_=s[30],_}function K(a){return e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:new Date(a.change_date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:a.equipment_id}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"rounded-full bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:a.equipment_type})}),e.jsx("td",{className:"px-4 py-3",children:a.responsible_name}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"flex items-center gap-1 font-medium text-orange-600",children:[e.jsx(D,{className:"size-3"}),new Date(a.next_change_date).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})]})}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground italic",children:a.observations||"-"})]},a.id)}export{ne as default};
