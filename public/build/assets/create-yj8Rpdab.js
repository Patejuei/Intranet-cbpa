import{c as be,b as _e,u as Ce,r as ye,j as t,H as Se,L as Ne}from"./app-yTEI3rwQ.js";import{P as we,C as Ie,a as Pe,b as Re,c as ke,d as Ae,e as Fe,f as Te,g as qe,M as De}from"./MaterialSelector-BvJgouWD.js";import{B as W,c as Le}from"./button-DZ84VGHC.js";import{I as je}from"./input-BL1HE6zX.js";import{L as U}from"./label-DWQw8x66.js";import{a as Me,b as Oe,c as ze,d as x,S as Ee}from"./select-BA6DtN4D.js";import{b as Be,A as $e}from"./app-layout-C9-ZT5uU.js";import{C as Ge}from"./check-EHhGwJXz.js";import{P as He}from"./plus-C-leFgpR.js";import{S as Qe}from"./save-H6aDEYfq.js";import{T as Ve}from"./trash-BhaAjZsB.js";/* empty css            */import"./index-BU9YzDWi.js";import"./search-6FxtX4T0.js";import"./index-DcmmnLCN.js";import"./index-B0b6YiDc.js";import"./chevron-down-7GosfSqF.js";import"./index-q7GIQJN5.js";import"./shield-CZtmOvLt.js";function ut(_){const e=be.c(107),{firefighters:l,materials:r}=_,{auth:C}=_e().props,n=C.user;let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=new Date().toISOString().split("T"),e[0]=g):g=e[0];const f=n.company==="Comandancia"||n.role==="admin"||n.role==="capitan"?"Segunda Compañía":n.company;let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=[{material_id:"",quantity:1}],e[1]=c):c=e[1];let m;e[2]!==f?(m={firefighter_id:"",date:g[0],observations:"",company:f,items:c},e[2]=f,e[3]=m):m=e[3];const{data:a,setData:s,post:b,processing:u,errors:o}=Ce(m),[d,y]=ye.useState(!1);let h;e[4]!==a.items||e[5]!==s?(h=()=>{s("items",[...a.items,{material_id:"",quantity:1}])},e[4]=a.items,e[5]=s,e[6]=h):h=e[6];const j=h;let v;e[7]!==a.items||e[8]!==s?(v=i=>{const p=[...a.items];p.splice(i,1),s("items",p)},e[7]=a.items,e[8]=s,e[9]=v):v=e[9];const J=v;let X;e[10]!==a.items||e[11]!==s?(X=(i,p,he)=>{const ve=[...a.items];ve[i][p]=he,s("items",ve)},e[10]=a.items,e[11]=s,e[12]=X):X=e[12];const K=X;let Y;e[13]!==b?(Y=i=>{i.preventDefault(),b("/receptions")},e[13]=b,e[14]=Y):Y=e[14];const ue=Y;let Z,ee;e[15]===Symbol.for("react.memo_cache_sentinel")?(ee=[{title:"Actas de Recepción",href:"/receptions"},{title:"Nueva Acta",href:"/receptions/create"}],Z=t.jsx(Se,{title:"Nueva Acta de Recepción"}),e[15]=Z,e[16]=ee):(Z=e[15],ee=e[16]);let te;e[17]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Nueva Acta de Recepción"}),t.jsx("p",{className:"text-muted-foreground",children:"Registre la recepción de material devuelto por un voluntario."})]}),e[17]=te):te=e[17];let ae;e[18]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(U,{children:"Bombero (Entrega Material)"}),e[18]=ae):ae=e[18];let S;e[19]!==a.firefighter_id||e[20]!==l?(S=a.firefighter_id?l.find(i=>i.id.toString()===a.firefighter_id)?.full_name:"Seleccione bombero...",e[19]=a.firefighter_id,e[20]=l,e[21]=S):S=e[21];let se;e[22]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Be,{className:"opacity-50"}),e[22]=se):se=e[22];let N;e[23]!==d||e[24]!==S?(N=t.jsx(we,{asChild:!0,children:t.jsxs(W,{variant:"outline",role:"combobox","aria-expanded":d,className:"w-full justify-between",children:[S,se]})}),e[23]=d,e[24]=S,e[25]=N):N=e[25];let ie;e[26]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(Ie,{placeholder:"Buscar bombero..."}),e[26]=ie):ie=e[26];let le;e[27]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Pe,{children:"No se encontró bombero."}),e[27]=le):le=e[27];let w;if(e[28]!==a.firefighter_id||e[29]!==l||e[30]!==s){let i;e[32]!==a.firefighter_id||e[33]!==s?(i=p=>t.jsxs(Re,{value:p.full_name,onSelect:()=>{s("firefighter_id",p.id.toString()),y(!1)},children:[p.full_name,t.jsx(Ge,{className:Le("ml-auto",a.firefighter_id===p.id.toString()?"opacity-100":"opacity-0")})]},p.id),e[32]=a.firefighter_id,e[33]=s,e[34]=i):i=e[34],w=l.map(i),e[28]=a.firefighter_id,e[29]=l,e[30]=s,e[31]=w}else w=e[31];let I;e[35]!==w?(I=t.jsx(ke,{className:"w-[--radix-popover-trigger-width] p-0",children:t.jsxs(Ae,{children:[ie,t.jsxs(Fe,{children:[le,t.jsx(Te,{children:w})]})]})}),e[35]=w,e[36]=I):I=e[36];let P;e[37]!==d||e[38]!==N||e[39]!==I?(P=t.jsxs(qe,{open:d,onOpenChange:y,children:[N,I]}),e[37]=d,e[38]=N,e[39]=I,e[40]=P):P=e[40];let R;e[41]!==o.firefighter_id?(R=o.firefighter_id&&t.jsx("p",{className:"text-sm text-red-500",children:o.firefighter_id}),e[41]=o.firefighter_id,e[42]=R):R=e[42];let k;e[43]!==P||e[44]!==R?(k=t.jsxs("div",{className:"flex flex-col gap-2",children:[ae,P,R]}),e[43]=P,e[44]=R,e[45]=k):k=e[45];let re;e[46]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(U,{htmlFor:"date",children:"Fecha"}),e[46]=re):re=e[46];const xe=a.date??"";let A;e[47]!==s?(A=i=>s("date",i.target.value),e[47]=s,e[48]=A):A=e[48];let F;e[49]!==xe||e[50]!==A?(F=t.jsx(je,{type:"date",value:xe,onChange:A,onClick:Ue}),e[49]=xe,e[50]=A,e[51]=F):F=e[51];let T;e[52]!==o.date?(T=o.date&&t.jsx("p",{className:"text-sm text-red-500",children:o.date}),e[52]=o.date,e[53]=T):T=e[53];let q;e[54]!==F||e[55]!==T?(q=t.jsxs("div",{className:"grid gap-2",children:[re,F,T]}),e[54]=F,e[55]=T,e[56]=q):q=e[56];let D;e[57]!==k||e[58]!==q?(D=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[k,q]}),e[57]=k,e[58]=q,e[59]=D):D=e[59];let oe;e[60]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(U,{htmlFor:"company",children:"Compañía"}),e[60]=oe):oe=e[60];const ge=a.company||"";let L;e[61]!==s?(L=i=>s("company",i),e[61]=s,e[62]=L):L=e[62];let M;e[63]!==ge||e[64]!==L?(M=t.jsxs("div",{className:"grid gap-2",children:[oe,t.jsx(Ke,{value:ge,onChange:L})]}),e[63]=ge,e[64]=L,e[65]=M):M=e[65];let O;e[66]!==D||e[67]!==M?(O=t.jsxs("div",{className:"grid gap-4 rounded-xl border bg-card p-6 shadow-sm",children:[D,M]}),e[66]=D,e[67]=M,e[68]=O):O=e[68];let ne;e[69]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("h3",{className:"text-lg font-semibold",children:"Materiales Recibidos"}),e[69]=ne):ne=e[69];let ce;e[70]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(He,{className:"mr-2 size-4"}),e[70]=ce):ce=e[70];let z;e[71]!==j?(z=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[ne,t.jsxs(W,{type:"button",variant:"outline",size:"sm",onClick:j,children:[ce," Agregar Item"]})]}),e[71]=j,e[72]=z):z=e[72];let E;if(e[73]!==a.items||e[74]!==r||e[75]!==J||e[76]!==K){let i;e[78]!==a.items.length||e[79]!==r||e[80]!==J||e[81]!==K?(i=(p,he)=>t.jsx(Je,{item:p,index:he,materials:r,updateItem:K,removeItem:J,isSingle:a.items.length===1},he),e[78]=a.items.length,e[79]=r,e[80]=J,e[81]=K,e[82]=i):i=e[82],E=a.items.map(i),e[73]=a.items,e[74]=r,e[75]=J,e[76]=K,e[77]=E}else E=e[77];let B;e[83]!==E?(B=t.jsx("div",{className:"space-y-4",children:E}),e[83]=E,e[84]=B):B=e[84];let $;e[85]!==o.items?($=o.items&&t.jsx("p",{className:"mt-2 text-sm text-red-500",children:o.items}),e[85]=o.items,e[86]=$):$=e[86];let G;e[87]!==z||e[88]!==B||e[89]!==$?(G=t.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[z,B,$]}),e[87]=z,e[88]=B,e[89]=$,e[90]=G):G=e[90];let me;e[91]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(U,{htmlFor:"observations",children:"Observaciones"}),e[91]=me):me=e[91];let H;e[92]!==s?(H=i=>s("observations",i.target.value),e[92]=s,e[93]=H):H=e[93];let Q;e[94]!==a.observations||e[95]!==H?(Q=t.jsxs("div",{className:"grid gap-2 rounded-xl border bg-card p-6 shadow-sm",children:[me,t.jsx("textarea",{id:"observations",value:a.observations,onChange:H,className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50"})]}),e[94]=a.observations,e[95]=H,e[96]=Q):Q=e[96];let de;e[97]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(Ne,{href:"/receptions",children:t.jsx(W,{type:"button",variant:"outline",children:"Cancelar"})}),e[97]=de):de=e[97];let fe;e[98]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(Qe,{className:"size-4"}),e[98]=fe):fe=e[98];let V;e[99]!==u?(V=t.jsxs("div",{className:"flex justify-end gap-4",children:[de,t.jsxs(W,{type:"submit",disabled:u,className:"gap-2",children:[fe," Guardar Acta"]})]}),e[99]=u,e[100]=V):V=e[100];let pe;return e[101]!==ue||e[102]!==O||e[103]!==G||e[104]!==Q||e[105]!==V?(pe=t.jsxs($e,{breadcrumbs:ee,children:[Z,t.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-6 p-4",children:[te,t.jsxs("form",{onSubmit:ue,className:"flex flex-col gap-6",children:[O,G,Q,V]})]})]}),e[101]=ue,e[102]=O,e[103]=G,e[104]=Q,e[105]=V,e[106]=pe):pe=e[106],pe}function Ue(_){return _.currentTarget.showPicker()}function Je(_){const e=be.c(26),{item:l,index:r,materials:C,updateItem:n,removeItem:g,isSingle:f}=_;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(U,{children:"Material"}),e[0]=c):c=e[0];const m=l.material_id?parseInt(l.material_id):void 0;let a;e[1]!==r||e[2]!==n?(a=v=>n(r,"material_id",v.toString()),e[1]=r,e[2]=n,e[3]=a):a=e[3];let s;e[4]!==C||e[5]!==m||e[6]!==a?(s=t.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[c,t.jsx(De,{materials:C,value:m,onChange:a,placeholder:"Seleccione material (Nombre, Cód, o S/N)..."})]}),e[4]=C,e[5]=m,e[6]=a,e[7]=s):s=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(U,{children:"Cantidad"}),e[8]=b):b=e[8];let u;e[9]!==r||e[10]!==n?(u=v=>n(r,"quantity",parseInt(v.target.value)),e[9]=r,e[10]=n,e[11]=u):u=e[11];let o;e[12]!==l.quantity||e[13]!==u?(o=t.jsxs("div",{className:"grid w-32 gap-2",children:[b,t.jsx(je,{type:"number",min:"1",value:l.quantity,onChange:u,required:!0})]}),e[12]=l.quantity,e[13]=u,e[14]=o):o=e[14];let d;e[15]!==r||e[16]!==g?(d=()=>g(r),e[15]=r,e[16]=g,e[17]=d):d=e[17];let y;e[18]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(Ve,{className:"size-4"}),e[18]=y):y=e[18];let h;e[19]!==f||e[20]!==d?(h=t.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-50 hover:text-red-600",onClick:d,disabled:f,children:y}),e[19]=f,e[20]=d,e[21]=h):h=e[21];let j;return e[22]!==h||e[23]!==s||e[24]!==o?(j=t.jsxs("div",{className:"flex items-end gap-4 border-b pb-4 last:border-0 last:pb-0",children:[s,o,h]}),e[22]=h,e[23]=s,e[24]=o,e[25]=j):j=e[25],j}function Ke(_){const e=be.c(7),{value:l,onChange:r}=_,{auth:C}=_e().props,n=C.user;if(!(n.role==="admin"||n.role==="capitan"||n.company==="Comandancia")){let a;return e[0]!==l?(a=t.jsx(je,{value:l,disabled:!0,className:"bg-muted text-muted-foreground opacity-100"}),e[0]=l,e[1]=a):a=e[1],a}let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(Me,{className:"w-full",children:t.jsx(Oe,{placeholder:"Seleccione Compañía"})}),e[2]=f):f=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsxs(ze,{children:[t.jsx(x,{value:"Primera Compañía",children:"Primera Compañía"}),t.jsx(x,{value:"Segunda Compañía",children:"Segunda Compañía"}),t.jsx(x,{value:"Tercera Compañía",children:"Tercera Compañía"}),t.jsx(x,{value:"Cuarta Compañía",children:"Cuarta Compañía"}),t.jsx(x,{value:"Quinta Compañía",children:"Quinta Compañía"}),t.jsx(x,{value:"Séptima Compañía",children:"Séptima Compañía"}),t.jsx(x,{value:"Octava Compañía",children:"Octava Compañía"}),t.jsx(x,{value:"Novena Compañía",children:"Novena Compañía"}),t.jsx(x,{value:"Décima Compañía",children:"Décima Compañía"}),t.jsx(x,{value:"Comandancia",children:"Comandancia"})]}),e[3]=c):c=e[3];let m;return e[4]!==r||e[5]!==l?(m=t.jsxs(Ee,{value:l,onValueChange:r,children:[f,c]}),e[4]=r,e[5]=l,e[6]=m):m=e[6],m}export{ut as default};
