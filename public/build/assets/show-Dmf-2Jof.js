import{c as re,r as ce,j as t,H as me,L as se}from"./app-BdiyVtwP.js";import{M as oe}from"./MaterialForm-DZiZBhzF.js";import{B as Y}from"./badge-CjAOFmVA.js";import{B as te}from"./button-xAfePOcQ.js";import{C as le,a as ie,b as ae,c as ne,d as de}from"./card-DXh8U64W.js";import{e as he,b as xe,D as fe,a as ue,c as pe,d as je}from"./dialog-BiocwIQc.js";import{F as ge,c as Ne,A as _e}from"./app-layout-CSJ5C79X.js";import{A as ye}from"./arrow-left-BBsIzLtK.js";import{S as be}from"./square-pen-_zuLOtYR.js";import{H as ve}from"./history-DoB2qk6t.js";/* empty css            */import"./input-error-YAjnHl3n.js";import"./input-BjaQHf93.js";import"./label-u93ODZ2R.js";import"./index-CqnVgCet.js";import"./select-DOU_d7Pk.js";import"./index-BhFFVPsB.js";import"./index-8PdPfJj1.js";import"./check--A3dgnPr.js";import"./index-q7GIQJN5.js";import"./shield-CtYr_qvg.js";function Ye(l){const e=re.c(79),{material:s,history:E}=l,[G,J]=ce.useState(!1);let M,R;e[0]===Symbol.for("react.memo_cache_sentinel")?(M={title:"Panel Principal",href:"/dashboard"},R={title:"Inventario",href:"/inventory"},e[0]=M,e[1]=R):(M=e[0],R=e[1]);const K=`/inventory/${s.id}`;let i;e[2]!==s.product_name||e[3]!==K?(i=[M,R,{title:s.product_name,href:K}],e[2]=s.product_name,e[3]=K,e[4]=i):i=e[4];const Q=`Detalle: ${s.product_name}`;let a;e[5]!==Q?(a=t.jsx(me,{title:Q}),e[5]=Q,e[6]=a):a=e[6];let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(se,{href:"/inventory",children:t.jsx(ye,{className:"size-5"})})}),e[7]=A):A=e[7];let n;e[8]!==s.product_name?(n=t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.product_name}),e[8]=s.product_name,e[9]=n):n=e[9];let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx("p",{className:"text-muted-foreground",children:"Detalles e Historial de Movimientos"}),e[10]=k):k=e[10];let r;e[11]!==n?(r=t.jsxs("div",{className:"flex items-center gap-4",children:[A,t.jsxs("div",{children:[n,k]})]}),e[11]=n,e[12]=r):r=e[12];let q;e[13]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(he,{asChild:!0,children:t.jsxs(te,{variant:"outline",className:"gap-2",children:[t.jsx(be,{className:"size-4"})," Editar"]})}),e[13]=q):q=e[13];let I;e[14]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs(xe,{children:[t.jsx(fe,{children:"Editar Material"}),t.jsx(ue,{children:"Modificar detalles del material o ajustar stock manualmente."})]}),e[14]=I):I=e[14];let w,H;e[15]===Symbol.for("react.memo_cache_sentinel")?(w=()=>J(!1),H=()=>J(!1),e[15]=w,e[16]=H):(w=e[15],H=e[16]);let c;e[17]!==s?(c=t.jsxs(pe,{children:[I,t.jsx(oe,{material:s,onSuccess:w,onCancel:H})]}),e[17]=s,e[18]=c):c=e[18];let m;e[19]!==G||e[20]!==c?(m=t.jsxs(je,{open:G,onOpenChange:J,children:[q,c]}),e[19]=G,e[20]=c,e[21]=m):m=e[21];let o;e[22]!==r||e[23]!==m?(o=t.jsxs("div",{className:"flex items-center justify-between",children:[r,m]}),e[22]=r,e[23]=m,e[24]=o):o=e[24];let L;e[25]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(le,{children:t.jsxs(ie,{className:"flex items-center gap-2",children:[t.jsx(Ne,{className:"size-5 text-primary"}),"Información del Material"]})}),e[25]=L):L=e[25];let O;e[26]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Categoría"}),e[26]=O):O=e[26];const W=s.category||"Sin Categoría";let d;e[27]!==W?(d=t.jsxs("div",{children:[O,t.jsx("p",{className:"text-sm font-semibold",children:W})]}),e[27]=W,e[28]=d):d=e[28];let T;e[29]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Marca"}),e[29]=T):T=e[29];const X=s.brand||"-";let h;e[30]!==X?(h=t.jsxs("div",{children:[T,t.jsx("p",{className:"text-sm",children:X})]}),e[30]=X,e[31]=h):h=e[31];let z;e[32]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Modelo"}),e[32]=z):z=e[32];const Z=s.model||"-";let x;e[33]!==Z?(x=t.jsxs("div",{children:[z,t.jsx("p",{className:"text-sm",children:Z})]}),e[33]=Z,e[34]=x):x=e[34];let f;e[35]!==h||e[36]!==x?(f=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h,x]}),e[35]=h,e[36]=x,e[37]=f):f=e[37];let $;e[38]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Código Interno"}),e[38]=$):$=e[38];let u;e[39]!==s.code?(u=s.code?t.jsx(Y,{variant:"outline",className:"font-mono",children:s.code}):"-",e[39]=s.code,e[40]=u):u=e[40];let p;e[41]!==u?(p=t.jsxs("div",{children:[$,t.jsx("div",{className:"mt-1",children:u})]}),e[41]=u,e[42]=p):p=e[42];let B;e[43]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Número de Serie"}),e[43]=B):B=e[43];let j;e[44]!==s.serial_number?(j=s.serial_number?t.jsx(Y,{variant:"outline",className:"font-mono",children:s.serial_number}):"-",e[44]=s.serial_number,e[45]=j):j=e[45];let g;e[46]!==j?(g=t.jsxs("div",{children:[B,t.jsx("div",{className:"mt-1",children:j})]}),e[46]=j,e[47]=g):g=e[47];let N;e[48]!==p||e[49]!==g?(N=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p,g]}),e[48]=p,e[49]=g,e[50]=N):N=e[50];let P;e[51]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Stock Actual"}),e[51]=P):P=e[51];const ee=s.stock_quantity>0?"bg-green-500":"bg-red-500";let _;e[52]!==s.stock_quantity||e[53]!==ee?(_=t.jsxs("div",{children:[P,t.jsx("div",{className:"mt-1",children:t.jsxs(Y,{className:ee,children:[s.stock_quantity," unidades"]})})]}),e[52]=s.stock_quantity,e[53]=ee,e[54]=_):_=e[54];let y;e[55]!==s.document_path?(y=s.document_path&&t.jsx("div",{className:"border-t pt-4",children:t.jsx(te,{variant:"outline",className:"w-full gap-2",asChild:!0,children:t.jsxs("a",{href:`/storage/${s.document_path}`,target:"_blank",rel:"noopener noreferrer",children:[t.jsx(ge,{className:"size-4"}),"Ver Documento General"]})})}),e[55]=s.document_path,e[56]=y):y=e[56];let b;e[57]!==d||e[58]!==f||e[59]!==N||e[60]!==_||e[61]!==y?(b=t.jsxs(ae,{className:"h-fit md:col-span-1",children:[L,t.jsxs(ne,{className:"space-y-4",children:[d,f,N,_,y]})]}),e[57]=d,e[58]=f,e[59]=N,e[60]=_,e[61]=y,e[62]=b):b=e[62];let V;e[63]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsxs(le,{children:[t.jsxs(ie,{className:"flex items-center gap-2",children:[t.jsx(ve,{className:"size-5 text-primary"}),"Historial de Movimientos Unificado"]}),t.jsx(de,{children:"Registro completo de Entregas, Recepciones y Ajustes"})]}),e[63]=V):V=e[63];let F;e[64]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("thead",{className:"bg-muted text-muted-foreground",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 font-medium",children:"Fecha"}),t.jsx("th",{className:"p-3 font-medium",children:"Tipo"}),t.jsx("th",{className:"p-3 font-medium",children:"Cambio"}),t.jsx("th",{className:"p-3 font-medium",children:"Descripción"}),t.jsx("th",{className:"p-3 font-medium",children:"Usuario"}),t.jsx("th",{className:"p-3 font-medium",children:"Ref"})]})}),e[64]=F):F=e[64];let v;e[65]!==E?(v=E.length>0?E.map(Se):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No hay historial unificado disponible."})}),e[65]=E,e[66]=v):v=e[66];let S;e[67]!==v?(S=t.jsxs(ae,{className:"md:col-span-2",children:[V,t.jsx(ne,{children:t.jsx("div",{className:"rounded-md border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[F,t.jsx("tbody",{className:"divide-y",children:v})]})})})})]}),e[67]=v,e[68]=S):S=e[68];let C;e[69]!==b||e[70]!==S?(C=t.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[b,S]}),e[69]=b,e[70]=S,e[71]=C):C=e[71];let D;e[72]!==o||e[73]!==C?(D=t.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[o,C]}),e[72]=o,e[73]=C,e[74]=D):D=e[74];let U;return e[75]!==i||e[76]!==D||e[77]!==a?(U=t.jsxs(_e,{breadcrumbs:i,children:[a,D]}),e[75]=i,e[76]=D,e[77]=a,e[78]=U):U=e[78],U}function Se(l){return t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"p-3",children:new Date(l.created_at).toLocaleString()}),t.jsx("td",{className:"p-3",children:t.jsx(Y,{variant:l.type==="DELIVERY"||l.type==="RECEPTION"?"outline":l.type==="ADD"?"secondary":l.type==="REMOVE"?"destructive":"default",className:l.type==="DELIVERY"?"bg-blue-50 text-blue-700":l.type==="RECEPTION"?"bg-green-50 text-green-700":l.type==="ADD"?"bg-green-100 text-green-700":l.type==="REMOVE"?"bg-red-100 text-red-700":"",children:l.type})}),t.jsx("td",{className:"p-3 font-medium",children:t.jsxs("span",{className:l.quantity_change>0?"text-green-600":"text-red-600",children:[l.quantity_change>0?"+":"",l.quantity_change]})}),t.jsx("td",{className:"max-w-[200px] truncate p-3",title:l.description,children:l.description}),t.jsx("td",{className:"p-3 text-muted-foreground",children:l.user?.name||"-"}),t.jsxs("td",{className:"p-3",children:[l.reference_type?.includes("DeliveryCertificate")&&t.jsxs(se,{href:`/deliveries/${l.reference_id}`,className:"text-blue-500 hover:underline",children:["Acta #",l.reference_id]}),l.reference_type?.includes("ReceptionCertificate")&&t.jsxs(se,{href:`/receptions/${l.reference_id}`,className:"text-blue-500 hover:underline",children:["Acta #",l.reference_id]}),l.reference_type?.includes("EquipmentLog")&&t.jsx("span",{className:"text-xs text-muted-foreground",children:"Manual"})]})]},l.id)}export{Ye as default};
