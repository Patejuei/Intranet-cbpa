import{c as ae,b as ie,j as t,a as ne,H as re,L as ce}from"./app-B9QcLIWa.js";import{B as n}from"./badge-eAW9tGW7.js";import{a as le,f as L,B as G}from"./button-B8ZIXrdG.js";import{b as U,c as T,C as K,a as J}from"./card-DruzLovC.js";import{A as de}from"./app-layout-2OmtfUSy.js";import{A as me}from"./arrow-left-YGYp4dOa.js";import{C as oe}from"./circle-alert-SGBNUUbp.js";import{C as xe}from"./clock-C7YEOzqS.js";/* empty css            */import"./index-BkrslbVE.js";import"./index-CIQYj8wZ.js";import"./index-q7GIQJN5.js";import"./shield-DgM9RD2J.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$=le("CircleCheckBig",he),fe=[{title:"Vehículos",href:"/vehicles/status"},{title:"Historial Checklists",href:"/vehicles/checklists"}];function Be(a){const e=ae.c(99),{checklist:s,canReview:B}=a;ie();let m,o,x,h,r,c,l,f,d;if(e[0]!==B||e[1]!==s.captain||e[2]!==s.captain_reviewed_at||e[3]!==s.commander||e[4]!==s.commander_reviewed_at||e[5]!==s.created_at||e[6]!==s.details||e[7]!==s.general_observations||e[8]!==s.id||e[9]!==s.inspector||e[10]!==s.inspector_reviewed_at||e[11]!==s.machinist||e[12]!==s.machinist_reviewed_at||e[13]!==s.status||e[14]!==s.user.name||e[15]!==s.vehicle.company||e[16]!==s.vehicle.name||e[17]!==s.vehicle.plate){const Q=s.details.reduce(ve,{});let A;e[27]!==s.id?(A=()=>{confirm("¿Está seguro de visar este checklist?")&&ne.post(`/vehicles/checklists/${s.id}/review`)},e[27]=s.id,e[28]=A):A=e[28];const O=A,W=ue,X=pe;m=de,f=fe;const D=`Checklist #${s.id}`;e[29]!==D?(d=t.jsx(re,{title:D}),e[29]=D,e[30]=d):d=e[30],h="flex flex-1 flex-col gap-8 p-4",e[31]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsxs(ce,{href:"/vehicles/checklists",className:"flex w-fit items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[t.jsx(me,{className:"size-4"}),"Volver a la lista"]}),e[31]=r):r=e[31];const F=s.status==="Completed"?"default":"secondary";let v;e[32]!==s.status||e[33]!==F?(v=t.jsx(n,{variant:F,children:s.status}),e[32]=s.status,e[33]=F,e[34]=v):v=e[34];let j;e[35]!==s.id||e[36]!==v?(j=t.jsxs("h1",{className:"flex items-center gap-2 text-2xl font-bold",children:["Checklist #",s.id,v]}),e[35]=s.id,e[36]=v,e[37]=j):j=e[37];let _;e[38]!==s.created_at?(_=L(s.created_at),e[38]=s.created_at,e[39]=_):_=e[39];let g;e[40]!==s.user.name||e[41]!==_?(g=t.jsxs("p",{className:"text-muted-foreground",children:[_," - Realizado por"," ",s.user.name]}),e[40]=s.user.name,e[41]=_,e[42]=g):g=e[42];let N;e[43]!==j||e[44]!==g?(N=t.jsxs("div",{children:[j,g]}),e[43]=j,e[44]=g,e[45]=N):N=e[45];let b;e[46]!==B||e[47]!==O?(b=B&&t.jsxs(G,{onClick:O,size:"lg",className:"bg-green-600 hover:bg-green-700",children:[t.jsx($,{className:"mr-2 size-4"}),"Visar Checklist"]}),e[46]=B,e[47]=O,e[48]=b):b=e[48],e[49]!==N||e[50]!==b?(c=t.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[N,b]}),e[49]=N,e[50]=b,e[51]=c):c=e[51];let M;e[52]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(K,{children:t.jsx(J,{children:"Datos del Vehículo"})}),e[52]=M):M=e[52];let E;e[53]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("span",{className:"font-medium text-muted-foreground",children:"Nombre:"}),e[53]=E):E=e[53];let w;e[54]!==s.vehicle.name?(w=t.jsxs("div",{className:"flex justify-between",children:[E,t.jsx("span",{children:s.vehicle.name})]}),e[54]=s.vehicle.name,e[55]=w):w=e[55];let V;e[56]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("span",{className:"font-medium text-muted-foreground",children:"Patente:"}),e[56]=V):V=e[56];let y;e[57]!==s.vehicle.plate?(y=t.jsxs("div",{className:"flex justify-between",children:[V,t.jsx("span",{children:s.vehicle.plate})]}),e[57]=s.vehicle.plate,e[58]=y):y=e[58];let H;e[59]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("span",{className:"font-medium text-muted-foreground",children:"Compañía:"}),e[59]=H):H=e[59];let C;e[60]!==s.vehicle.company?(C=t.jsxs("div",{className:"flex justify-between",children:[H,t.jsx("span",{children:s.vehicle.company})]}),e[60]=s.vehicle.company,e[61]=C):C=e[61];let k;e[62]!==w||e[63]!==y||e[64]!==C?(k=t.jsxs(U,{children:[M,t.jsxs(T,{className:"space-y-2",children:[w,y,C]})]}),e[62]=w,e[63]=y,e[64]=C,e[65]=k):k=e[65];let I;e[66]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(K,{children:t.jsx(J,{children:"Estado de Revisión"})}),e[66]=I):I=e[66];let S;e[67]!==s.captain||e[68]!==s.captain_reviewed_at||e[69]!==s.commander||e[70]!==s.commander_reviewed_at||e[71]!==s.inspector||e[72]!==s.inspector_reviewed_at||e[73]!==s.machinist||e[74]!==s.machinist_reviewed_at||e[75]!==s.vehicle.company?(S=s.vehicle.company==="Comandancia"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between rounded border p-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Comandante"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.commander?s.commander.name:"Pendiente"})]}),s.commander_reviewed_at?t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx($,{className:"size-4"}),L(s.commander_reviewed_at)]}):t.jsx(n,{variant:"outline",children:"Pendiente"})]}),t.jsxs("div",{className:"flex items-center justify-between rounded border p-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Inspector M.M."}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.inspector?s.inspector.name:"Pendiente"})]}),s.inspector_reviewed_at?t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx($,{className:"size-4"}),L(s.inspector_reviewed_at)]}):t.jsx(n,{variant:"outline",children:"Pendiente"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between rounded border p-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Capitán"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.captain?s.captain.name:"Pendiente"})]}),s.captain_reviewed_at?t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx($,{className:"size-4"}),L(s.captain_reviewed_at)]}):t.jsx(n,{variant:"outline",children:"Pendiente"})]}),t.jsxs("div",{className:"flex items-center justify-between rounded border p-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold",children:"Maquinista"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:s.machinist?s.machinist.name:"Pendiente"})]}),s.machinist_reviewed_at?t.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[t.jsx($,{className:"size-4"}),L(s.machinist_reviewed_at)]}):t.jsx(n,{variant:"outline",children:"Pendiente"})]})]}),e[67]=s.captain,e[68]=s.captain_reviewed_at,e[69]=s.commander,e[70]=s.commander_reviewed_at,e[71]=s.inspector,e[72]=s.inspector_reviewed_at,e[73]=s.machinist,e[74]=s.machinist_reviewed_at,e[75]=s.vehicle.company,e[76]=S):S=e[76];let z;e[77]!==s.general_observations?(z=s.general_observations&&t.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4",children:[t.jsx("h3",{className:"mb-2 font-medium",children:"Observaciones Generales"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:s.general_observations})]}),e[77]=s.general_observations,e[78]=z):z=e[78];let P;e[79]!==S||e[80]!==z?(P=t.jsxs(U,{children:[I,t.jsxs(T,{className:"space-y-4",children:[S,z]})]}),e[79]=S,e[80]=z,e[81]=P):P=e[81],e[82]!==k||e[83]!==P?(l=t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[k,P]}),e[82]=k,e[83]=P,e[84]=l):l=e[84],o="space-y-6",x=Object.entries(Q).map(Y=>{const[q,Z]=Y;return t.jsxs(U,{children:[t.jsx("div",{className:"border-b bg-muted/50 px-6 py-4",children:t.jsx("h3",{className:"text-lg font-bold",children:q})}),t.jsx(T,{className:"p-0",children:t.jsx("div",{className:"divide-y",children:Z.map(i=>t.jsxs("div",{className:"flex flex-col justify-between gap-4 p-4 md:flex-row md:items-center",children:[t.jsx("div",{className:"flex-1 font-medium",children:i.item.name}),t.jsxs("div",{className:"flex min-w-[150px] items-center gap-3",children:[X(i.status),W(i.status)]}),t.jsx("div",{className:"flex-1 text-sm text-muted-foreground italic",children:i.notes||"Sin observaciones"}),i.status!=="ok"&&t.jsx(G,{size:"sm",variant:"secondary",onClick:()=>{const ee=`Falla reportada: ${s.vehicle.name} - ${i.item.name}`,se=`Se reporta falla en checklist #${s.id}.

Ítem: ${i.item.name}
Estado: ${i.status==="urgent"?"Urgente":"Próxima Mantención"}
Observación: ${i.notes||"Sin observaciones"}

Vehículo: ${s.vehicle.name} (${s.vehicle.plate})`,te=new URLSearchParams({subject:ee,message:se});window.location.href=`/tickets/create?${te.toString()}`},children:"Crear Incidencia"})]},i.id))})})]},q)}),e[0]=B,e[1]=s.captain,e[2]=s.captain_reviewed_at,e[3]=s.commander,e[4]=s.commander_reviewed_at,e[5]=s.created_at,e[6]=s.details,e[7]=s.general_observations,e[8]=s.id,e[9]=s.inspector,e[10]=s.inspector_reviewed_at,e[11]=s.machinist,e[12]=s.machinist_reviewed_at,e[13]=s.status,e[14]=s.user.name,e[15]=s.vehicle.company,e[16]=s.vehicle.name,e[17]=s.vehicle.plate,e[18]=m,e[19]=o,e[20]=x,e[21]=h,e[22]=r,e[23]=c,e[24]=l,e[25]=f,e[26]=d}else m=e[18],o=e[19],x=e[20],h=e[21],r=e[22],c=e[23],l=e[24],f=e[25],d=e[26];let p;e[85]!==o||e[86]!==x?(p=t.jsx("div",{className:o,children:x}),e[85]=o,e[86]=x,e[87]=p):p=e[87];let u;e[88]!==h||e[89]!==r||e[90]!==c||e[91]!==l||e[92]!==p?(u=t.jsxs("div",{className:h,children:[r,c,l,p]}),e[88]=h,e[89]=r,e[90]=c,e[91]=l,e[92]=p,e[93]=u):u=e[93];let R;return e[94]!==m||e[95]!==u||e[96]!==f||e[97]!==d?(R=t.jsxs(m,{breadcrumbs:f,children:[d,u]}),e[94]=m,e[95]=u,e[96]=f,e[97]=d,e[98]=R):R=e[98],R}function pe(a){switch(a){case"ok":return t.jsx($,{className:"size-5 text-green-500"});case"next_maint":return t.jsx(xe,{className:"size-5 text-yellow-500"});case"urgent":return t.jsx(oe,{className:"size-5 text-red-500"});default:return null}}function ue(a){switch(a){case"ok":return t.jsx(n,{className:"bg-green-500",children:"OK"});case"next_maint":return t.jsx(n,{className:"bg-yellow-500",children:"Próx. Mant."});case"urgent":return t.jsx(n,{className:"bg-red-500",children:"Urgente"});default:return t.jsx(n,{variant:"outline",children:a})}}function ve(a,e){const s=e.item.category;return a[s]||(a[s]=[]),a[s].push(e),a}export{Be as default};
