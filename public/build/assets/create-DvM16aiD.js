import{c as ze,r as Oe,j as s,u as Be,H as He}from"./app-BdiyVtwP.js";import{B as Fe}from"./button-xAfePOcQ.js";import{C as Le,a as qe,b as Ge,c as Ke}from"./card-DXh8U64W.js";import{C as We}from"./checkbox-edVi3FVX.js";import{I as se}from"./input-BjaQHf93.js";import{L as o}from"./label-u93ODZ2R.js";import{a as Ye,b as Je,c as Qe,S as Ue,d as Xe}from"./select-DOU_d7Pk.js";import{T as Ze}from"./textarea-CGT8g_Pi.js";import{Y as es,A as ss}from"./app-layout-CSJ5C79X.js";/* empty css            */import"./index-BhFFVPsB.js";import"./index-8PdPfJj1.js";import"./index-CqnVgCet.js";import"./check--A3dgnPr.js";import"./index-q7GIQJN5.js";import"./shield-CtYr_qvg.js";function Ns(r){const e=ze.c(158),{vehicles:u}=r;let te,ie,ae;e[0]===Symbol.for("react.memo_cache_sentinel")?(te=["Sistema de frenos (Incluye ABS)","Sistema Eléctrico y luces de emergencia","Motor y sistema de refrigeración","Suspensión y dirección","Cabina de Mando (Tableros, mando, radiocomunicación)","Equipamiento Hidraulico / Bombas de Agua","Escala / Sistema Extensible (si aplica)","Compartimientos de Herramientas","Sistema de carga de agua / estanque","Neumáticos y repuestos","Alarma sonora y luces baliza","Fugas de líquidos"],ie=Be,ae={vehicle_id:"",entry_date:new Date().toISOString().split("T")[0],tentative_exit_date:"",workshop_name:"Nemesio Vicuña 275, Puente Alto",description:"",tasks:[],issue_ids:[],responsible_person:"",mileage_in:"",traction:"4x2",fuel_type:"Diesel",transmission:"Manual",entry_checklist:te.reduce(ns,{})},e[0]=te,e[1]=ie,e[2]=ae):(te=e[0],ie=e[1],ae=e[2]);const{data:t,setData:i,post:Ee,processing:$e,errors:a,transform:Ve}=ie(ae);let re;e[3]!==t.tasks||e[4]!==i?(re=(l,c)=>{const d=`Revisar: ${l}`;let m=[...t.tasks];c==="Fallas"?m.includes(d)||m.push(d):m=m.filter(ee=>ee!==d),i(ee=>({...ee,entry_checklist:{...ee.entry_checklist,[l]:c},tasks:m}))},e[3]=t.tasks,e[4]=i,e[5]=re):re=e[5];const le=re,[n,De]=Oe.useState(null);let ne;e[6]!==t.vehicle_id||e[7]!==i||e[8]!==u?(ne=()=>{if(t.vehicle_id){const l=u.find(c=>c.id.toString()===t.vehicle_id);De(l||null),i("issue_ids",[])}else De(null)},e[6]=t.vehicle_id,e[7]=i,e[8]=u,e[9]=ne):ne=e[9];let ce;e[10]!==t.vehicle_id?(ce=[t.vehicle_id],e[10]=t.vehicle_id,e[11]=ce):ce=e[11],Oe.useEffect(ne,ce);let oe;e[12]!==t.issue_ids||e[13]!==i?(oe=l=>{const c=t.issue_ids;c.includes(l)?i("issue_ids",c.filter(d=>d!==l)):i("issue_ids",[...c,l])},e[12]=t.issue_ids,e[13]=i,e[14]=oe):oe=e[14];const Me=oe;let de;e[15]!==Ee||e[16]!==Ve?(de=l=>{l.preventDefault(),Ve(as),Ee("/vehicles/workshop")},e[15]=Ee,e[16]=Ve,e[17]=de):de=e[17];const Re=de;let me,ue;e[18]===Symbol.for("react.memo_cache_sentinel")?(me=[{title:"Panel Principal",href:"/dashboard"},{title:"Taller Mecánico",href:"/vehicles/workshop"},{title:"Nuevo Ingreso",href:"/vehicles/workshop/create"}],ue=s.jsx(He,{title:"Ingresar Vehículo a Taller"}),e[18]=me,e[19]=ue):(me=e[18],ue=e[19]);let he;e[20]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(Le,{children:s.jsx(qe,{children:"Ingresar Vehículo a Taller"})}),e[20]=he):he=e[20];let xe;e[21]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(o,{children:"Vehículo"}),e[21]=xe):xe=e[21];let h;e[22]!==i?(h=l=>i("vehicle_id",l),e[22]=i,e[23]=h):h=e[23];const Pe=t.vehicle_id;let fe;e[24]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(Ye,{children:s.jsx(Je,{placeholder:"Seleccione un vehículo"})}),e[24]=fe):fe=e[24];let x;e[25]!==u?(x=u.map(is),e[25]=u,e[26]=x):x=e[26];let f;e[27]!==x?(f=s.jsx(Qe,{children:x}),e[27]=x,e[28]=f):f=e[28];let p;e[29]!==t.vehicle_id||e[30]!==h||e[31]!==f?(p=s.jsxs(Ue,{onValueChange:h,value:Pe,children:[fe,f]}),e[29]=t.vehicle_id,e[30]=h,e[31]=f,e[32]=p):p=e[32];let g;e[33]!==a.vehicle_id?(g=a.vehicle_id&&s.jsx("p",{className:"text-sm text-destructive",children:a.vehicle_id}),e[33]=a.vehicle_id,e[34]=g):g=e[34];let b;e[35]!==p||e[36]!==g?(b=s.jsxs("div",{className:"space-y-2",children:[xe,p,g]}),e[35]=p,e[36]=g,e[37]=b):b=e[37];let pe;e[38]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(o,{children:"Taller / Lugar"}),e[38]=pe):pe=e[38];let _;e[39]!==t.workshop_name?(_=s.jsx(se,{value:t.workshop_name,readOnly:!0,className:"bg-muted text-muted-foreground"}),e[39]=t.workshop_name,e[40]=_):_=e[40];let j;e[41]!==a.workshop_name?(j=a.workshop_name&&s.jsx("p",{className:"text-sm text-destructive",children:a.workshop_name}),e[41]=a.workshop_name,e[42]=j):j=e[42];let v;e[43]!==_||e[44]!==j?(v=s.jsxs("div",{className:"space-y-2",children:[pe,_,j]}),e[43]=_,e[44]=j,e[45]=v):v=e[45];let y;e[46]!==b||e[47]!==v?(y=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[b,v]}),e[46]=b,e[47]=v,e[48]=y):y=e[48];let k;e[49]!==n?(k=n&&s.jsxs("div",{className:"rounded-md border bg-muted/50 p-4",children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Detalles del Vehículo"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Patente:"})," ",n.plate||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Marca/Modelo:"})," ",n.make," ",n.model]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Compañía:"})," ",n.company]})]}),n.active_maintenance_id&&s.jsxs("div",{className:"mt-4 rounded-md border border-yellow-500/20 bg-yellow-500/10 p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"font-bold text-yellow-500",children:"⚠️ Este vehículo ya se encuentra en taller."}),s.jsx(Fe,{asChild:!0,variant:"secondary",size:"sm",children:s.jsx("a",{href:`/vehicles/workshop/${n.active_maintenance_id}`,children:"Ver Orden Activa"})})]}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Si desea ingresar un nuevo registro, por favor finalice la orden anterior primero."})]})]}),e[49]=n,e[50]=k):k=e[50];let ge;e[51]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(o,{children:"Fecha de Ingreso"}),e[51]=ge):ge=e[51];let N;e[52]!==i?(N=l=>i("entry_date",l.target.value),e[52]=i,e[53]=N):N=e[53];let S;e[54]!==t.entry_date||e[55]!==N?(S=s.jsx(se,{type:"date",value:t.entry_date,onChange:N,onClick:ls}),e[54]=t.entry_date,e[55]=N,e[56]=S):S=e[56];let C;e[57]!==a.entry_date?(C=a.entry_date&&s.jsx("p",{className:"text-sm text-destructive",children:a.entry_date}),e[57]=a.entry_date,e[58]=C):C=e[58];let w;e[59]!==S||e[60]!==C?(w=s.jsxs("div",{className:"space-y-2",children:[ge,S,C]}),e[59]=S,e[60]=C,e[61]=w):w=e[61];let be;e[62]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(o,{children:"Fecha Tentativa Salida (Opcional)"}),e[62]=be):be=e[62];let T;e[63]!==i?(T=l=>i("tentative_exit_date",l.target.value),e[63]=i,e[64]=T):T=e[64];let I;e[65]!==t.tentative_exit_date||e[66]!==T?(I=s.jsxs("div",{className:"space-y-2",children:[be,s.jsx(se,{type:"date",value:t.tentative_exit_date,onChange:T,onClick:ts})]}),e[65]=t.tentative_exit_date,e[66]=T,e[67]=I):I=e[67];let A;e[68]!==w||e[69]!==I?(A=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[w,I]}),e[68]=w,e[69]=I,e[70]=A):A=e[70];let _e;e[71]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(o,{className:"mb-1 block text-sm font-medium",children:"Bombero Responsable"}),e[71]=_e):_e=e[71];let F;e[72]!==i?(F=l=>i("responsible_person",l.target.value),e[72]=i,e[73]=F):F=e[73];let E;e[74]!==t.responsible_person||e[75]!==F?(E=s.jsx(se,{type:"text",value:t.responsible_person,onChange:F,placeholder:"Nombre del responsable"}),e[74]=t.responsible_person,e[75]=F,e[76]=E):E=e[76];let $;e[77]!==a.responsible_person?($=a.responsible_person&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.responsible_person}),e[77]=a.responsible_person,e[78]=$):$=e[78];let V;e[79]!==E||e[80]!==$?(V=s.jsxs("div",{children:[_e,E,$]}),e[79]=E,e[80]=$,e[81]=V):V=e[81];let je;e[82]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(o,{className:"mb-1 block text-sm font-medium",children:"Kilometraje de Ingreso"}),e[82]=je):je=e[82];let M;e[83]!==i?(M=l=>i("mileage_in",l.target.value),e[83]=i,e[84]=M):M=e[84];let R;e[85]!==t.mileage_in||e[86]!==M?(R=s.jsx(se,{type:"number",value:t.mileage_in,onChange:M,placeholder:"0"}),e[85]=t.mileage_in,e[86]=M,e[87]=R):R=e[87];let D;e[88]!==a.mileage_in?(D=a.mileage_in&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.mileage_in}),e[88]=a.mileage_in,e[89]=D):D=e[89];let O;e[90]!==R||e[91]!==D?(O=s.jsxs("div",{children:[je,R,D]}),e[90]=R,e[91]=D,e[92]=O):O=e[92];let P;e[93]!==V||e[94]!==O?(P=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[V,O]}),e[93]=V,e[94]=O,e[95]=P):P=e[95];let ve;e[96]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(o,{className:"mb-2 block text-sm font-medium",children:"Tracción"}),e[96]=ve):ve=e[96];let ye;e[97]===Symbol.for("react.memo_cache_sentinel")?(ye=["4x2","4x4"],e[97]=ye):ye=e[97];let z;e[98]!==t.traction||e[99]!==i?(z=s.jsxs("div",{children:[ve,s.jsx("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:ye.map(l=>s.jsx("button",{type:"button",onClick:()=>i("traction",l),className:`flex-1 rounded px-3 py-1.5 text-sm font-medium transition-colors ${t.traction===l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:l},l))})]}),e[98]=t.traction,e[99]=i,e[100]=z):z=e[100];let ke;e[101]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(o,{className:"mb-2 block text-sm font-medium",children:"Transmisión"}),e[101]=ke):ke=e[101];let Ne;e[102]===Symbol.for("react.memo_cache_sentinel")?(Ne=["Manual","Automática"],e[102]=Ne):Ne=e[102];let B;e[103]!==t.transmission||e[104]!==i?(B=s.jsxs("div",{children:[ke,s.jsx("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:Ne.map(l=>s.jsx("button",{type:"button",onClick:()=>i("transmission",l),className:`flex-1 rounded px-3 py-1.5 text-sm font-medium transition-colors ${t.transmission===l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:l},l))})]}),e[103]=t.transmission,e[104]=i,e[105]=B):B=e[105];let Se;e[106]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(o,{className:"mb-2 block text-sm font-medium",children:"Combustible"}),e[106]=Se):Se=e[106];let Ce;e[107]===Symbol.for("react.memo_cache_sentinel")?(Ce=["Diesel","Gasolina","Eléctrico","Otro"],e[107]=Ce):Ce=e[107];let H;e[108]!==t.fuel_type||e[109]!==i?(H=s.jsxs("div",{children:[Se,s.jsx("div",{className:"flex flex-wrap gap-1 rounded-md bg-muted/50 p-1",children:Ce.map(l=>s.jsx("button",{type:"button",onClick:()=>i("fuel_type",l),className:`flex-1 rounded px-3 py-1.5 text-sm font-medium transition-colors ${t.fuel_type===l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:l},l))})]}),e[108]=t.fuel_type,e[109]=i,e[110]=H):H=e[110];let L;e[111]!==z||e[112]!==B||e[113]!==H?(L=s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[z,B,H]}),e[111]=z,e[112]=B,e[113]=H,e[114]=L):L=e[114];let we;e[115]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(es,{className:"size-4"})," ","Checklist de Ingreso"]}),e[115]=we):we=e[115];let q;e[116]!==t.entry_checklist||e[117]!==le?(q=s.jsxs("div",{className:"rounded-lg border p-4",children:[we,s.jsx("div",{className:"grid grid-cols-1 gap-3",children:te.map(l=>s.jsxs("div",{className:"flex flex-col gap-1.5 rounded-md border p-3 hover:bg-muted/30",children:[s.jsx("span",{className:"text-sm font-medium",children:l}),s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>le(l,"Funcional"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${t.entry_checklist[l]==="Funcional"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Funcional"}),s.jsx("button",{type:"button",onClick:()=>le(l,"Fallas"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${t.entry_checklist[l]==="Fallas"?"bg-red-100 text-red-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Fallas"}),s.jsx("button",{type:"button",onClick:()=>le(l,"N/A"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${t.entry_checklist[l]==="N/A"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"N/A"})]})]},l))})]}),e[116]=t.entry_checklist,e[117]=le,e[118]=q):q=e[118];let G;e[119]!==t.issue_ids||e[120]!==Me||e[121]!==n?(G=n&&n.issues.length>0&&s.jsxs("div",{className:"space-y-2 rounded-md border p-4",children:[s.jsx(o,{className:"text-base font-semibold",children:"Reportar Incidencias Existentes"}),s.jsx("div",{className:"space-y-2",children:n.issues.map(l=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(We,{id:`issue-${l.id}`,checked:t.issue_ids.includes(l.id),onCheckedChange:()=>Me(l.id)}),s.jsxs(o,{htmlFor:`issue-${l.id}`,className:"font-normal",children:[s.jsxs("span",{className:"font-semibold",children:[l.date,":"]})," ",l.description," ",s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l.severity,")"]})]})]},l.id))})]}),e[119]=t.issue_ids,e[120]=Me,e[121]=n,e[122]=G):G=e[122];let Te;e[123]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx(o,{children:"Trabajos a Realizar (Lista)"}),e[123]=Te):Te=e[123];let K;e[124]!==t.tasks||e[125]!==i?(K=t.tasks.map((l,c)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{value:l,onChange:d=>{const m=[...t.tasks];m[c]=d.target.value,i("tasks",m)},placeholder:`Trabajo #${c+1}`}),s.jsxs(Fe,{type:"button",variant:"destructive",size:"icon",onClick:()=>{const d=t.tasks.filter((m,ee)=>ee!==c);i("tasks",d)},children:[s.jsx("span",{className:"sr-only",children:"Eliminar"}),"×"]})]},c)),e[124]=t.tasks,e[125]=i,e[126]=K):K=e[126];let W;e[127]!==t.tasks||e[128]!==i?(W=s.jsx(Fe,{type:"button",variant:"outline",onClick:()=>i("tasks",[...t.tasks,""]),children:"+ Agregar Trabajo"}),e[127]=t.tasks,e[128]=i,e[129]=W):W=e[129];let Y;e[130]!==K||e[131]!==W?(Y=s.jsxs("div",{className:"space-y-2",children:[Te,s.jsxs("div",{className:"space-y-2",children:[K,W]})]}),e[130]=K,e[131]=W,e[132]=Y):Y=e[132];let Ie;e[133]===Symbol.for("react.memo_cache_sentinel")?(Ie=s.jsx(o,{children:"Observaciones Generales"}),e[133]=Ie):Ie=e[133];let J;e[134]!==i?(J=l=>i("description",l.target.value),e[134]=i,e[135]=J):J=e[135];let Q;e[136]!==t.description||e[137]!==J?(Q=s.jsx(Ze,{value:t.description,onChange:J,placeholder:"Detalles adicionales...",rows:3}),e[136]=t.description,e[137]=J,e[138]=Q):Q=e[138];let U;e[139]!==a.description?(U=a.description&&s.jsx("p",{className:"text-sm text-destructive",children:a.description}),e[139]=a.description,e[140]=U):U=e[140];let X;e[141]!==Q||e[142]!==U?(X=s.jsxs("div",{className:"space-y-2",children:[Ie,Q,U]}),e[141]=Q,e[142]=U,e[143]=X):X=e[143];let Z;e[144]!==$e?(Z=s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(Fe,{type:"submit",disabled:$e,children:"Registrar Ingreso"})}),e[144]=$e,e[145]=Z):Z=e[145];let Ae;return e[146]!==Re||e[147]!==y||e[148]!==k||e[149]!==A||e[150]!==P||e[151]!==L||e[152]!==q||e[153]!==G||e[154]!==Y||e[155]!==X||e[156]!==Z?(Ae=s.jsxs(ss,{breadcrumbs:me,children:[ue,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsx("div",{className:"mx-auto w-full max-w-3xl",children:s.jsxs(Ge,{children:[he,s.jsx(Ke,{children:s.jsxs("form",{onSubmit:Re,className:"space-y-6",children:[y,k,A,P,L,q,G,Y,X,Z]})})]})})})]}),e[146]=Re,e[147]=y,e[148]=k,e[149]=A,e[150]=P,e[151]=L,e[152]=q,e[153]=G,e[154]=Y,e[155]=X,e[156]=Z,e[157]=Ae):Ae=e[157],Ae}function ts(r){return r.currentTarget.showPicker()}function ls(r){return r.currentTarget.showPicker()}function is(r){return s.jsxs(Xe,{value:r.id.toString(),children:[r.name," (",r.company,")"]},r.id)}function as(r){return{...r,tasks:r.tasks.filter(rs)}}function rs(r){return r.trim()!==""}function ns(r,e){return{...r,[e]:"Funcional"}}export{Ns as default};
