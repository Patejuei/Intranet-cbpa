import{c as Be,r as Pe,u as Ve,j as t,H as Ge,L as we}from"./app-B9QcLIWa.js";import{B as He}from"./badge-eAW9tGW7.js";import{B as Y}from"./button-B8ZIXrdG.js";import{C as Oe,a as Te,b as $e,c as ze,d as Ue}from"./card-DruzLovC.js";import{e as Ye,b as Je,D as Ke,a as Qe,f as We,c as Xe,d as Ze}from"./dialog-DMDnH513.js";import{I as G}from"./input-DZa38r-y.js";import{L as U}from"./label-CFOF9-tx.js";import{F as et,c as tt,A as st}from"./app-layout-2OmtfUSy.js";import{A as lt}from"./arrow-left-YGYp4dOa.js";import{S as at}from"./square-pen-DX7dFeYT.js";import{H as it}from"./history-BHnrMYAp.js";/* empty css            */import"./index-CIQYj8wZ.js";import"./index-BkrslbVE.js";import"./index-q7GIQJN5.js";import"./shield-DgM9RD2J.js";function vt(l){const e=Be.c(138),{material:s,history:J}=l,[be,Ne]=Pe.useState(!1),ve=s.brand||"",Se=s.model||"",Ce=s.category||"",De=s.code||"";let K;e[0]!==s.company||e[1]!==s.product_name||e[2]!==s.stock_quantity||e[3]!==ve||e[4]!==Se||e[5]!==Ce||e[6]!==De?(K={product_name:s.product_name,brand:ve,model:Se,category:Ce,code:De,stock_quantity:s.stock_quantity,company:s.company},e[0]=s.company,e[1]=s.product_name,e[2]=s.stock_quantity,e[3]=ve,e[4]=Se,e[5]=Ce,e[6]=De,e[7]=K):K=e[7];const{data:a,setData:i,put:Ee,processing:ke,errors:Q}=Ve(K);let W;e[8]!==s.id||e[9]!==Ee?(W=n=>{n.preventDefault(),Ee(`/inventory/${s.id}`,{onSuccess:()=>Ne(!1)})},e[8]=s.id,e[9]=Ee,e[10]=W):W=e[10];const qe=W;let X,Z;e[11]===Symbol.for("react.memo_cache_sentinel")?(X={title:"Panel Principal",href:"/dashboard"},Z={title:"Inventario",href:"/inventory"},e[11]=X,e[12]=Z):(X=e[11],Z=e[12]);const Ae=`/inventory/${s.id}`;let r;e[13]!==s.product_name||e[14]!==Ae?(r=[X,Z,{title:s.product_name,href:Ae}],e[13]=s.product_name,e[14]=Ae,e[15]=r):r=e[15];const Ie=`Detalle: ${s.product_name}`;let c;e[16]!==Ie?(c=t.jsx(Ge,{title:Ie}),e[16]=Ie,e[17]=c):c=e[17];let ee;e[18]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Y,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(we,{href:"/inventory",children:t.jsx(lt,{className:"size-5"})})}),e[18]=ee):ee=e[18];let o;e[19]!==s.product_name?(o=t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s.product_name}),e[19]=s.product_name,e[20]=o):o=e[20];let te;e[21]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("p",{className:"text-muted-foreground",children:"Detalles e Historial de Movimientos"}),e[21]=te):te=e[21];let d;e[22]!==o?(d=t.jsxs("div",{className:"flex items-center gap-4",children:[ee,t.jsxs("div",{children:[o,te]})]}),e[22]=o,e[23]=d):d=e[23];let se;e[24]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Ye,{asChild:!0,children:t.jsxs(Y,{variant:"outline",className:"gap-2",children:[t.jsx(at,{className:"size-4"})," Editar"]})}),e[24]=se):se=e[24];let le;e[25]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs(Je,{children:[t.jsx(Ke,{children:"Editar Material"}),t.jsx(Qe,{children:"Modificar detalles del material o ajustar stock manualmente."})]}),e[25]=le):le=e[25];let ae;e[26]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(U,{htmlFor:"name",children:"Nombre"}),e[26]=ae):ae=e[26];let m;e[27]!==i?(m=n=>i("product_name",n.target.value),e[27]=i,e[28]=m):m=e[28];let h;e[29]!==a.product_name||e[30]!==m?(h=t.jsx(G,{id:"name",value:a.product_name,onChange:m,required:!0}),e[29]=a.product_name,e[30]=m,e[31]=h):h=e[31];let f;e[32]!==Q.product_name?(f=Q.product_name&&t.jsx("p",{className:"mt-1 text-xs text-red-500",children:Q.product_name}),e[32]=Q.product_name,e[33]=f):f=e[33];let x;e[34]!==h||e[35]!==f?(x=t.jsxs("div",{children:[ae,h,f]}),e[34]=h,e[35]=f,e[36]=x):x=e[36];let ie;e[37]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(U,{htmlFor:"brand",children:"Marca"}),e[37]=ie):ie=e[37];let u;e[38]!==i?(u=n=>i("brand",n.target.value),e[38]=i,e[39]=u):u=e[39];let p;e[40]!==a.brand||e[41]!==u?(p=t.jsxs("div",{children:[ie,t.jsx(G,{id:"brand",value:a.brand,onChange:u})]}),e[40]=a.brand,e[41]=u,e[42]=p):p=e[42];let ne;e[43]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(U,{htmlFor:"model",children:"Modelo"}),e[43]=ne):ne=e[43];let j;e[44]!==i?(j=n=>i("model",n.target.value),e[44]=i,e[45]=j):j=e[45];let g;e[46]!==a.model||e[47]!==j?(g=t.jsxs("div",{children:[ne,t.jsx(G,{id:"model",value:a.model,onChange:j})]}),e[46]=a.model,e[47]=j,e[48]=g):g=e[48];let _;e[49]!==p||e[50]!==g?(_=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p,g]}),e[49]=p,e[50]=g,e[51]=_):_=e[51];let re;e[52]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(U,{htmlFor:"category",children:"Categoría"}),e[52]=re):re=e[52];let y;e[53]!==i?(y=n=>i("category",n.target.value),e[53]=i,e[54]=y):y=e[54];let b;e[55]!==a.category||e[56]!==y?(b=t.jsxs("div",{children:[re,t.jsx(G,{id:"category",value:a.category,onChange:y})]}),e[55]=a.category,e[56]=y,e[57]=b):b=e[57];let ce;e[58]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(U,{htmlFor:"code",children:"Código/N°"}),e[58]=ce):ce=e[58];let N;e[59]!==i?(N=n=>i("code",n.target.value),e[59]=i,e[60]=N):N=e[60];let v;e[61]!==a.code||e[62]!==N?(v=t.jsxs("div",{children:[ce,t.jsx(G,{id:"code",value:a.code,onChange:N})]}),e[61]=a.code,e[62]=N,e[63]=v):v=e[63];let S;e[64]!==b||e[65]!==v?(S=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b,v]}),e[64]=b,e[65]=v,e[66]=S):S=e[66];let oe;e[67]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(U,{htmlFor:"stock",children:"Stock Actual"}),e[67]=oe):oe=e[67];let C;e[68]!==i?(C=n=>i("stock_quantity",parseInt(n.target.value)),e[68]=i,e[69]=C):C=e[69];let D;e[70]!==a.stock_quantity||e[71]!==C?(D=t.jsx(G,{id:"stock",type:"number",value:a.stock_quantity,onChange:C,required:!0}),e[70]=a.stock_quantity,e[71]=C,e[72]=D):D=e[72];let de;e[73]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Ajustar el stock aquí registrará un movimiento de edición."}),e[73]=de):de=e[73];let E;e[74]!==D?(E=t.jsxs("div",{children:[oe,D,de]}),e[74]=D,e[75]=E):E=e[75];let me;e[76]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Y,{type:"button",variant:"ghost",onClick:()=>Ne(!1),children:"Cancelar"}),e[76]=me):me=e[76];let k;e[77]!==ke?(k=t.jsxs(We,{children:[me,t.jsx(Y,{type:"submit",disabled:ke,children:"Guardar Cambios"})]}),e[77]=ke,e[78]=k):k=e[78];let q;e[79]!==qe||e[80]!==x||e[81]!==_||e[82]!==S||e[83]!==E||e[84]!==k?(q=t.jsxs(Xe,{children:[le,t.jsxs("form",{onSubmit:qe,className:"space-y-4 py-4",children:[x,_,S,E,k]})]}),e[79]=qe,e[80]=x,e[81]=_,e[82]=S,e[83]=E,e[84]=k,e[85]=q):q=e[85];let A;e[86]!==be||e[87]!==q?(A=t.jsxs(Ze,{open:be,onOpenChange:Ne,children:[se,q]}),e[86]=be,e[87]=q,e[88]=A):A=e[88];let I;e[89]!==d||e[90]!==A?(I=t.jsxs("div",{className:"flex items-center justify-between",children:[d,A]}),e[89]=d,e[90]=A,e[91]=I):I=e[91];let he;e[92]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(Oe,{children:t.jsxs(Te,{className:"flex items-center gap-2",children:[t.jsx(tt,{className:"size-5 text-primary"}),"Información del Material"]})}),e[92]=he):he=e[92];let fe;e[93]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Categoría"}),e[93]=fe):fe=e[93];const Me=s.category||"Sin Categoría";let M;e[94]!==Me?(M=t.jsxs("div",{children:[fe,t.jsx("p",{className:"text-sm font-semibold",children:Me})]}),e[94]=Me,e[95]=M):M=e[95];let xe;e[96]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Marca"}),e[96]=xe):xe=e[96];const Re=s.brand||"-";let R;e[97]!==Re?(R=t.jsxs("div",{children:[xe,t.jsx("p",{className:"text-sm",children:Re})]}),e[97]=Re,e[98]=R):R=e[98];let ue;e[99]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Modelo"}),e[99]=ue):ue=e[99];const Fe=s.model||"-";let F;e[100]!==Fe?(F=t.jsxs("div",{children:[ue,t.jsx("p",{className:"text-sm",children:Fe})]}),e[100]=Fe,e[101]=F):F=e[101];let L;e[102]!==R||e[103]!==F?(L=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[R,F]}),e[102]=R,e[103]=F,e[104]=L):L=e[104];let pe;e[105]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Código Interno"}),e[105]=pe):pe=e[105];let w;e[106]!==s.code?(w=s.code?t.jsx(He,{variant:"outline",className:"font-mono",children:s.code}):"-",e[106]=s.code,e[107]=w):w=e[107];let H;e[108]!==w?(H=t.jsxs("div",{children:[pe,t.jsx("div",{className:"mt-1",children:w})]}),e[108]=w,e[109]=H):H=e[109];let je;e[110]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Stock Actual"}),e[110]=je):je=e[110];const Le=s.stock_quantity>0?"bg-green-500":"bg-red-500";let O;e[111]!==s.stock_quantity||e[112]!==Le?(O=t.jsxs("div",{children:[je,t.jsx("div",{className:"mt-1",children:t.jsxs(He,{className:Le,children:[s.stock_quantity," unidades"]})})]}),e[111]=s.stock_quantity,e[112]=Le,e[113]=O):O=e[113];let T;e[114]!==s.document_path?(T=s.document_path&&t.jsx("div",{className:"border-t pt-4",children:t.jsx(Y,{variant:"outline",className:"w-full gap-2",asChild:!0,children:t.jsxs("a",{href:`/storage/${s.document_path}`,target:"_blank",rel:"noopener noreferrer",children:[t.jsx(et,{className:"size-4"}),"Ver Documento General"]})})}),e[114]=s.document_path,e[115]=T):T=e[115];let $;e[116]!==M||e[117]!==L||e[118]!==H||e[119]!==O||e[120]!==T?($=t.jsxs($e,{className:"h-fit md:col-span-1",children:[he,t.jsxs(ze,{className:"space-y-4",children:[M,L,H,O,T]})]}),e[116]=M,e[117]=L,e[118]=H,e[119]=O,e[120]=T,e[121]=$):$=e[121];let ge;e[122]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs(Oe,{children:[t.jsxs(Te,{className:"flex items-center gap-2",children:[t.jsx(it,{className:"size-5 text-primary"}),"Historial de Movimientos Unificado"]}),t.jsx(Ue,{children:"Registro completo de Entregas, Recepciones y Ajustes"})]}),e[122]=ge):ge=e[122];let _e;e[123]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("thead",{className:"bg-muted text-muted-foreground",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 font-medium",children:"Fecha"}),t.jsx("th",{className:"p-3 font-medium",children:"Tipo"}),t.jsx("th",{className:"p-3 font-medium",children:"Cambio"}),t.jsx("th",{className:"p-3 font-medium",children:"Descripción"}),t.jsx("th",{className:"p-3 font-medium",children:"Usuario"}),t.jsx("th",{className:"p-3 font-medium",children:"Ref"})]})}),e[123]=_e):_e=e[123];let z;e[124]!==J?(z=J.length>0?J.map(nt):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No hay historial unificado disponible."})}),e[124]=J,e[125]=z):z=e[125];let B;e[126]!==z?(B=t.jsxs($e,{className:"md:col-span-2",children:[ge,t.jsx(ze,{children:t.jsx("div",{className:"rounded-md border",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[_e,t.jsx("tbody",{className:"divide-y",children:z})]})})})})]}),e[126]=z,e[127]=B):B=e[127];let P;e[128]!==$||e[129]!==B?(P=t.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[$,B]}),e[128]=$,e[129]=B,e[130]=P):P=e[130];let V;e[131]!==I||e[132]!==P?(V=t.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[I,P]}),e[131]=I,e[132]=P,e[133]=V):V=e[133];let ye;return e[134]!==r||e[135]!==c||e[136]!==V?(ye=t.jsxs(st,{breadcrumbs:r,children:[c,V]}),e[134]=r,e[135]=c,e[136]=V,e[137]=ye):ye=e[137],ye}function nt(l){return t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"p-3",children:new Date(l.created_at).toLocaleString()}),t.jsx("td",{className:"p-3",children:t.jsx(He,{variant:l.type==="DELIVERY"||l.type==="RECEPTION"?"outline":l.type==="ADD"?"secondary":l.type==="REMOVE"?"destructive":"default",className:l.type==="DELIVERY"?"bg-blue-50 text-blue-700":l.type==="RECEPTION"?"bg-green-50 text-green-700":l.type==="ADD"?"bg-green-100 text-green-700":l.type==="REMOVE"?"bg-red-100 text-red-700":"",children:l.type})}),t.jsx("td",{className:"p-3 font-medium",children:t.jsxs("span",{className:l.quantity_change>0?"text-green-600":"text-red-600",children:[l.quantity_change>0?"+":"",l.quantity_change]})}),t.jsx("td",{className:"max-w-[200px] truncate p-3",title:l.description,children:l.description}),t.jsx("td",{className:"p-3 text-muted-foreground",children:l.user?.name||"-"}),t.jsxs("td",{className:"p-3",children:[l.reference_type?.includes("DeliveryCertificate")&&t.jsxs(we,{href:`/deliveries/${l.reference_id}`,className:"text-blue-500 hover:underline",children:["Acta #",l.reference_id]}),l.reference_type?.includes("ReceptionCertificate")&&t.jsxs(we,{href:`/receptions/${l.reference_id}`,className:"text-blue-500 hover:underline",children:["Acta #",l.reference_id]}),l.reference_type?.includes("EquipmentLog")&&t.jsx("span",{className:"text-xs text-muted-foreground",children:"Manual"})]})]},l.id)}export{vt as default};
