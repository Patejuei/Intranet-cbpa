import{r as Y,j as t,c as Z,u as Oe,H as qe}from"./app-CPM0qqBN.js";import{B as Ue}from"./badge-CudTdBLW.js";import{a as ve,B as Je}from"./button-CqEo9HDw.js";import{C as Ne,a as Ce,b as Qe,c as Se,d as Te}from"./card-CH3A71aL.js";import{I as p}from"./input-CVgy1s1V.js";import{L as h}from"./label-DtyO8ONr.js";import{S as ke,a as Fe,b as Ie,c as we,d as X}from"./select-BBnrt3Tn.js";import{c as We,a as _e,P as Xe,u as Ye}from"./index-BlbzEdsQ.js";import{y as De,z as Ze,I as et,E as tt,u as st,A as at}from"./app-layout-BRytu26V.js";import{P as je}from"./index-CWMEVgmi.js";import{T as it}from"./textarea-B3AsmIno.js";import{f as lt}from"./format-CSQe5d3I.js";/* empty css            */import"./index-B-snUCRd.js";import"./chevron-down-BYJQCYpr.js";import"./check-CqO1qPRE.js";import"./index-C4J_hXM0.js";import"./shield-DKSAdIwv.js";var be="Tabs",[rt,Et]=We(be,[De]),Ee=De(),[nt,ye]=rt(be),Re=Y.forwardRef((s,e)=>{const{__scopeTabs:l,value:a,onValueChange:r,defaultValue:o,orientation:i="horizontal",dir:c,activationMode:f="automatic",...x}=s,n=tt(c),[m,u]=Ye({prop:a,onChange:r,defaultProp:o??"",caller:be});return t.jsx(nt,{scope:l,baseId:st(),value:m,onValueChange:u,orientation:i,dir:n,activationMode:f,children:t.jsx(je.div,{dir:n,"data-orientation":i,...x,ref:e})})});Re.displayName=be;var Ve="TabsList",Be=Y.forwardRef((s,e)=>{const{__scopeTabs:l,loop:a=!0,...r}=s,o=ye(Ve,l),i=Ee(l);return t.jsx(Ze,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:a,children:t.jsx(je.div,{role:"tablist","aria-orientation":o.orientation,...r,ref:e})})});Be.displayName=Ve;var $e="TabsTrigger",Pe=Y.forwardRef((s,e)=>{const{__scopeTabs:l,value:a,disabled:r=!1,...o}=s,i=ye($e,l),c=Ee(l),f=Ge(i.baseId,a),x=He(i.baseId,a),n=a===i.value;return t.jsx(et,{asChild:!0,...c,focusable:!r,active:n,children:t.jsx(je.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":x,"data-state":n?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:f,...o,ref:e,onMouseDown:_e(s.onMouseDown,m=>{!r&&m.button===0&&m.ctrlKey===!1?i.onValueChange(a):m.preventDefault()}),onKeyDown:_e(s.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(a)}),onFocus:_e(s.onFocus,()=>{const m=i.activationMode!=="manual";!n&&!r&&m&&i.onValueChange(a)})})})});Pe.displayName=$e;var Le="TabsContent",Ke=Y.forwardRef((s,e)=>{const{__scopeTabs:l,value:a,forceMount:r,children:o,...i}=s,c=ye(Le,l),f=Ge(c.baseId,a),x=He(c.baseId,a),n=a===c.value,m=Y.useRef(n);return Y.useEffect(()=>{const u=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(u)},[]),t.jsx(Xe,{present:r||n,children:({present:u})=>t.jsx(je.div,{"data-state":n?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":f,hidden:!u,id:x,tabIndex:0,...i,ref:e,style:{...s.style,animationDuration:m.current?"0s":void 0},children:u&&o})})});Ke.displayName=Le;function Ge(s,e){return`${s}-trigger-${e}`}function He(s,e){return`${s}-content-${e}`}var ot=Re,ct=Be,dt=Pe,mt=Ke;function ut(s){const e=Z.c(8);let l,a;e[0]!==s?({className:l,...a}=s,e[0]=s,e[1]=l,e[2]=a):(l=e[1],a=e[2]);let r;e[3]!==l?(r=ve("flex flex-col gap-2",l),e[3]=l,e[4]=r):r=e[4];let o;return e[5]!==a||e[6]!==r?(o=t.jsx(ot,{"data-slot":"tabs",className:r,...a}),e[5]=a,e[6]=r,e[7]=o):o=e[7],o}function ht(s){const e=Z.c(8);let l,a;e[0]!==s?({className:l,...a}=s,e[0]=s,e[1]=l,e[2]=a):(l=e[1],a=e[2]);let r;e[3]!==l?(r=ve("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",l),e[3]=l,e[4]=r):r=e[4];let o;return e[5]!==a||e[6]!==r?(o=t.jsx(ct,{"data-slot":"tabs-list",className:r,...a}),e[5]=a,e[6]=r,e[7]=o):o=e[7],o}function Ae(s){const e=Z.c(8);let l,a;e[0]!==s?({className:l,...a}=s,e[0]=s,e[1]=l,e[2]=a):(l=e[1],a=e[2]);let r;e[3]!==l?(r=ve("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",l),e[3]=l,e[4]=r):r=e[4];let o;return e[5]!==a||e[6]!==r?(o=t.jsx(dt,{"data-slot":"tabs-trigger",className:r,...a}),e[5]=a,e[6]=r,e[7]=o):o=e[7],o}function Me(s){const e=Z.c(8);let l,a;e[0]!==s?({className:l,...a}=s,e[0]=s,e[1]=l,e[2]=a):(l=e[1],a=e[2]);let r;e[3]!==l?(r=ve("flex-1 outline-none",l),e[3]=l,e[4]=r):r=e[4];let o;return e[5]!==a||e[6]!==r?(o=t.jsx(mt,{"data-slot":"tabs-content",className:r,...a}),e[5]=a,e[6]=r,e[7]=o):o=e[7],o}function Rt(s){const e=Z.c(118),{logs:l,vehicles:a}=s;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=lt(new Date,"yyyy-MM-dd"),e[0]=r):r=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={vehicle_id:"",start_km:"",end_km:"",activity_type:"",destination:"",date:r,fuel_liters:"",fuel_coupon:"",receipt:null,observations:""},e[1]=o):o=e[1];const{data:i,setData:c,post:f,processing:x,errors:n,reset:m}=Oe(o);let u;e[2]!==f||e[3]!==m?(u=d=>{d.preventDefault(),f("/vehicles/logs",{onSuccess:()=>m()})},e[2]=f,e[3]=m,e[4]=u):u=e[4];const ge=u;let ee,te;e[5]===Symbol.for("react.memo_cache_sentinel")?(ee=[{title:"Material Mayor",href:"/vehicles/dashboard"},{title:"Bitácora",href:"/vehicles/logs"}],te=t.jsx(qe,{title:"Bitácora de Máquinas"}),e[5]=ee,e[6]=te):(ee=e[5],te=e[6]);let se;e[7]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Bitácora del Material Mayor"}),t.jsx("p",{className:"text-muted-foreground",children:"Control de kilometraje y movimientos de las unidades."})]}),e[7]=se):se=e[7];let ae;e[8]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs(ht,{className:"grid w-full grid-cols-2 md:w-[400px]",children:[t.jsx(Ae,{value:"register",children:"Registrar Movimiento"}),t.jsx(Ae,{value:"history",children:"Ver Bitácoras"})]}),e[8]=ae):ae=e[8];let ie;e[9]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs(Ne,{children:[t.jsx(Ce,{children:"Nueva Entrada de Bitácora"}),t.jsx(Qe,{children:"Registre la salida o movimiento de una unidad."})]}),e[9]=ie):ie=e[9];let le;e[10]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(h,{htmlFor:"vehicle",children:"Vehículo"}),e[10]=le):le=e[10];let v;e[11]!==c?(v=d=>c("vehicle_id",d),e[11]=c,e[12]=v):v=e[12];const ze=i.vehicle_id;let re;e[13]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Fe,{children:t.jsx(Ie,{placeholder:"Seleccione unidad"})}),e[13]=re):re=e[13];let j;e[14]!==a?(j=a.map(xt),e[14]=a,e[15]=j):j=e[15];let b;e[16]!==j?(b=t.jsx(we,{children:j}),e[16]=j,e[17]=b):b=e[17];let g;e[18]!==i.vehicle_id||e[19]!==v||e[20]!==b?(g=t.jsxs(ke,{onValueChange:v,value:ze,children:[re,b]}),e[18]=i.vehicle_id,e[19]=v,e[20]=b,e[21]=g):g=e[21];let _;e[22]!==n.vehicle_id?(_=n.vehicle_id&&t.jsx("p",{className:"text-sm text-destructive",children:n.vehicle_id}),e[22]=n.vehicle_id,e[23]=_):_=e[23];let y;e[24]!==g||e[25]!==_?(y=t.jsxs("div",{className:"space-y-2",children:[le,g,_]}),e[24]=g,e[25]=_,e[26]=y):y=e[26];let ne;e[27]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(h,{htmlFor:"date",children:"Fecha"}),e[27]=ne):ne=e[27];let N;e[28]!==c?(N=d=>c("date",d.target.value),e[28]=c,e[29]=N):N=e[29];let C;e[30]!==i.date||e[31]!==N?(C=t.jsx(p,{type:"date",value:i.date,onChange:N}),e[30]=i.date,e[31]=N,e[32]=C):C=e[32];let S;e[33]!==n.date?(S=n.date&&t.jsx("p",{className:"text-sm text-destructive",children:n.date}),e[33]=n.date,e[34]=S):S=e[34];let T;e[35]!==C||e[36]!==S?(T=t.jsxs("div",{className:"space-y-2",children:[ne,C,S]}),e[35]=C,e[36]=S,e[37]=T):T=e[37];let k;e[38]!==y||e[39]!==T?(k=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[y,T]}),e[38]=y,e[39]=T,e[40]=k):k=e[40];let oe;e[41]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(h,{htmlFor:"start_km",children:"Kilometraje Inicio"}),e[41]=oe):oe=e[41];let F;e[42]!==c?(F=d=>c("start_km",d.target.value),e[42]=c,e[43]=F):F=e[43];let I;e[44]!==i.start_km||e[45]!==F?(I=t.jsx(p,{type:"number",value:i.start_km,onChange:F}),e[44]=i.start_km,e[45]=F,e[46]=I):I=e[46];let w;e[47]!==n.start_km?(w=n.start_km&&t.jsx("p",{className:"text-sm text-destructive",children:n.start_km}),e[47]=n.start_km,e[48]=w):w=e[48];let A;e[49]!==I||e[50]!==w?(A=t.jsxs("div",{className:"space-y-2",children:[oe,I,w]}),e[49]=I,e[50]=w,e[51]=A):A=e[51];let ce;e[52]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(h,{htmlFor:"end_km",children:"Kilometraje Fin (Opcional)"}),e[52]=ce):ce=e[52];let M;e[53]!==c?(M=d=>c("end_km",d.target.value),e[53]=c,e[54]=M):M=e[54];let D;e[55]!==i.end_km||e[56]!==M?(D=t.jsx(p,{type:"number",value:i.end_km,onChange:M}),e[55]=i.end_km,e[56]=M,e[57]=D):D=e[57];let E;e[58]!==n.end_km?(E=n.end_km&&t.jsx("p",{className:"text-sm text-destructive",children:n.end_km}),e[58]=n.end_km,e[59]=E):E=e[59];let R;e[60]!==D||e[61]!==E?(R=t.jsxs("div",{className:"space-y-2",children:[ce,D,E]}),e[60]=D,e[61]=E,e[62]=R):R=e[62];let V;e[63]!==A||e[64]!==R?(V=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[A,R]}),e[63]=A,e[64]=R,e[65]=V):V=e[65];let de;e[66]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(h,{htmlFor:"activity",children:"Tipo de Actividad"}),e[66]=de):de=e[66];let B;e[67]!==c?(B=d=>c("activity_type",d),e[67]=c,e[68]=B):B=e[68];let me;e[69]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Fe,{children:t.jsx(Ie,{placeholder:"Seleccione tipo"})}),e[69]=me):me=e[69];let ue;e[70]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsxs(we,{children:[t.jsx(X,{value:"Emergencia",children:"Emergencia (10-0)"}),t.jsx(X,{value:"Academia",children:"Academia / Ejercicio"}),t.jsx(X,{value:"Tramite",children:"Trámite Administrativo"}),t.jsx(X,{value:"Taller",children:"Traslado a Taller"}),t.jsx(X,{value:"CargaCombustible",children:"Carga de Combustible"})]}),e[70]=ue):ue=e[70];let $;e[71]!==i.activity_type||e[72]!==B?($=t.jsxs(ke,{onValueChange:B,value:i.activity_type,children:[me,ue]}),e[71]=i.activity_type,e[72]=B,e[73]=$):$=e[73];let P;e[74]!==n.activity_type?(P=n.activity_type&&t.jsx("p",{className:"text-sm text-destructive",children:n.activity_type}),e[74]=n.activity_type,e[75]=P):P=e[75];let L;e[76]!==$||e[77]!==P?(L=t.jsxs("div",{className:"space-y-2",children:[de,$,P]}),e[76]=$,e[77]=P,e[78]=L):L=e[78];let K;e[79]!==i.activity_type||e[80]!==i.fuel_coupon||e[81]!==i.fuel_liters||e[82]!==i.observations||e[83]!==c?(K=i.activity_type==="CargaCombustible"&&t.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[t.jsx("h3",{className:"font-semibold",children:"Detalle de Carga"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(h,{htmlFor:"fuel_liters",children:"Litros Cargados"}),t.jsx(p,{type:"number",step:"0.01",value:i.fuel_liters,onChange:d=>c("fuel_liters",d.target.value),placeholder:"0.0"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(h,{htmlFor:"fuel_coupon",children:"Nº Cupón / Vale"}),t.jsx(p,{value:i.fuel_coupon,onChange:d=>c("fuel_coupon",d.target.value),placeholder:"Nº Documento"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(h,{htmlFor:"receipt",children:"Fotografía Boleta/Vale"}),t.jsx(p,{id:"receipt",type:"file",accept:"image/*",onChange:d=>c("receipt",d.target.files?d.target.files[0]:null)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(h,{htmlFor:"observations",children:"Observaciones"}),t.jsx(it,{value:i.observations,onChange:d=>c("observations",d.target.value),placeholder:"Detalles adicionales..."})]})]}),e[79]=i.activity_type,e[80]=i.fuel_coupon,e[81]=i.fuel_liters,e[82]=i.observations,e[83]=c,e[84]=K):K=e[84];let he;e[85]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(h,{htmlFor:"destination",children:"Destino / Detalle"}),e[85]=he):he=e[85];let G;e[86]!==c?(G=d=>c("destination",d.target.value),e[86]=c,e[87]=G):G=e[87];let H;e[88]!==i.destination||e[89]!==G?(H=t.jsx(p,{value:i.destination,onChange:G,placeholder:"Dirección o lugar de destino"}),e[88]=i.destination,e[89]=G,e[90]=H):H=e[90];let z;e[91]!==n.destination?(z=n.destination&&t.jsx("p",{className:"text-sm text-destructive",children:n.destination}),e[91]=n.destination,e[92]=z):z=e[92];let O;e[93]!==H||e[94]!==z?(O=t.jsxs("div",{className:"space-y-2",children:[he,H,z]}),e[93]=H,e[94]=z,e[95]=O):O=e[95];let q;e[96]!==x?(q=t.jsx(Je,{type:"submit",disabled:x,children:"Registrar Movimiento"}),e[96]=x,e[97]=q):q=e[97];let U;e[98]!==ge||e[99]!==k||e[100]!==V||e[101]!==L||e[102]!==K||e[103]!==O||e[104]!==q?(U=t.jsx(Me,{value:"register",children:t.jsxs(Se,{children:[ie,t.jsx(Te,{children:t.jsxs("form",{onSubmit:ge,className:"max-w-2xl space-y-4",children:[k,V,L,K,O,q]})})]})}),e[98]=ge,e[99]=k,e[100]=V,e[101]=L,e[102]=K,e[103]=O,e[104]=q,e[105]=U):U=e[105];let fe;e[106]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(Ne,{children:t.jsx(Ce,{children:"Historial de Bitácoras"})}),e[106]=fe):fe=e[106];let xe;e[107]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Fecha"}),t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Unidad"}),t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Actividad"}),t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Destino"}),t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Km Salida"}),t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Km Llegada"}),t.jsx("th",{className:"h-12 px-4 text-left font-medium",children:"Conductor"})]})}),e[107]=xe):xe=e[107];let J;e[108]!==l.data?(J=l.data.map(ft),e[108]=l.data,e[109]=J):J=e[109];let Q;e[110]!==l.data.length?(Q=l.data.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-4 text-center text-muted-foreground",children:"No hay registros."})}),e[110]=l.data.length,e[111]=Q):Q=e[111];let W;e[112]!==J||e[113]!==Q?(W=t.jsx(Me,{value:"history",children:t.jsxs(Se,{children:[fe,t.jsx(Te,{children:t.jsx("div",{className:"rounded-md border",children:t.jsxs("table",{className:"w-full text-sm",children:[xe,t.jsxs("tbody",{children:[J,Q]})]})})})]})}),e[112]=J,e[113]=Q,e[114]=W):W=e[114];let pe;return e[115]!==U||e[116]!==W?(pe=t.jsxs(at,{breadcrumbs:ee,children:[te,t.jsxs("div",{className:"flex h-full flex-col gap-6 p-4",children:[se,t.jsxs(ut,{defaultValue:"register",className:"w-full",children:[ae,U,W]})]})]}),e[115]=U,e[116]=W,e[117]=pe):pe=e[117],pe}function ft(s){return t.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[t.jsx("td",{className:"p-4",children:s.date}),t.jsx("td",{className:"p-4 font-medium",children:s.vehicle.name}),t.jsx("td",{className:"p-4",children:t.jsx(Ue,{variant:"outline",children:s.activity_type})}),t.jsx("td",{className:"p-4",children:s.destination}),t.jsx("td",{className:"p-4",children:s.start_km}),t.jsx("td",{className:"p-4",children:s.end_km||"-"}),t.jsx("td",{className:"p-4",children:s.driver?.name})]},s.id)}function xt(s){return t.jsx(X,{value:s.id.toString(),children:s.name},s.id)}export{Rt as default};
