import{c as H,r as V,j as e,H as J,L as a}from"./app-Dnl-93jT.js";import{B as K,M as A,A as Y}from"./app-layout-DrQubH2a.js";import{a as G}from"./button-Dwf9uOK6.js";/* empty css            */import"./index-TO5EoELk.js";import"./index-pwTMw1eK.js";import"./index-C4J_hXM0.js";import"./shield-Ccixr6it.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],X=G("Clock",Q),Z=[{title:"Panel Principal",href:"/dashboard"}],ee="recent_modules";function Ne(t){const s=H.c(43),{upcomingBatteries:h,pendingTickets:l,respondedTickets:u,vehiclesStopped:f,pendingIncidents:g,vehiclesInWorkshop:j}=t;let b;s[0]!==h?(b=h===void 0?[]:h,s[0]=h,s[1]=b):b=s[1];const N=b;let v;s[2]!==l?(v=l===void 0?[]:l,s[2]=l,s[3]=v):v=s[3];const y=v;let w;s[4]!==u?(w=u===void 0?[]:u,s[4]=u,s[5]=w):w=s[5];const _=w;let S;s[6]!==f?(S=f===void 0?[]:f,s[6]=f,s[7]=S):S=s[7];const k=S;let D;s[8]!==g?(D=g===void 0?[]:g,s[8]=g,s[9]=D):D=s[9];const E=D;let T;s[10]!==j?(T=j===void 0?[]:j,s[10]=j,s[11]=T):T=s[11];const z=T;let I;s[12]===Symbol.for("react.memo_cache_sentinel")?(I=[],s[12]=I):I=s[12];const[L,F]=V.useState(I);let M,R;s[13]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{try{const r=localStorage.getItem(ee);if(r){const W=JSON.parse(r).map(me).filter(oe);F(W)}}catch(r){console.error("Error loading recent modules",r)}},R=[],s[13]=M,s[14]=R):(M=s[13],R=s[14]),V.useEffect(M,R);const U=ce;let q;s[15]===Symbol.for("react.memo_cache_sentinel")?(q=e.jsx(J,{title:"Material Menor - CBPA"}),s[15]=q):q=s[15];let d;s[16]!==y?(d=y.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-yellow-500"}),"Tickets Pendientes"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes que requieren atención."})]}),e.jsx("div",{className:"space-y-3",children:y.map(ie)})]}),s[16]=y,s[17]=d):d=s[17];let n;s[18]!==_?(n=_.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-blue-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-blue-500"}),"Tickets en Proceso"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes con respuesta de Comandancia."})]}),e.jsx("div",{className:"space-y-3",children:_.map(ne)})]}),s[18]=_,s[19]=n):n=s[19];let i;s[20]!==k?(i=k.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-red-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-red-500"}),"Material Fuera de Servicio"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos detenidos o en taller."})]}),e.jsx("div",{className:"space-y-3",children:k.map(de)})]}),s[20]=k,s[21]=i):i=s[21];let c;s[22]!==E?(c=E.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-orange-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-orange-500"}),"Incidencias Pendientes"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Novedades reportadas sin resolver."})]}),e.jsx("div",{className:"space-y-3",children:E.map(le)})]}),s[22]=E,s[23]=c):c=s[23];let o;s[24]!==i||s[25]!==c?(o=e.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i,c]}),s[24]=i,s[25]=c,s[26]=o):o=s[26];let m;s[27]!==z?(m=z.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-600 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-yellow-600"}),"Unidades en Taller"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos con orden de trabajo activa."})]}),e.jsx("div",{className:"space-y-3",children:z.map(ae)})]}),s[27]=z,s[28]=m):m=s[28];let x;s[29]!==N?(x=N.length>0&&e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary",children:e.jsx(K,{className:"size-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Próximos Cambios de Baterías"}),e.jsx("p",{className:"text-muted-foreground",children:"Equipos que requieren atención pronto"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-left font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-2",children:"Fecha"}),e.jsx("th",{className:"pb-2",children:"Días"}),e.jsx("th",{className:"pb-2",children:"Equipo"}),e.jsx("th",{className:"pb-2",children:"Responsable"}),e.jsx("th",{className:"pb-2",children:"Compañía"})]})}),e.jsx("tbody",{className:"divide-y",children:N.map(r=>{const O=U(r.next_change_date);return e.jsxs("tr",{children:[e.jsx("td",{className:"py-3",children:new Date(r.next_change_date).toLocaleDateString()}),e.jsx("td",{className:"py-3",children:e.jsxs("span",{className:`rounded px-2 py-1 font-bold ${O<=3?"bg-destructive/20 text-destructive":"bg-muted text-muted-foreground"}`,children:[O," días"]})}),e.jsx("td",{className:"py-3",children:r.equipment_type}),e.jsx("td",{className:"py-3",children:r.responsible_name}),e.jsx("td",{className:"py-3",children:r.company})]},r.id)})})]})})]}),s[29]=N,s[30]=x):x=s[30];let p;s[31]!==L?(p=L.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(X,{className:"size-4"}),e.jsx("h2",{className:"text-sm font-medium tracking-wider uppercase",children:"Visitados Recientemente"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:L.map(re)})]}),s[31]=L,s[32]=p):p=s[32];let B;s[33]===Symbol.for("react.memo_cache_sentinel")?(B=e.jsx("h2",{className:"text-sm font-medium tracking-wider text-muted-foreground uppercase",children:"Todos los Módulos"}),s[33]=B):B=s[33];let C;s[34]===Symbol.for("react.memo_cache_sentinel")?(C=e.jsxs("div",{className:"space-y-4",children:[B,e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:A.filter(te).map(se)})]}),s[34]=C):C=s[34];let P;s[35]===Symbol.for("react.memo_cache_sentinel")?(P=e.jsxs("div",{className:"rounded-xl border bg-muted/40 p-6",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Bienvenido al Sistema de Material Menor"}),e.jsx("p",{className:"text-muted-foreground",children:"Seleccione una opción de arriba para comenzar sus operaciones."})]}),s[35]=P):P=s[35];let $;return s[36]!==d||s[37]!==n||s[38]!==o||s[39]!==m||s[40]!==x||s[41]!==p?($=e.jsxs(Y,{breadcrumbs:Z,children:[q,e.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[d,n,o,m,x,p,C,P]})]}),s[36]=d,s[37]=n,s[38]=o,s[39]=m,s[40]=x,s[41]=p,s[42]=$):$=s[42],$}function se(t){const s=t.icon;return e.jsx(a,{href:t.href,className:"group relative overflow-hidden rounded-xl border bg-card p-6 shadow-sm transition-all hover:border-primary hover:shadow-md",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:e.jsx(s,{className:"size-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]})},t.key)}function te(t){return!t.key.startsWith("admin-")}function re(t){const s=t.icon;return e.jsxs(a,{href:t.href,className:"group relative flex items-center gap-3 overflow-hidden rounded-lg border bg-card p-4 shadow-sm transition-all hover:border-primary hover:shadow-md",children:[e.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:e.jsx(s,{className:"size-5"})}),e.jsx("div",{children:e.jsx("h3",{className:"leading-none font-medium",children:t.title})})]},t.key)}function ae(t){const s=t.maintenances?.[0];return e.jsx(a,{href:`/vehicles/status/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold",children:t.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.company,")"]})]}),s?e.jsxs("p",{className:"text-xs font-medium text-yellow-700",children:[s.workshop_name," ","-"," ",s.description]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sin detalles de orden."})]}),s?.entry_date&&e.jsxs("div",{className:"flex items-center gap-1 font-mono text-xs text-muted-foreground",children:["Ingreso:"," ",new Date(s.entry_date).toLocaleDateString()]})]})},t.id)}function le(t){return e.jsx(a,{href:"/vehicles/incidents",className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"line-clamp-1 font-medium",children:[t.vehicle.name," -"," ",t.description]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reportado:"," ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"rounded bg-orange-100 px-2 py-1 text-xs text-orange-700",children:t.severity})]})},t.id)}function de(t){return e.jsx(a,{href:`/vehicles/status/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.company})]}),e.jsx("div",{className:`rounded px-2 py-1 text-xs font-medium ${t.status==="Out of Service"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.status==="Out of Service"?"Fuera de Servicio":"En Taller"})]})},t.id)}function ne(t){return e.jsx(a,{href:`/tickets/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estado: ",t.status]})]}),e.jsx("div",{className:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-700",children:"Ver Respuesta"})]})},t.id)}function ie(t){return e.jsx(a,{href:`/tickets/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.user.company," -"," ",t.user.name]})]}),e.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()})]})},t.id)}function ce(t){const s=new Date,l=new Date(t).getTime()-s.getTime();return Math.ceil(l/864e5)}function oe(t){return!!t}function me(t){return A.find(s=>s.key===t)}export{Ne as default};
