import{c as Pe,r as De,j as s,u as ze,H as Be}from"./app-DTzGg31E.js";import{B as Fe}from"./button-C4eVOrdx.js";import{C as He,a as Le,b as qe,c as Ge}from"./card-DKIuBdkK.js";import{C as Ke}from"./checkbox-DzJRVB0_.js";import{I as se}from"./input-B20kPqeN.js";import{L as c}from"./label-DXmgNe88.js";import{a as We,b as Ye,c as Je,S as Qe,d as Ue}from"./select-DDwLlzdA.js";import{T as Xe}from"./textarea-D-khDmCp.js";import{Y as Ze,A as es}from"./app-layout-DbAy9MxU.js";/* empty css            */import"./index-BqADuB3m.js";import"./index-C2aZpJh8.js";import"./index-hZcGNbU4.js";import"./check-Bk6zulOm.js";import"./index-q7GIQJN5.js";import"./shield-DFV9Q0l-.js";function vs(o){const e=Pe.c(157),{vehicles:h}=o;let te,ie,ae;e[0]===Symbol.for("react.memo_cache_sentinel")?(te=["Sistema de frenos (Incluye ABS)","Sistema Eléctrico y luces de emergencia","Motor y sistema de refrigeración","Suspensión y dirección","Cabina de Mando (Tableros, mando, radiocomunicación)","Equipamiento Hidraulico / Bombas de Agua","Escala / Sistema Extensible (si aplica)","Compartimientos de Herramientas","Sistema de carga de agua / estanque","Neumáticos y repuestos","Alarma sonora y luces baliza","Fugas de líquidos"],ie=ze,ae={vehicle_id:"",entry_date:new Date().toISOString().split("T")[0],tentative_exit_date:"",workshop_name:"Nemesio Vicuña 275, Puente Alto",description:"",tasks:[],issue_ids:[],responsible_person:"",mileage_in:"",traction:"4x2",fuel_type:"Diesel",transmission:"Manual",entry_checklist:te.reduce(is,{})},e[0]=te,e[1]=ie,e[2]=ae):(te=e[0],ie=e[1],ae=e[2]);const{data:t,setData:i,post:Ee,processing:$e,errors:a}=ie(ae);let re;e[3]!==t.tasks||e[4]!==i?(re=(l,n)=>{const d=`Revisar: ${l}`;let m=[...t.tasks];n==="Fallas"?m.includes(d)||m.push(d):m=m.filter(ee=>ee!==d),i(ee=>({...ee,entry_checklist:{...ee.entry_checklist,[l]:n},tasks:m}))},e[3]=t.tasks,e[4]=i,e[5]=re):re=e[5];const le=re,[r,Re]=De.useState(null);let ne;e[6]!==t.vehicle_id||e[7]!==i||e[8]!==h?(ne=()=>{if(t.vehicle_id){const l=h.find(n=>n.id.toString()===t.vehicle_id);Re(l||null),i("issue_ids",[])}else Re(null)},e[6]=t.vehicle_id,e[7]=i,e[8]=h,e[9]=ne):ne=e[9];let ce;e[10]!==t.vehicle_id?(ce=[t.vehicle_id],e[10]=t.vehicle_id,e[11]=ce):ce=e[11],De.useEffect(ne,ce);let oe;e[12]!==t.issue_ids||e[13]!==i?(oe=l=>{const n=t.issue_ids;n.includes(l)?i("issue_ids",n.filter(d=>d!==l)):i("issue_ids",[...n,l])},e[12]=t.issue_ids,e[13]=i,e[14]=oe):oe=e[14];const Ve=oe;let de;e[15]!==Ee?(de=l=>{l.preventDefault(),Ee("/vehicles/workshop")},e[15]=Ee,e[16]=de):de=e[16];const Me=de;let me,he;e[17]===Symbol.for("react.memo_cache_sentinel")?(me=[{title:"Panel Principal",href:"/dashboard"},{title:"Taller Mecánico",href:"/vehicles/workshop"},{title:"Nuevo Ingreso",href:"/vehicles/workshop/create"}],he=s.jsx(Be,{title:"Ingresar Vehículo a Taller"}),e[17]=me,e[18]=he):(me=e[17],he=e[18]);let ue;e[19]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(He,{children:s.jsx(Le,{children:"Ingresar Vehículo a Taller"})}),e[19]=ue):ue=e[19];let xe;e[20]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(c,{children:"Vehículo"}),e[20]=xe):xe=e[20];let u;e[21]!==i?(u=l=>i("vehicle_id",l),e[21]=i,e[22]=u):u=e[22];const Oe=t.vehicle_id;let fe;e[23]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(We,{children:s.jsx(Ye,{placeholder:"Seleccione un vehículo"})}),e[23]=fe):fe=e[23];let x;e[24]!==h?(x=h.map(ls),e[24]=h,e[25]=x):x=e[25];let f;e[26]!==x?(f=s.jsx(Je,{children:x}),e[26]=x,e[27]=f):f=e[27];let p;e[28]!==t.vehicle_id||e[29]!==u||e[30]!==f?(p=s.jsxs(Qe,{onValueChange:u,value:Oe,children:[fe,f]}),e[28]=t.vehicle_id,e[29]=u,e[30]=f,e[31]=p):p=e[31];let g;e[32]!==a.vehicle_id?(g=a.vehicle_id&&s.jsx("p",{className:"text-sm text-destructive",children:a.vehicle_id}),e[32]=a.vehicle_id,e[33]=g):g=e[33];let b;e[34]!==p||e[35]!==g?(b=s.jsxs("div",{className:"space-y-2",children:[xe,p,g]}),e[34]=p,e[35]=g,e[36]=b):b=e[36];let pe;e[37]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(c,{children:"Taller / Lugar"}),e[37]=pe):pe=e[37];let _;e[38]!==t.workshop_name?(_=s.jsx(se,{value:t.workshop_name,readOnly:!0,className:"bg-muted text-muted-foreground"}),e[38]=t.workshop_name,e[39]=_):_=e[39];let j;e[40]!==a.workshop_name?(j=a.workshop_name&&s.jsx("p",{className:"text-sm text-destructive",children:a.workshop_name}),e[40]=a.workshop_name,e[41]=j):j=e[41];let v;e[42]!==_||e[43]!==j?(v=s.jsxs("div",{className:"space-y-2",children:[pe,_,j]}),e[42]=_,e[43]=j,e[44]=v):v=e[44];let y;e[45]!==b||e[46]!==v?(y=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[b,v]}),e[45]=b,e[46]=v,e[47]=y):y=e[47];let k;e[48]!==r?(k=r&&s.jsxs("div",{className:"rounded-md border bg-muted/50 p-4",children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Detalles del Vehículo"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Patente:"})," ",r.plate||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Marca/Modelo:"})," ",r.make," ",r.model]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Compañía:"})," ",r.company]})]}),r.active_maintenance_id&&s.jsxs("div",{className:"mt-4 rounded-md border border-yellow-500/20 bg-yellow-500/10 p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"font-bold text-yellow-500",children:"⚠️ Este vehículo ya se encuentra en taller."}),s.jsx(Fe,{asChild:!0,variant:"secondary",size:"sm",children:s.jsx("a",{href:`/vehicles/workshop/${r.active_maintenance_id}`,children:"Ver Orden Activa"})})]}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Si desea ingresar un nuevo registro, por favor finalice la orden anterior primero."})]})]}),e[48]=r,e[49]=k):k=e[49];let ge;e[50]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(c,{children:"Fecha de Ingreso"}),e[50]=ge):ge=e[50];let N;e[51]!==i?(N=l=>i("entry_date",l.target.value),e[51]=i,e[52]=N):N=e[52];let S;e[53]!==t.entry_date||e[54]!==N?(S=s.jsx(se,{type:"date",value:t.entry_date,onChange:N,onClick:ts}),e[53]=t.entry_date,e[54]=N,e[55]=S):S=e[55];let C;e[56]!==a.entry_date?(C=a.entry_date&&s.jsx("p",{className:"text-sm text-destructive",children:a.entry_date}),e[56]=a.entry_date,e[57]=C):C=e[57];let w;e[58]!==S||e[59]!==C?(w=s.jsxs("div",{className:"space-y-2",children:[ge,S,C]}),e[58]=S,e[59]=C,e[60]=w):w=e[60];let be;e[61]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(c,{children:"Fecha Tentativa Salida (Opcional)"}),e[61]=be):be=e[61];let T;e[62]!==i?(T=l=>i("tentative_exit_date",l.target.value),e[62]=i,e[63]=T):T=e[63];let I;e[64]!==t.tentative_exit_date||e[65]!==T?(I=s.jsxs("div",{className:"space-y-2",children:[be,s.jsx(se,{type:"date",value:t.tentative_exit_date,onChange:T,onClick:ss})]}),e[64]=t.tentative_exit_date,e[65]=T,e[66]=I):I=e[66];let A;e[67]!==w||e[68]!==I?(A=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[w,I]}),e[67]=w,e[68]=I,e[69]=A):A=e[69];let _e;e[70]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(c,{className:"mb-1 block text-sm font-medium",children:"Bombero Responsable"}),e[70]=_e):_e=e[70];let F;e[71]!==i?(F=l=>i("responsible_person",l.target.value),e[71]=i,e[72]=F):F=e[72];let E;e[73]!==t.responsible_person||e[74]!==F?(E=s.jsx(se,{type:"text",value:t.responsible_person,onChange:F,placeholder:"Nombre del responsable"}),e[73]=t.responsible_person,e[74]=F,e[75]=E):E=e[75];let $;e[76]!==a.responsible_person?($=a.responsible_person&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.responsible_person}),e[76]=a.responsible_person,e[77]=$):$=e[77];let V;e[78]!==E||e[79]!==$?(V=s.jsxs("div",{children:[_e,E,$]}),e[78]=E,e[79]=$,e[80]=V):V=e[80];let je;e[81]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(c,{className:"mb-1 block text-sm font-medium",children:"Kilometraje de Ingreso"}),e[81]=je):je=e[81];let M;e[82]!==i?(M=l=>i("mileage_in",l.target.value),e[82]=i,e[83]=M):M=e[83];let R;e[84]!==t.mileage_in||e[85]!==M?(R=s.jsx(se,{type:"number",value:t.mileage_in,onChange:M,placeholder:"0"}),e[84]=t.mileage_in,e[85]=M,e[86]=R):R=e[86];let D;e[87]!==a.mileage_in?(D=a.mileage_in&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.mileage_in}),e[87]=a.mileage_in,e[88]=D):D=e[88];let O;e[89]!==R||e[90]!==D?(O=s.jsxs("div",{children:[je,R,D]}),e[89]=R,e[90]=D,e[91]=O):O=e[91];let P;e[92]!==V||e[93]!==O?(P=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[V,O]}),e[92]=V,e[93]=O,e[94]=P):P=e[94];let ve;e[95]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(c,{className:"mb-2 block text-sm font-medium",children:"Tracción"}),e[95]=ve):ve=e[95];let ye;e[96]===Symbol.for("react.memo_cache_sentinel")?(ye=["4x2","4x4"],e[96]=ye):ye=e[96];let z;e[97]!==t.traction||e[98]!==i?(z=s.jsxs("div",{children:[ve,s.jsx("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:ye.map(l=>s.jsx("button",{type:"button",onClick:()=>i("traction",l),className:`flex-1 rounded px-3 py-1.5 text-sm font-medium transition-colors ${t.traction===l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:l},l))})]}),e[97]=t.traction,e[98]=i,e[99]=z):z=e[99];let ke;e[100]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(c,{className:"mb-2 block text-sm font-medium",children:"Transmisión"}),e[100]=ke):ke=e[100];let Ne;e[101]===Symbol.for("react.memo_cache_sentinel")?(Ne=["Manual","Automática"],e[101]=Ne):Ne=e[101];let B;e[102]!==t.transmission||e[103]!==i?(B=s.jsxs("div",{children:[ke,s.jsx("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:Ne.map(l=>s.jsx("button",{type:"button",onClick:()=>i("transmission",l),className:`flex-1 rounded px-3 py-1.5 text-sm font-medium transition-colors ${t.transmission===l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:l},l))})]}),e[102]=t.transmission,e[103]=i,e[104]=B):B=e[104];let Se;e[105]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(c,{className:"mb-2 block text-sm font-medium",children:"Combustible"}),e[105]=Se):Se=e[105];let Ce;e[106]===Symbol.for("react.memo_cache_sentinel")?(Ce=["Diesel","Gasolina","Eléctrico","Otro"],e[106]=Ce):Ce=e[106];let H;e[107]!==t.fuel_type||e[108]!==i?(H=s.jsxs("div",{children:[Se,s.jsx("div",{className:"flex flex-wrap gap-1 rounded-md bg-muted/50 p-1",children:Ce.map(l=>s.jsx("button",{type:"button",onClick:()=>i("fuel_type",l),className:`flex-1 rounded px-3 py-1.5 text-sm font-medium transition-colors ${t.fuel_type===l?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:l},l))})]}),e[107]=t.fuel_type,e[108]=i,e[109]=H):H=e[109];let L;e[110]!==z||e[111]!==B||e[112]!==H?(L=s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[z,B,H]}),e[110]=z,e[111]=B,e[112]=H,e[113]=L):L=e[113];let we;e[114]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(Ze,{className:"size-4"})," ","Checklist de Ingreso"]}),e[114]=we):we=e[114];let q;e[115]!==t.entry_checklist||e[116]!==le?(q=s.jsxs("div",{className:"rounded-lg border p-4",children:[we,s.jsx("div",{className:"grid grid-cols-1 gap-3",children:te.map(l=>s.jsxs("div",{className:"flex flex-col gap-1.5 rounded-md border p-3 hover:bg-muted/30",children:[s.jsx("span",{className:"text-sm font-medium",children:l}),s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>le(l,"Funcional"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${t.entry_checklist[l]==="Funcional"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Funcional"}),s.jsx("button",{type:"button",onClick:()=>le(l,"Fallas"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${t.entry_checklist[l]==="Fallas"?"bg-red-100 text-red-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Fallas"}),s.jsx("button",{type:"button",onClick:()=>le(l,"N/A"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${t.entry_checklist[l]==="N/A"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"N/A"})]})]},l))})]}),e[115]=t.entry_checklist,e[116]=le,e[117]=q):q=e[117];let G;e[118]!==t.issue_ids||e[119]!==Ve||e[120]!==r?(G=r&&r.issues.length>0&&s.jsxs("div",{className:"space-y-2 rounded-md border p-4",children:[s.jsx(c,{className:"text-base font-semibold",children:"Reportar Incidencias Existentes"}),s.jsx("div",{className:"space-y-2",children:r.issues.map(l=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Ke,{id:`issue-${l.id}`,checked:t.issue_ids.includes(l.id),onCheckedChange:()=>Ve(l.id)}),s.jsxs(c,{htmlFor:`issue-${l.id}`,className:"font-normal",children:[s.jsxs("span",{className:"font-semibold",children:[l.date,":"]})," ",l.description," ",s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l.severity,")"]})]})]},l.id))})]}),e[118]=t.issue_ids,e[119]=Ve,e[120]=r,e[121]=G):G=e[121];let Te;e[122]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx(c,{children:"Trabajos a Realizar (Lista)"}),e[122]=Te):Te=e[122];let K;e[123]!==t.tasks||e[124]!==i?(K=t.tasks.map((l,n)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{value:l,onChange:d=>{const m=[...t.tasks];m[n]=d.target.value,i("tasks",m)},placeholder:`Trabajo #${n+1}`}),s.jsxs(Fe,{type:"button",variant:"destructive",size:"icon",onClick:()=>{const d=t.tasks.filter((m,ee)=>ee!==n);i("tasks",d)},children:[s.jsx("span",{className:"sr-only",children:"Eliminar"}),"×"]})]},n)),e[123]=t.tasks,e[124]=i,e[125]=K):K=e[125];let W;e[126]!==t.tasks||e[127]!==i?(W=s.jsx(Fe,{type:"button",variant:"outline",onClick:()=>i("tasks",[...t.tasks,""]),children:"+ Agregar Trabajo"}),e[126]=t.tasks,e[127]=i,e[128]=W):W=e[128];let Y;e[129]!==K||e[130]!==W?(Y=s.jsxs("div",{className:"space-y-2",children:[Te,s.jsxs("div",{className:"space-y-2",children:[K,W]})]}),e[129]=K,e[130]=W,e[131]=Y):Y=e[131];let Ie;e[132]===Symbol.for("react.memo_cache_sentinel")?(Ie=s.jsx(c,{children:"Observaciones Generales"}),e[132]=Ie):Ie=e[132];let J;e[133]!==i?(J=l=>i("description",l.target.value),e[133]=i,e[134]=J):J=e[134];let Q;e[135]!==t.description||e[136]!==J?(Q=s.jsx(Xe,{value:t.description,onChange:J,placeholder:"Detalles adicionales...",rows:3}),e[135]=t.description,e[136]=J,e[137]=Q):Q=e[137];let U;e[138]!==a.description?(U=a.description&&s.jsx("p",{className:"text-sm text-destructive",children:a.description}),e[138]=a.description,e[139]=U):U=e[139];let X;e[140]!==Q||e[141]!==U?(X=s.jsxs("div",{className:"space-y-2",children:[Ie,Q,U]}),e[140]=Q,e[141]=U,e[142]=X):X=e[142];let Z;e[143]!==$e?(Z=s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(Fe,{type:"submit",disabled:$e,children:"Registrar Ingreso"})}),e[143]=$e,e[144]=Z):Z=e[144];let Ae;return e[145]!==Me||e[146]!==y||e[147]!==k||e[148]!==A||e[149]!==P||e[150]!==L||e[151]!==q||e[152]!==G||e[153]!==Y||e[154]!==X||e[155]!==Z?(Ae=s.jsxs(es,{breadcrumbs:me,children:[he,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsx("div",{className:"mx-auto w-full max-w-3xl",children:s.jsxs(qe,{children:[ue,s.jsx(Ge,{children:s.jsxs("form",{onSubmit:Me,className:"space-y-6",children:[y,k,A,P,L,q,G,Y,X,Z]})})]})})})]}),e[145]=Me,e[146]=y,e[147]=k,e[148]=A,e[149]=P,e[150]=L,e[151]=q,e[152]=G,e[153]=Y,e[154]=X,e[155]=Z,e[156]=Ae):Ae=e[156],Ae}function ss(o){return o.currentTarget.showPicker()}function ts(o){return o.currentTarget.showPicker()}function ls(o){return s.jsxs(Ue,{value:o.id.toString(),children:[o.name," (",o.company,")"]},o.id)}function is(o,e){return{...o,[e]:"Funcional"}}export{vs as default};
