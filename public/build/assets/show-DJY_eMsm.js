import{c as ee,d as se,j as s,L as G,H as te}from"./app-Dnl-93jT.js";import{B as Q}from"./badge-BVmYI8Ih.js";import{a as ae,B as J}from"./button-Dwf9uOK6.js";import{b as D,C as E,a as M,c as T}from"./card-Dj6s-3MX.js";import{W as V,A as le}from"./app-layout-DrQubH2a.js";import{C as X}from"./circle-check-BFI7zvZS.js";import{C as re}from"./circle-alert-BaS-1VsZ.js";import{C as K}from"./calendar-BrREHXLF.js";import{A as ie}from"./arrow-left-BcQ2b7Go.js";/* empty css            */import"./index-TO5EoELk.js";import"./index-pwTMw1eK.js";import"./index-C4J_hXM0.js";import"./shield-Ccixr6it.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ne=ae("DollarSign",ce);function ke(a){const e=ee.c(76),{vehicle:t,totalMaintenanceCost:P}=a,r=se().props,i=t.issues?.[0],l=t.maintenances?.[0],Y=xe;let A;e[0]===Symbol.for("react.memo_cache_sentinel")?(A={title:"Material Mayor",href:"/vehicles/status"},e[0]=A):A=e[0];const z=`/vehicles/status/${t.id}`;let c;e[1]!==z||e[2]!==t.name?(c=[A,{title:t.name,href:z}],e[1]=z,e[2]=t.name,e[3]=c):c=e[3];const R=`Detalle ${t.name}`;let n;e[4]!==R?(n=s.jsx(te,{title:R}),e[4]=R,e[5]=n):n=e[5];let I;e[6]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(G,{href:"/vehicles/status",children:s.jsx(ie,{className:"h-5 w-5"})})}),e[6]=I):I=e[6];const Z=t.name,q=Y(t.status),U=t.status==="Operative"?"En Servicio":t.status==="Workshop"?"En Taller":"Fuera de Servicio";let d;e[7]!==q||e[8]!==U?(d=s.jsx(Q,{className:q,children:U}),e[7]=q,e[8]=U,e[9]=d):d=e[9];let o;e[10]!==d||e[11]!==t.name?(o=s.jsxs("h1",{className:"flex items-center gap-3 text-2xl font-bold",children:[Z,d]}),e[10]=d,e[11]=t.name,e[12]=o):o=e[12];let m;e[13]!==t.company||e[14]!==t.make||e[15]!==t.model?(m=s.jsxs("p",{className:"text-muted-foreground",children:[t.company," - ",t.make," ",t.model]}),e[13]=t.company,e[14]=t.make,e[15]=t.model,e[16]=m):m=e[16];let x;e[17]!==o||e[18]!==m?(x=s.jsxs("div",{className:"flex items-center gap-4",children:[I,s.jsxs("div",{children:[o,m]})]}),e[17]=o,e[18]=m,e[19]=x):x=e[19];let h;e[20]!==r.auth||e[21]!==t.id?(h=r.auth?.user&&(r.auth.user.role==="admin"||r.auth.user.role==="capitan")&&s.jsx(J,{asChild:!0,children:s.jsxs(G,{href:`/vehicles/${t.id}/edit`,children:[s.jsx(V,{className:"mr-2 h-4 w-4"}),"Editar Unidad"]})}),e[20]=r.auth,e[21]=t.id,e[22]=h):h=e[22];let p;e[23]!==x||e[24]!==h?(p=s.jsxs("div",{className:"flex items-center justify-between",children:[x,h]}),e[23]=x,e[24]=h,e[25]=p):p=e[25];let O;e[26]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(E,{children:s.jsx(M,{children:"Información del Vehículo"})}),e[26]=O):O=e[26];let $;e[27]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Patente"}),e[27]=$):$=e[27];let u;e[28]!==t.plate?(u=s.jsxs("div",{children:[$,s.jsx("p",{className:"text-lg font-semibold",children:t.plate})]}),e[28]=t.plate,e[29]=u):u=e[29];let H;e[30]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Año"}),e[30]=H):H=e[30];let f;e[31]!==t.year?(f=s.jsxs("div",{children:[H,s.jsx("p",{className:"text-lg font-semibold",children:t.year})]}),e[31]=t.year,e[32]=f):f=e[32];let W;e[33]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Marca"}),e[33]=W):W=e[33];let j;e[34]!==t.make?(j=s.jsxs("div",{children:[W,s.jsx("p",{className:"text-lg font-semibold",children:t.make})]}),e[34]=t.make,e[35]=j):j=e[35];let B;e[36]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Modelo"}),e[36]=B):B=e[36];let N;e[37]!==t.model?(N=s.jsxs("div",{children:[B,s.jsx("p",{className:"text-lg font-semibold",children:t.model})]}),e[37]=t.model,e[38]=N):N=e[38];let g;e[39]!==u||e[40]!==f||e[41]!==j||e[42]!==N?(g=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u,f,j,N]}),e[39]=u,e[40]=f,e[41]=j,e[42]=N,e[43]=g):g=e[43];let b;e[44]!==r.auth||e[45]!==P?(b=r.auth?.user&&(r.auth.user.company==="Comandancia"||r.auth.user.role==="admin")&&s.jsxs("div",{className:"mt-4 rounded-md bg-blue-50 p-4",children:[s.jsxs("div",{className:"mb-1 flex items-center gap-2 text-blue-800",children:[s.jsx(ne,{className:"h-5 w-5"}),s.jsx("span",{className:"font-bold",children:"Inversión Total en Mantenimiento"})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["$",(P||0).toLocaleString("es-CL")]}),s.jsx("p",{className:"mt-1 text-xs text-blue-700",children:"Suma histórica de todas los trabajos realizados."})]}),e[44]=r.auth,e[45]=P,e[46]=b):b=e[46];let y;e[47]!==g||e[48]!==b?(y=s.jsxs(D,{className:"md:col-span-2",children:[O,s.jsxs(T,{className:"space-y-4",children:[g,b]})]}),e[47]=g,e[48]=b,e[49]=y):y=e[49];let v;e[50]!==t.status?(v=t.status==="Operative"&&s.jsxs(D,{className:"border-green-200 bg-green-50",children:[s.jsx(E,{className:"pb-2",children:s.jsxs(M,{className:"flex items-center gap-2 text-green-800",children:[s.jsx(X,{className:"h-5 w-5"}),"Unidad Operativa"]})}),s.jsx(T,{children:s.jsx("p",{className:"text-sm text-green-700",children:"La unidad se encuentra operativa y disponible para el servicio."})})]}),e[50]=t.status,e[51]=v):v=e[51];let w;e[52]!==i||e[53]!==t.status?(w=t.status==="Out of Service"&&i&&s.jsxs(D,{className:"border-red-200 bg-red-50",children:[s.jsx(E,{className:"pb-2",children:s.jsxs(M,{className:"flex items-center gap-2 text-red-800",children:[s.jsx(re,{className:"h-5 w-5"}),"Fuera de Servicio"]})}),s.jsxs(T,{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-red-900",children:"Motivo:"}),s.jsx("p",{className:"text-sm text-red-800",children:i.description}),s.jsxs("div",{className:"mt-2 flex gap-2 text-xs text-red-700",children:[s.jsx(K,{className:"h-3 w-3"})," ",i.date?new Date(i.date).toLocaleDateString():new Date(i.created_at).toLocaleDateString()]})]})]}),e[52]=i,e[53]=t.status,e[54]=w):w=e[54];let _;e[55]!==i||e[56]!==l||e[57]!==t.status?(_=(t.status==="Workshop"||t.status==="Out of Service"&&!i&&l)&&(l?s.jsxs(D,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(E,{className:"pb-2",children:s.jsxs(M,{className:"flex items-center gap-2 text-yellow-800",children:[s.jsx(V,{className:"h-5 w-5"}),"En Taller (",l.status==="Scheduled"?"Agendado":"En Proceso",")"]})}),s.jsxs(T,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:l.workshop_name}),s.jsx("p",{className:"text-sm text-yellow-800",children:l.description}),s.jsxs("div",{className:"mt-1 flex gap-2 text-xs text-yellow-700",children:[s.jsx(K,{className:"h-3 w-3"})," ","Ingreso:"," ",new Date(l.entry_date).toLocaleDateString()]})]}),l.tasks&&l.tasks.length>0&&s.jsxs("div",{className:"rounded-md bg-white/50 p-3",children:[s.jsx("h4",{className:"mb-2 text-xs font-bold tracking-wider text-yellow-900 uppercase",children:"Tareas"}),s.jsx("div",{className:"space-y-2",children:l.tasks.map(me)})]}),l.issues&&l.issues.length>0&&s.jsxs("div",{className:"rounded-md bg-white/50 p-3",children:[s.jsx("h4",{className:"mb-2 text-xs font-bold tracking-wider text-yellow-900 uppercase",children:"Incidencias Asociadas"}),s.jsx("ul",{className:"list-disc pl-4 text-sm text-slate-700",children:l.issues.map(oe)})]})]})]}):s.jsxs(D,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(E,{className:"pb-2",children:s.jsxs(M,{className:"flex items-center gap-2 text-yellow-800",children:[s.jsx(V,{className:"h-5 w-5"}),"En Taller"]})}),s.jsx(T,{children:s.jsx("p",{className:"text-sm text-yellow-800",children:"No hay información detallada de la orden de trabajo."})})]})),e[55]=i,e[56]=l,e[57]=t.status,e[58]=_):_=e[58];let S;e[59]!==v||e[60]!==w||e[61]!==_?(S=s.jsxs("div",{className:"space-y-6",children:[v,w,_]}),e[59]=v,e[60]=w,e[61]=_,e[62]=S):S=e[62];let C;e[63]!==y||e[64]!==S?(C=s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[y,S]}),e[63]=y,e[64]=S,e[65]=C):C=e[65];let k;e[66]!==t.maintenances?(k=t.maintenances&&t.maintenances.length>0&&s.jsxs(D,{children:[s.jsx(E,{children:s.jsx(M,{children:"Historial de Órdenes de Trabajo"})}),s.jsx(T,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"border-b bg-muted/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2 py-3 font-medium",children:"Fecha Ingreso"}),s.jsx("th",{className:"p-2 py-3 font-medium",children:"Taller"}),s.jsx("th",{className:"p-2 py-3 font-medium",children:"Trabajo"}),s.jsx("th",{className:"p-2 py-3 font-medium",children:"Estado"}),s.jsx("th",{className:"p-2 py-3 text-right font-medium",children:"Costo"})]})}),s.jsx("tbody",{children:t.maintenances.map(de)})]})})})]}),e[66]=t.maintenances,e[67]=k):k=e[67];let L;e[68]!==p||e[69]!==C||e[70]!==k?(L=s.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-6 p-4",children:[p,C,k]}),e[68]=p,e[69]=C,e[70]=k,e[71]=L):L=e[71];let F;return e[72]!==c||e[73]!==L||e[74]!==n?(F=s.jsxs(le,{breadcrumbs:c,children:[n,L]}),e[72]=c,e[73]=L,e[74]=n,e[75]=F):F=e[75],F}function de(a){return s.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/20",children:[s.jsx("td",{className:"p-2 py-3",children:new Date(a.entry_date).toLocaleDateString()}),s.jsx("td",{className:"p-2 py-3",children:a.workshop_name}),s.jsx("td",{className:"p-2 py-3",children:a.description}),s.jsx("td",{className:"p-2 py-3",children:s.jsx(Q,{variant:"outline",className:["Finalizado","Entregado"].includes(a.status)?"border-green-200 bg-green-50 text-green-700":"border-yellow-200 bg-yellow-50 text-yellow-700",children:a.status})}),s.jsx("td",{className:"p-2 py-3 text-right",children:a.cost>0?`$${a.cost.toLocaleString("es-CL")}`:"-"})]},a.id)}function oe(a){return s.jsxs("li",{children:[a.description,a.status==="Resolved"&&s.jsx("span",{className:"ml-2 text-xs font-bold text-green-600",children:"(Solucionado)"})]},a.id)}function me(a){return s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.is_completed?s.jsx(X,{className:"mt-0.5 h-4 w-4 text-green-600"}):s.jsx("div",{className:"mt-0.5 h-4 w-4 rounded-full border-2 border-slate-300"}),s.jsx("span",{className:a.is_completed?"text-slate-700 line-through opacity-70":"font-medium text-slate-800",children:a.description})]},a.id)}function xe(a){switch(a){case"Operative":return"bg-green-100 text-green-800";case"Workshop":return"bg-yellow-100 text-yellow-800";case"Out of Service":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}export{ke as default};
