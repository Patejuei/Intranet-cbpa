import{c as he,u as ge,j as s,H as ve}from"./app-CPM0qqBN.js";import{S as ue,a as fe,b as pe,c as xe,d as B}from"./select-BBnrt3Tn.js";import{A as je}from"./app-layout-BRytu26V.js";import{S as ye}from"./shield-DKSAdIwv.js";/* empty css            */import"./index-CWMEVgmi.js";import"./button-CqEo9HDw.js";import"./index-BlbzEdsQ.js";import"./index-B-snUCRd.js";import"./chevron-down-BYJQCYpr.js";import"./check-CqO1qPRE.js";import"./index-C4J_hXM0.js";const Ne=[{id:"inventory",label:"Inventario"},{id:"tickets",label:"Ticketera"},{id:"batteries",label:"Baterías"},{id:"equipment",label:"Material Menor"},{id:"deliveries",label:"Actas de Entrega"},{id:"firefighters",label:"Bomberos"},{id:"vehicles",label:"Material Mayor (General)"},{id:"vehicles.incidents",label:"M. Mayor - Incidencias"},{id:"vehicles.logs",label:"M. Mayor - Bitácora"},{id:"vehicles.workshop",label:"M. Mayor - Taller"},{id:"vehicles.inventory",label:"M. Mayor - Inventario"}],we=["Primera Compañía","Segunda Compañía","Tercera Compañía","Cuarta Compañía","Quinta Compañía","Sexta Compañía","Séptima Compañía","Octava Compañía","Novena Compañía","Décima Compañía","Brigada Juvenil","Comandancia"];function Be(D){const e=he.c(110),{user:l}=D;let o;e[0]!==l.permissions?(o=l.permissions??[],e[0]=l.permissions,e[1]=o):o=e[1];let O;e[2]!==o||e[3]!==l.company||e[4]!==l.email||e[5]!==l.name||e[6]!==l.role?(O={name:l.name,email:l.email,password:"",company:l.company,role:l.role,permissions:o},e[2]=o,e[3]=l.company,e[4]=l.email,e[5]=l.name,e[6]=l.role,e[7]=O):O=e[7];const{data:t,setData:a,put:ne,processing:me,errors:r}=ge(O);let z;e[8]!==ne||e[9]!==l.id?(z=i=>{i.preventDefault(),ne(`/admin/users/${l.id}`)},e[8]=ne,e[9]=l.id,e[10]=z):z=e[10];const ce=z;let F;e[11]!==t.permissions||e[12]!==a?(F=(i,oe)=>{const H=t.permissions.filter(be=>!be.startsWith(`${i}.`));oe==="view"?H.push(`${i}.view`):oe==="edit"&&H.push(`${i}.view`,`${i}.edit`),a("permissions",H)},e[11]=t.permissions,e[12]=a,e[13]=F):F=e[13];const q=F;let J;e[14]!==t.permissions?(J=i=>{const oe=t.permissions.includes(`${i}.edit`),H=t.permissions.includes(`${i}.view`);return oe?"edit":H?"view":"none"},e[14]=t.permissions,e[15]=J):J=e[15];const G=J;let L,Q;e[16]===Symbol.for("react.memo_cache_sentinel")?(L={title:"Panel Principal",href:"/dashboard"},Q={title:"Usuarios",href:"/admin/users"},e[16]=L,e[17]=Q):(L=e[16],Q=e[17]);const de=`/admin/users/${l.id}/edit`;let n;e[18]!==de?(n=[L,Q,{title:"Editar Usuario",href:de}],e[18]=de,e[19]=n):n=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(ve,{title:"Editar Usuario"}),e[20]=W):W=e[20];let m;e[21]!==l.name?(m=s.jsxs("h2",{className:"text-lg font-semibold text-foreground",children:["Editar Usuario: ",l.name]}),e[21]=l.name,e[22]=m):m=e[22];let I;e[23]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Modifique los detalles del usuario."}),e[23]=I):I=e[23];let c;e[24]!==m?(c=s.jsxs("div",{className:"mb-6",children:[m,I]}),e[24]=m,e[25]=c):c=e[25];let K;e[26]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre Completo"}),e[26]=K):K=e[26];let d;e[27]!==a?(d=i=>a("name",i.target.value),e[27]=a,e[28]=d):d=e[28];let u;e[29]!==t.name||e[30]!==d?(u=s.jsx("input",{type:"text",value:t.name,onChange:d,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[29]=t.name,e[30]=d,e[31]=u):u=e[31];let f;e[32]!==r.name?(f=r.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.name}),e[32]=r.name,e[33]=f):f=e[33];let p;e[34]!==u||e[35]!==f?(p=s.jsxs("div",{children:[K,u,f]}),e[34]=u,e[35]=f,e[36]=p):p=e[36];let X;e[37]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Correo Electrónico"}),e[37]=X):X=e[37];let x;e[38]!==a?(x=i=>a("email",i.target.value),e[38]=a,e[39]=x):x=e[39];let b;e[40]!==t.email||e[41]!==x?(b=s.jsx("input",{type:"email",value:t.email,onChange:x,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[40]=t.email,e[41]=x,e[42]=b):b=e[42];let h;e[43]!==r.email?(h=r.email&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.email}),e[43]=r.email,e[44]=h):h=e[44];let g;e[45]!==b||e[46]!==h?(g=s.jsxs("div",{children:[X,b,h]}),e[45]=b,e[46]=h,e[47]=g):g=e[47];let v;e[48]!==p||e[49]!==g?(v=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[p,g]}),e[48]=p,e[49]=g,e[50]=v):v=e[50];let Y;e[51]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Contraseña (Opcional)"}),e[51]=Y):Y=e[51];let j;e[52]!==a?(j=i=>a("password",i.target.value),e[52]=a,e[53]=j):j=e[53];let y;e[54]!==t.password||e[55]!==j?(y=s.jsx("input",{type:"password",value:t.password,onChange:j,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"••••••••"}),e[54]=t.password,e[55]=j,e[56]=y):y=e[56];let N;e[57]!==r.password?(N=r.password&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.password}),e[57]=r.password,e[58]=N):N=e[58];let w;e[59]!==y||e[60]!==N?(w=s.jsxs("div",{children:[Y,y,N]}),e[59]=y,e[60]=N,e[61]=w):w=e[61];let Z;e[62]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Compañía"}),e[62]=Z):Z=e[62];let C;e[63]!==a?(C=i=>a("company",i),e[63]=a,e[64]=C):C=e[64];let ee;e[65]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(fe,{className:"w-full",children:s.jsx(pe,{placeholder:"Seleccione una Compañía"})}),e[65]=ee):ee=e[65];let se;e[66]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(xe,{children:we.map(Ce)}),e[66]=se):se=e[66];let S;e[67]!==t.company||e[68]!==C?(S=s.jsxs(ue,{value:t.company,onValueChange:C,children:[ee,se]}),e[67]=t.company,e[68]=C,e[69]=S):S=e[69];let _;e[70]!==r.company?(_=r.company&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.company}),e[70]=r.company,e[71]=_):_=e[71];let k;e[72]!==S||e[73]!==_?(k=s.jsxs("div",{children:[Z,S,_]}),e[72]=S,e[73]=_,e[74]=k):k=e[74];let M;e[75]!==w||e[76]!==k?(M=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[w,k]}),e[75]=w,e[76]=k,e[77]=M):M=e[77];let $;e[78]!==v||e[79]!==M?($=s.jsxs("div",{className:"space-y-4",children:[v,M]}),e[78]=v,e[79]=M,e[80]=$):$=e[80];let ie;e[81]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(ye,{className:"size-4"})," Roles y Permisos"]}),e[81]=ie):ie=e[81];let te;e[82]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Rol del Sistema"}),e[82]=te):te=e[82];let E;e[83]!==a?(E=i=>a("role",i),e[83]=a,e[84]=E):E=e[84];let le;e[85]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(fe,{className:"w-full",children:s.jsx(pe,{placeholder:"Seleccione un Rol"})}),e[85]=le):le=e[85];let ae;e[86]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsxs(xe,{children:[s.jsx(B,{value:"user",children:"Usuario (Por Defecto)"}),s.jsx(B,{value:"admin",children:"Administrador"}),s.jsx(B,{value:"capitan",children:"Capitán"}),s.jsx(B,{value:"cuartelero",children:"Cuartelero"}),s.jsx(B,{value:"mechanic",children:"Taller Mecánico"})]}),e[86]=ae):ae=e[86];let P;e[87]!==t.role||e[88]!==E?(P=s.jsxs("div",{className:"mb-6",children:[te,s.jsxs(ue,{value:t.role,onValueChange:E,children:[le,ae]})]}),e[87]=t.role,e[88]=E,e[89]=P):P=e[89];let V;e[90]!==t.role||e[91]!==G||e[92]!==q?(V=t.role!=="admin"&&t.role!=="capitan"&&s.jsxs("div",{children:[s.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Permisos por Módulo"}),s.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-muted-foreground",children:[s.jsx("th",{className:"pb-2 font-medium",children:"Módulo"}),s.jsx("th",{className:"pb-2 font-medium",children:"Nivel de Acceso"})]})}),s.jsx("tbody",{className:"divide-y",children:Ne.map(i=>s.jsxs("tr",{children:[s.jsx("td",{className:"py-2.5 font-medium",children:i.label}),s.jsx("td",{className:"py-2",children:s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>q(i.id,"none"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${G(i.id)==="none"?"bg-background shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ninguno"}),s.jsx("button",{type:"button",onClick:()=>q(i.id,"view"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${G(i.id)==="view"?"bg-blue-100 text-blue-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ver"}),s.jsx("button",{type:"button",onClick:()=>q(i.id,"edit"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${G(i.id)==="edit"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Editar"})]})})]},i.id))})]})}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"'Editar' incluye permisos de 'Ver'."})]}),e[90]=t.role,e[91]=G,e[92]=q,e[93]=V):V=e[93];let U;e[94]!==P||e[95]!==V?(U=s.jsxs("div",{className:"rounded-lg border p-4",children:[ie,P,V]}),e[94]=P,e[95]=V,e[96]=U):U=e[96];let A;e[97]!==me?(A=s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:me,className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground text-white transition-colors hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-primary focus-visible:outline-none disabled:opacity-50",children:"Guardar Cambios"})}),e[97]=me,e[98]=A):A=e[98];let R;e[99]!==ce||e[100]!==$||e[101]!==U||e[102]!==A?(R=s.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[$,U,A]}),e[99]=ce,e[100]=$,e[101]=U,e[102]=A,e[103]=R):R=e[103];let T;e[104]!==c||e[105]!==R?(T=s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsxs("div",{className:"max-w-4xl rounded-xl border bg-card p-6 shadow-sm",children:[c,R]})}),e[104]=c,e[105]=R,e[106]=T):T=e[106];let re;return e[107]!==T||e[108]!==n?(re=s.jsxs(je,{breadcrumbs:n,children:[W,T]}),e[107]=T,e[108]=n,e[109]=re):re=e[109],re}function Ce(D){return s.jsx(B,{value:D,children:D},D)}export{Be as default};
