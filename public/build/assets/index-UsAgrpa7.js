import{c as ge,r as he,u as ve,j as t,H as ye}from"./app-Y3wPkO7k.js";import{M as je}from"./MaterialSelector-DeXuoBM6.js";import{P as Ne}from"./Pagination-ic1UgAiN.js";import{c as _e,A as Ae}from"./app-layout-LB7JlbCh.js";import{a as xe}from"./button-IaI-p2sT.js";import{S as ke}from"./save-D94ebxxy.js";import{H as Ee}from"./history-DbXwPO-l.js";/* empty css            */import"./index-DHyoASyW.js";import"./search-CCATswSX.js";import"./index-CxTk-NYF.js";import"./check-CxauaCCR.js";import"./index-C4J_hXM0.js";import"./shield-YzFc6gme.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],we=xe("CircleArrowDown",Se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Le=xe("CircleArrowUp",Ce),Me=[{value:"EPP",label:"Equipos de Protección Personal (EPP)"},{value:"EXT",label:"Material de Extinción (EXT)"},{value:"RES",label:"Herramientas de Rescate (RES)"},{value:"MED",label:"Material Médico (MED)"},{value:"TEL",label:"Telecomunicaciones (TEL)"},{value:"EFO",label:"Entrada Forzada (EFO)"},{value:"ESC",label:"Escalas (ESC)"},{value:"VEN",label:"Ventilación (VEN)"},{value:"REL",label:"Riesgos Eléctricos (REL)"},{value:"HAZ",label:"Materiales Peligrosos (HAZ)"}];function Xe(r){const e=ge.c(109),{logs:c,materials:z}=r,[a,pe]=he.useState("ALTA");let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O={item_name:"",brand:"",model:"",serial_number:"",inventory_number:"",category:"",type:"ALTA",reason:"",status:"",document:null},e[0]=O):O=e[0];const{data:i,setData:s,post:ae,processing:ie,reset:ne,errors:n}=ve(O);let F;e[1]!==ae||e[2]!==ne?(F=l=>{l.preventDefault(),ae("/equipment",{onSuccess:()=>ne()})},e[1]=ae,e[2]=ne,e[3]=F):F=e[3];const oe=F;let J;e[4]!==s?(J=l=>{pe(l),s("type",l)},e[4]=s,e[5]=J):J=e[5];const m=J;let $,V;e[6]===Symbol.for("react.memo_cache_sentinel")?($=[{title:"Panel Principal",href:"/dashboard"},{title:"Material Menor",href:"/equipment"}],V=t.jsx(ye,{title:"Gestión Material Menor"}),e[6]=$,e[7]=V):($=e[6],V=e[7]);let G;e[8]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[t.jsx(_e,{className:"size-5 text-primary"}),t.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Registro de Material"})]}),e[8]=G):G=e[8];let d;e[9]!==m?(d=()=>m("ALTA"),e[9]=m,e[10]=d):d=e[10];const ce=`flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-all ${a==="ALTA"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`;let U;e[11]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx(Le,{className:"size-4"})," Alta"]}),e[11]=U):U=e[11];let u;e[12]!==d||e[13]!==ce?(u=t.jsx("button",{onClick:d,className:ce,children:U}),e[12]=d,e[13]=ce,e[14]=u):u=e[14];let f;e[15]!==m?(f=()=>m("BAJA"),e[15]=m,e[16]=f):f=e[16];const me=`flex-1 rounded-md px-3 py-1.5 text-sm font-medium transition-all ${a==="BAJA"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`;let X;e[17]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx(we,{className:"size-4"})," Baja"]}),e[17]=X):X=e[17];let b;e[18]!==f||e[19]!==me?(b=t.jsx("button",{onClick:f,className:me,children:X}),e[18]=f,e[19]=me,e[20]=b):b=e[20];let x;e[21]!==u||e[22]!==b?(x=t.jsxs("div",{className:"mb-6 flex gap-2 rounded-lg bg-muted p-1",children:[u,b]}),e[21]=u,e[22]=b,e[23]=x):x=e[23];let Z;e[24]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre del Material"}),e[24]=Z):Z=e[24];let p;e[25]!==s?(p=l=>s("item_name",l.target.value),e[25]=s,e[26]=p):p=e[26];let g;e[27]!==i.item_name||e[28]!==p?(g=t.jsx("input",{type:"text",value:i.item_name,onChange:p,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: Pitón Protek, Hacha...",required:!0}),e[27]=i.item_name,e[28]=p,e[29]=g):g=e[29];let h;e[30]!==n.item_name?(h=n.item_name&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.item_name}),e[30]=n.item_name,e[31]=h):h=e[31];let v;e[32]!==g||e[33]!==h?(v=t.jsxs("div",{children:[Z,g,h]}),e[32]=g,e[33]=h,e[34]=v):v=e[34];let y;e[35]!==a||e[36]!==i.inventory_number||e[37]!==z||e[38]!==s?(y=(a==="ALTA"||a==="BAJA")&&t.jsxs("div",{className:"space-y-4 rounded-lg bg-muted/50 p-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium",children:a==="ALTA"?"Buscador Inteligente (Autocompletar Alta)":"Buscador Inteligente (Seleccionar Baja)"}),t.jsx(je,{materials:z,value:void 0,onChange:l=>{const o=z.find(re=>re.id===l);o&&s(re=>({...re,item_name:o.product_name,brand:o.brand||"",model:o.model||"",category:o.category||re.category,serial_number:o.serial_number||"",inventory_number:o.code||o.serial_number||""}))},placeholder:"Buscar por Nombre, Código o S/N..."}),t.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:a==="ALTA"?"Busque un material existente para sumar stock automáticamente.":"Busque el material que desea dar de baja."})]}),t.jsxs("div",{className:a==="BAJA"?"opacity-50":"",children:[t.jsx("label",{className:"mb-1 block text-sm font-medium",children:a==="ALTA"?"N° Inventario (Si es Material Nuevo)":"N° Inventario Seleccionado"}),t.jsx("input",{type:"text",value:i.inventory_number,onChange:l=>s("inventory_number",l.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:a==="ALTA"?"Ej: EPP-2026-001 (Opcional)":"Se rellena automáticamente...",readOnly:a==="BAJA"})]})]}),e[35]=a,e[36]=i.inventory_number,e[37]=z,e[38]=s,e[39]=y):y=e[39];let K;e[40]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Marca"}),e[40]=K):K=e[40];const de=i.brand||"";let j;e[41]!==s?(j=l=>s("brand",l.target.value),e[41]=s,e[42]=j):j=e[42];let N;e[43]!==de||e[44]!==j?(N=t.jsxs("div",{children:[K,t.jsx("input",{type:"text",value:de,onChange:j,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: Protek"})]}),e[43]=de,e[44]=j,e[45]=N):N=e[45];let Q;e[46]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Modelo"}),e[46]=Q):Q=e[46];const ue=i.model||"";let _;e[47]!==s?(_=l=>s("model",l.target.value),e[47]=s,e[48]=_):_=e[48];let A;e[49]!==ue||e[50]!==_?(A=t.jsxs("div",{children:[Q,t.jsx("input",{type:"text",value:ue,onChange:_,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: 366"})]}),e[49]=ue,e[50]=_,e[51]=A):A=e[51];let k;e[52]!==N||e[53]!==A?(k=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N,A]}),e[52]=N,e[53]=A,e[54]=k):k=e[54];let E;e[55]!==a||e[56]!==i.category||e[57]!==n.category||e[58]!==s?(E=a==="ALTA"&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Categoría"}),t.jsxs("select",{value:i.category,onChange:l=>s("category",l.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",required:!0,children:[t.jsx("option",{value:"",children:"Seleccione Categoría"}),Me.map(Pe)]}),n.category&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.category})]}),e[55]=a,e[56]=i.category,e[57]=n.category,e[58]=s,e[59]=E):E=e[59];let W;e[60]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Número de Serie (Fabricante)"}),e[60]=W):W=e[60];let S;e[61]!==s?(S=l=>s("serial_number",l.target.value),e[61]=s,e[62]=S):S=e[62];let w;e[63]!==i.serial_number||e[64]!==S?(w=t.jsx("input",{type:"text",value:i.serial_number,onChange:S,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ingrese S/N si aplica (Limita stock a 1 en Alta)"}),e[63]=i.serial_number,e[64]=S,e[65]=w):w=e[65];let C;e[66]!==n.serial_number?(C=n.serial_number&&t.jsx("p",{className:"mt-1 text-xs text-destructive",children:n.serial_number}),e[66]=n.serial_number,e[67]=C):C=e[67];let L;e[68]!==w||e[69]!==C?(L=t.jsxs("div",{children:[W,w,C]}),e[68]=w,e[69]=C,e[70]=L):L=e[70];let Y;e[71]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Motivo / Descripción"}),e[71]=Y):Y=e[71];let M;e[72]!==s?(M=l=>s("reason",l.target.value),e[72]=s,e[73]=M):M=e[73];const fe=a==="ALTA"?"Detalles de la adquisición...":"Razón de la baja (daño, pérdida, etc)...";let T;e[74]!==i.reason||e[75]!==M||e[76]!==fe?(T=t.jsxs("div",{children:[Y,t.jsx("textarea",{value:i.reason,onChange:M,className:"min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:fe})]}),e[74]=i.reason,e[75]=M,e[76]=fe,e[77]=T):T=e[77];let ee;e[78]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Documento de Respaldo (Opcional)"}),e[78]=ee):ee=e[78];let P;e[79]!==s?(P=t.jsxs("div",{children:[ee,t.jsx("input",{type:"file",onChange:l=>s("document",l.target.files?l.target.files[0]:null),className:"w-full cursor-pointer rounded-md border border-input bg-background px-3 py-2 text-sm file:mr-4 file:rounded-full file:border-0 file:bg-primary/10 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-primary hover:file:bg-primary/20",accept:".pdf,.jpg,.png,.jpeg"})]}),e[79]=s,e[80]=P):P=e[80];let te;e[81]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(ke,{className:"size-4"}),e[81]=te):te=e[81];const be=a==="ALTA"?"Alta":"Baja";let B;e[82]!==ie||e[83]!==be?(B=t.jsxs("button",{type:"submit",disabled:ie,className:"flex h-10 w-full items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90",children:[te,"Registrar"," ",be]}),e[82]=ie,e[83]=be,e[84]=B):B=e[84];let R;e[85]!==oe||e[86]!==v||e[87]!==y||e[88]!==k||e[89]!==E||e[90]!==L||e[91]!==T||e[92]!==P||e[93]!==B?(R=t.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[v,y,k,E,L,T,P,B]}),e[85]=oe,e[86]=v,e[87]=y,e[88]=k,e[89]=E,e[90]=L,e[91]=T,e[92]=P,e[93]=B,e[94]=R):R=e[94];let q;e[95]!==x||e[96]!==R?(q=t.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[G,x,R]}),e[95]=x,e[96]=R,e[97]=q):q=e[97];let se;e[98]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("div",{className:"mb-6 flex items-center gap-2 text-primary",children:[t.jsx(Ee,{className:"size-5"}),t.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Historial de Movimientos"})]}),e[98]=se):se=e[98];let D;e[99]!==c.data?(D=t.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.data.length===0?t.jsx("p",{className:"py-8 text-center text-muted-foreground",children:"No hay registros recientes."}):t.jsx("div",{className:"space-y-4",children:c.data.map(Te)})}),e[99]=c.data,e[100]=D):D=e[100];let H;e[101]!==c.links?(H=t.jsx(Ne,{links:c.links}),e[101]=c.links,e[102]=H):H=e[102];let I;e[103]!==D||e[104]!==H?(I=t.jsxs("div",{className:"flex max-h-[600px] flex-col overflow-hidden rounded-xl border bg-card p-6 shadow-sm",children:[se,D,H]}),e[103]=D,e[104]=H,e[105]=I):I=e[105];let le;return e[106]!==q||e[107]!==I?(le=t.jsxs(Ae,{breadcrumbs:$,children:[V,t.jsx("div",{className:"flex flex-col gap-6 p-4",children:t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[q,I]})})]}),e[106]=q,e[107]=I,e[108]=le):le=e[108],le}function Te(r){return t.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3 transition-colors hover:bg-muted/50",children:[t.jsxs("div",{className:"mb-1 flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block font-semibold",children:r.item_name}),r.inventory_number&&t.jsx("span",{className:"rounded border bg-background px-1.5 py-0.5 font-mono text-xs",children:r.inventory_number})]}),t.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${r.type==="ALTA"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r.type})]}),t.jsxs("p",{className:"mb-1 text-sm text-muted-foreground",children:[r.serial_number&&t.jsxs("span",{className:"mr-2",children:["S/N: ",r.serial_number]}),"Por: ",r.user.name]}),r.reason&&t.jsxs("p",{className:"border-l-2 border-primary/30 pl-2 text-sm italic",children:['"',r.reason,'"']}),t.jsx("div",{className:"mt-2 flex items-center justify-between",children:t.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(r.created_at).toLocaleString()})})]},r.id)}function Pe(r){return t.jsx("option",{value:r.value,children:r.label},r.value)}export{Xe as default};
