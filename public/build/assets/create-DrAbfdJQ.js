import{r as p,j as s,c as X,u as ge,H as ye}from"./app-CBY63E8O.js";import{a as Re,u as Y,c as te,B as Q}from"./button-u7aOUw7b.js";import{b as Z,c as ee,C as Ne,a as _e}from"./card-BiAQZnzo.js";import{I as Ce}from"./input-C4BK_Wk1.js";import{L as G}from"./label-mQpIqerj.js";import{b as Se,c as se,a as W,d as we,P as ke}from"./index-B580IPxa.js";import{P as q}from"./index-BNu6O6um.js";import{x as re,u as Ie,y as Pe,I as Ee,A as Ge}from"./app-layout-DTk5q9Hs.js";import{u as Ae}from"./index-CAIl2azn.js";import{a as De,b as Fe,c as Oe,S as Le,d as Ve}from"./select-BGP1GqMU.js";import{T as $e}from"./textarea-BbZZFtbn.js";/* empty css            */import"./index-C4J_hXM0.js";import"./shield-BSKZHwMX.js";import"./chevron-down-BHt_bYLt.js";import"./check-VkHhCE9A.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Te=Re("Circle",Me);var J="Radio",[Be,oe]=se(J),[qe,Ke]=Be(J),ae=p.forwardRef((i,e)=>{const{__scopeRadio:t,name:a,checked:r=!1,required:o,disabled:l,value:c="on",onCheck:n,form:d,...h}=i,[f,v]=p.useState(null),u=Y(e,g=>v(g)),m=p.useRef(!1),j=f?d||!!f.closest("form"):!0;return s.jsxs(qe,{scope:t,checked:r,disabled:l,children:[s.jsx(q.button,{type:"button",role:"radio","aria-checked":r,"data-state":ce(r),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:u,onClick:W(i.onClick,g=>{r||n?.(),j&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})}),j&&s.jsx(ne,{control:f,bubbles:!m.current,name:a,value:c,checked:r,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});ae.displayName=J;var ie="RadioIndicator",le=p.forwardRef((i,e)=>{const{__scopeRadio:t,forceMount:a,...r}=i,o=Ke(ie,t);return s.jsx(ke,{present:a||o.checked,children:s.jsx(q.span,{"data-state":ce(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e})})});le.displayName=ie;var Ue="RadioBubbleInput",ne=p.forwardRef(({__scopeRadio:i,control:e,checked:t,bubbles:a=!0,...r},o)=>{const l=p.useRef(null),c=Y(l,o),n=Ae(t),d=we(e);return p.useEffect(()=>{const h=l.current;if(!h)return;const f=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(f,"checked").set;if(n!==t&&u){const m=new Event("click",{bubbles:a});u.call(h,t),h.dispatchEvent(m)}},[n,t,a]),s.jsx(q.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:c,style:{...r.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ne.displayName=Ue;function ce(i){return i?"checked":"unchecked"}var He=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],K="RadioGroup",[ze,bt]=se(K,[re,oe]),de=re(),ue=oe(),[We,Xe]=ze(K),me=p.forwardRef((i,e)=>{const{__scopeRadioGroup:t,name:a,defaultValue:r,value:o,required:l=!1,disabled:c=!1,orientation:n,dir:d,loop:h=!0,onValueChange:f,...v}=i,u=de(t),m=Ie(d),[j,g]=Se({prop:o,defaultProp:r??null,onChange:f,caller:K});return s.jsx(We,{scope:t,name:a,required:l,disabled:c,value:j,onValueChange:g,children:s.jsx(Pe,{asChild:!0,...u,orientation:n,dir:m,loop:h,children:s.jsx(q.div,{role:"radiogroup","aria-required":l,"aria-orientation":n,"data-disabled":c?"":void 0,dir:m,...v,ref:e})})})});me.displayName=K;var pe="RadioGroupItem",fe=p.forwardRef((i,e)=>{const{__scopeRadioGroup:t,disabled:a,...r}=i,o=Xe(pe,t),l=o.disabled||a,c=de(t),n=ue(t),d=p.useRef(null),h=Y(e,d),f=o.value===r.value,v=p.useRef(!1);return p.useEffect(()=>{const u=j=>{He.includes(j.key)&&(v.current=!0)},m=()=>v.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",m)}},[]),s.jsx(Ee,{asChild:!0,...c,focusable:!l,active:f,children:s.jsx(ae,{disabled:l,required:o.required,checked:f,...n,...r,name:o.name,ref:h,onCheck:()=>o.onValueChange(r.value),onKeyDown:W(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:W(r.onFocus,()=>{v.current&&d.current?.click()})})})});fe.displayName=pe;var Ye="RadioGroupIndicator",he=p.forwardRef((i,e)=>{const{__scopeRadioGroup:t,...a}=i,r=ue(t);return s.jsx(le,{...r,...a,ref:e})});he.displayName=Ye;var ve=me,xe=fe,Je=he;const be=p.forwardRef((i,e)=>{const t=X.c(9);let a,r;t[0]!==i?({className:a,...r}=i,t[0]=i,t[1]=a,t[2]=r):(a=t[1],r=t[2]);let o;t[3]!==a?(o=te("grid gap-2",a),t[3]=a,t[4]=o):o=t[4];let l;return t[5]!==r||t[6]!==e||t[7]!==o?(l=s.jsx(ve,{className:o,...r,ref:e}),t[5]=r,t[6]=e,t[7]=o,t[8]=l):l=t[8],l});be.displayName=ve.displayName;const B=p.forwardRef((i,e)=>{const t=X.c(10);let a,r;t[0]!==i?({className:a,...r}=i,t[0]=i,t[1]=a,t[2]=r):(a=t[1],r=t[2]);let o;t[3]!==a?(o=te("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),t[3]=a,t[4]=o):o=t[4];let l;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Je,{className:"flex items-center justify-center",children:s.jsx(Te,{className:"h-2.5 w-2.5 fill-current text-current"})}),t[5]=l):l=t[5];let c;return t[6]!==r||t[7]!==e||t[8]!==o?(c=s.jsx(xe,{ref:e,className:o,...r,children:l}),t[6]=r,t[7]=e,t[8]=o,t[9]=c):c=t[9],c});B.displayName=xe.displayName;const Qe=[{title:"Vehículos",href:"/vehicles/status"},{title:"Nuevo Checklist",href:"/vehicles/checklists/create"}];function jt(i){const e=X.c(51),{vehicles:t,items:a}=i;let r,o,l;if(e[0]!==a){const b=Object.values(a).flat();l=ge,r="",o=b.map(tt),e[0]=a,e[1]=r,e[2]=o,e[3]=l}else r=e[1],o=e[2],l=e[3];let c;e[4]!==r||e[5]!==o?(c={vehicle_id:r,details:o,general_observations:""},e[4]=r,e[5]=o,e[6]=c):c=e[6];const{data:n,setData:d,post:h,processing:f,errors:v}=l(c);let u;e[7]!==n.details||e[8]!==d?(u=(b,T,U)=>{const x=[...n.details];x[b]={...x[b],[T]:U},d("details",x)},e[7]=n.details,e[8]=d,e[9]=u):u=e[9];const m=u;let j;e[10]!==h?(j=b=>{b.preventDefault(),h("/vehicles/checklists")},e[10]=h,e[11]=j):j=e[11];const g=j;let A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(ye,{title:"Nuevo Checklist Preventivo"}),e[12]=A):A=e[12];let D;e[13]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Checklist Preventivo"}),s.jsx("p",{className:"text-muted-foreground",children:"Complete el formulario para registrar el estado del vehículo."})]})}),e[13]=D):D=e[13];let F;e[14]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(Ne,{children:s.jsx(_e,{children:"Selección de Vehículo"})}),e[14]=F):F=e[14];let O;e[15]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(G,{htmlFor:"vehicle_id",children:"Vehículo"}),e[15]=O):O=e[15];let y;e[16]!==d?(y=b=>d("vehicle_id",b),e[16]=d,e[17]=y):y=e[17];const je=n.vehicle_id;let L;e[18]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(De,{children:s.jsx(Fe,{placeholder:"Seleccione un vehículo"})}),e[18]=L):L=e[18];let R;e[19]!==t?(R=t.map(et),e[19]=t,e[20]=R):R=e[20];let N;e[21]!==R?(N=s.jsx(Oe,{children:R}),e[21]=R,e[22]=N):N=e[22];let _;e[23]!==n.vehicle_id||e[24]!==y||e[25]!==N?(_=s.jsxs(Le,{onValueChange:y,value:je,children:[L,N]}),e[23]=n.vehicle_id,e[24]=y,e[25]=N,e[26]=_):_=e[26];let C;e[27]!==v.vehicle_id?(C=v.vehicle_id&&s.jsx("p",{className:"text-sm font-medium text-destructive",children:v.vehicle_id}),e[27]=v.vehicle_id,e[28]=C):C=e[28];let S;e[29]!==_||e[30]!==C?(S=s.jsxs(Z,{children:[F,s.jsx(ee,{children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.jsxs("div",{className:"space-y-2",children:[O,_,C]})})})]}),e[29]=_,e[30]=C,e[31]=S):S=e[31];let w;e[32]!==n.details||e[33]!==a||e[34]!==m?(w=Object.entries(a).map(b=>{const[T,U]=b;return s.jsxs(Z,{className:"overflow-hidden",children:[s.jsx("div",{className:"border-b bg-muted/50 px-6 py-4",children:s.jsx("h3",{className:"text-lg font-bold",children:T})}),s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"divide-y",children:U.map(x=>{const H=n.details.findIndex(E=>E.item_id===x.id),z=n.details[H];return z?s.jsxs("div",{className:"grid gap-4 p-4 md:grid-cols-[1fr_auto_1fr] md:p-6",children:[s.jsx("div",{className:"flex items-center font-medium",children:x.name}),s.jsx("div",{className:"flex items-start justify-center",children:s.jsxs(be,{value:z.status,onValueChange:E=>m(H,"status",E),className:"flex gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(B,{value:"ok",id:`ok-${x.id}`,className:"border-green-600 text-green-600"}),s.jsx(G,{htmlFor:`ok-${x.id}`,className:"cursor-pointer font-bold text-green-700",children:"OK"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(B,{value:"next_maint",id:`nm-${x.id}`,className:"border-yellow-600 text-yellow-600"}),s.jsx(G,{htmlFor:`nm-${x.id}`,className:"cursor-pointer font-bold text-yellow-700",children:"Próx. Mant."})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(B,{value:"urgent",id:`urg-${x.id}`,className:"border-red-600 text-red-600"}),s.jsx(G,{htmlFor:`urg-${x.id}`,className:"cursor-pointer font-bold text-red-700",children:"Urgente"})]})]})}),s.jsx("div",{className:"flex items-center",children:s.jsx(Ce,{placeholder:"Observaciones (opcional)",value:z.notes,onChange:E=>m(H,"notes",E.target.value),className:"h-9"})})]},x.id):null})})})]},T)}),e[32]=n.details,e[33]=a,e[34]=m,e[35]=w):w=e[35];let V;e[36]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(G,{htmlFor:"general_observations",children:"Observaciones Generales"}),e[36]=V):V=e[36];let k;e[37]!==d?(k=b=>d("general_observations",b.target.value),e[37]=d,e[38]=k):k=e[38];let I;e[39]!==n.general_observations||e[40]!==k?(I=s.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[V,s.jsx($e,{id:"general_observations",value:n.general_observations,onChange:k,placeholder:"Comentarios generales sobre el estado del vehículo..."})]}),e[39]=n.general_observations,e[40]=k,e[41]=I):I=e[41];let $;e[42]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(Q,{variant:"outline",type:"button",onClick:Ze,children:"Cancelar"}),e[42]=$):$=e[42];let P;e[43]!==f?(P=s.jsxs("div",{className:"flex justify-end gap-4 pb-8",children:[$,s.jsx(Q,{type:"submit",disabled:f,size:"lg",className:"w-full md:w-auto",children:"Registrar Checklist"})]}),e[43]=f,e[44]=P):P=e[44];let M;return e[45]!==g||e[46]!==S||e[47]!==w||e[48]!==I||e[49]!==P?(M=s.jsxs(Ge,{breadcrumbs:Qe,children:[A,s.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[D,s.jsxs("form",{onSubmit:g,className:"space-y-8",children:[S,w,I,P]})]})]}),e[45]=g,e[46]=S,e[47]=w,e[48]=I,e[49]=P,e[50]=M):M=e[50],M}function Ze(){return window.history.back()}function et(i){return s.jsxs(Ve,{value:i.id.toString(),children:[i.name," (",i.plate,") -"," ",i.company]},i.id)}function tt(i){return{item_id:i.id,status:"ok",notes:""}}export{jt as default};
