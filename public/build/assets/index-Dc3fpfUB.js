import{c as fe,r as xe,u as pe,j as t,H as ue}from"./app-Dd9auU8S.js";import{B as ae}from"./badge-Cgr23Ao3.js";import{B as re}from"./button-CHx9iYyT.js";import{C as je}from"./checkbox-BSlnRbnA.js";import{g as ge,b as ve,D as _e,a as be,e as Ne,c as ye,d as Se}from"./dialog-CELWIO2Q.js";import{I as De}from"./input-DY9d1vvb.js";import{L as H}from"./label-g_PDMJAj.js";import{S as de,a as ce,b as ne,c as oe,d as L}from"./select-D2YdPzFk.js";import{T as Ce}from"./textarea-C4ee5U-s.js";import{A as we}from"./app-layout-CVmopS7h.js";import{f as Ie}from"./format-CSQe5d3I.js";import{P as Fe}from"./plus-D0r1IUyB.js";/* empty css            */import"./index-BKaUFAG5.js";import"./index-D18JJAhn.js";import"./index-DiXjhHBV.js";import"./check-Tx9GZQQ2.js";import"./chevron-down-BYyIKyy0.js";import"./index-C4J_hXM0.js";import"./shield-BS78cT0K.js";function Ye(d){const e=fe.c(86),{issues:c,vehicles:Y}=d,[Z,se]=xe.useState(!1);let T;e[0]===Symbol.for("react.memo_cache_sentinel")?(T={vehicle_id:"",description:"",severity:"Low",is_stopped:!1,date:Ie(new Date,"yyyy-MM-dd")},e[0]=T):T=e[0];const{data:i,setData:s,post:ee,processing:te,errors:r,reset:le}=pe(T);let V;e[1]!==ee||e[2]!==le?(V=l=>{l.preventDefault(),ee("/vehicles/incidents",{onSuccess:()=>{se(!1),le()}})},e[1]=ee,e[2]=le,e[3]=V):V=e[3];const ie=V,me=Me;let E,P;e[4]===Symbol.for("react.memo_cache_sentinel")?(E=[{title:"Material Mayor",href:"/vehicles/dashboard"},{title:"Incidencias",href:"/vehicles/incidents"}],P=t.jsx(ue,{title:"Registro de Incidencias"}),e[4]=E,e[5]=P):(E=e[4],P=e[5]);let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Registro de Incidencias"}),t.jsx("p",{className:"text-muted-foreground",children:"Reporte y seguimiento de problemas mecánicos."})]}),e[6]=k):k=e[6];let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(ge,{asChild:!0,children:t.jsxs(re,{children:[t.jsx(Fe,{className:"mr-2 h-4 w-4"})," Nueva Incidencia"]})}),e[7]=A):A=e[7];let O;e[8]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsxs(ve,{children:[t.jsx(_e,{children:"Reportar Incidencia"}),t.jsx(be,{children:"Ingrese los detalles del problema detectado en la unidad."})]}),e[8]=O):O=e[8];let G;e[9]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(H,{htmlFor:"vehicle",children:"Vehículo"}),e[9]=G):G=e[9];let n;e[10]!==s?(n=l=>s("vehicle_id",l),e[10]=s,e[11]=n):n=e[11];const he=i.vehicle_id;let U;e[12]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(ce,{children:t.jsx(ne,{placeholder:"Seleccione unidad"})}),e[12]=U):U=e[12];let o;e[13]!==Y?(o=Y.map(Re),e[13]=Y,e[14]=o):o=e[14];let m;e[15]!==o?(m=t.jsx(oe,{children:o}),e[15]=o,e[16]=m):m=e[16];let h;e[17]!==i.vehicle_id||e[18]!==m||e[19]!==n?(h=t.jsxs(de,{onValueChange:n,value:he,children:[U,m]}),e[17]=i.vehicle_id,e[18]=m,e[19]=n,e[20]=h):h=e[20];let f;e[21]!==r.vehicle_id?(f=r.vehicle_id&&t.jsx("p",{className:"text-sm text-destructive",children:r.vehicle_id}),e[21]=r.vehicle_id,e[22]=f):f=e[22];let x;e[23]!==h||e[24]!==f?(x=t.jsxs("div",{className:"grid gap-2",children:[G,h,f]}),e[23]=h,e[24]=f,e[25]=x):x=e[25];let $;e[26]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(H,{htmlFor:"severity",children:"Severidad"}),e[26]=$):$=e[26];let p;e[27]!==s?(p=l=>s("severity",l),e[27]=s,e[28]=p):p=e[28];let q;e[29]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(ce,{children:t.jsx(ne,{placeholder:"Nivel de Gravedad"})}),e[29]=q):q=e[29];let z;e[30]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsxs(oe,{children:[t.jsx(L,{value:"Low",children:"Baja (Observación)"}),t.jsx(L,{value:"Medium",children:"Media (Reparación necesaria)"}),t.jsx(L,{value:"High",children:"Alta (Riesgo operativo)"}),t.jsx(L,{value:"Critical",children:"Crítica (Inoperativo)"})]}),e[30]=z):z=e[30];let u;e[31]!==i.severity||e[32]!==p?(u=t.jsxs("div",{className:"grid gap-2",children:[$,t.jsxs(de,{onValueChange:p,value:i.severity,children:[q,z]})]}),e[31]=i.severity,e[32]=p,e[33]=u):u=e[33];let J;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(H,{htmlFor:"date",children:"Fecha Detección"}),e[34]=J):J=e[34];let j;e[35]!==s?(j=l=>s("date",l.target.value),e[35]=s,e[36]=j):j=e[36];let g;e[37]!==i.date||e[38]!==j?(g=t.jsxs("div",{className:"grid gap-2",children:[J,t.jsx(De,{id:"date",type:"date",value:i.date,onChange:j})]}),e[37]=i.date,e[38]=j,e[39]=g):g=e[39];let K;e[40]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(H,{htmlFor:"description",children:"Descripción del Problema"}),e[40]=K):K=e[40];let v;e[41]!==s?(v=l=>s("description",l.target.value),e[41]=s,e[42]=v):v=e[42];let _;e[43]!==i.description||e[44]!==v?(_=t.jsx(Ce,{id:"description",value:i.description,onChange:v,placeholder:"Detalle el problema..."}),e[43]=i.description,e[44]=v,e[45]=_):_=e[45];let b;e[46]!==r.description?(b=r.description&&t.jsx("p",{className:"text-sm text-destructive",children:r.description}),e[46]=r.description,e[47]=b):b=e[47];let N;e[48]!==_||e[49]!==b?(N=t.jsxs("div",{className:"grid gap-2",children:[K,_,b]}),e[48]=_,e[49]=b,e[50]=N):N=e[50];let y;e[51]!==s?(y=l=>s("is_stopped",l),e[51]=s,e[52]=y):y=e[52];let S;e[53]!==i.is_stopped||e[54]!==y?(S=t.jsx(je,{id:"is_stopped",checked:i.is_stopped,onCheckedChange:y}),e[53]=i.is_stopped,e[54]=y,e[55]=S):S=e[55];let Q;e[56]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(H,{htmlFor:"is_stopped",className:"font-medium text-destructive",children:"Material Detenido (Fuera de Servicio)"}),e[56]=Q):Q=e[56];let D;e[57]!==S?(D=t.jsxs("div",{className:"flex items-center space-x-2",children:[S,Q]}),e[57]=S,e[58]=D):D=e[58];let C;e[59]!==x||e[60]!==u||e[61]!==g||e[62]!==N||e[63]!==D?(C=t.jsxs("div",{className:"grid gap-4 py-4",children:[x,u,g,N,D]}),e[59]=x,e[60]=u,e[61]=g,e[62]=N,e[63]=D,e[64]=C):C=e[64];let w;e[65]!==te?(w=t.jsx(Ne,{children:t.jsx(re,{type:"submit",disabled:te,children:"Reportar"})}),e[65]=te,e[66]=w):w=e[66];let I;e[67]!==ie||e[68]!==C||e[69]!==w?(I=t.jsx(ye,{className:"sm:max-w-[500px]",children:t.jsxs("form",{onSubmit:ie,children:[O,C,w]})}),e[67]=ie,e[68]=C,e[69]=w,e[70]=I):I=e[70];let F;e[71]!==Z||e[72]!==I?(F=t.jsxs("div",{className:"flex items-center justify-between",children:[k,t.jsxs(Se,{open:Z,onOpenChange:se,children:[A,I]})]}),e[71]=Z,e[72]=I,e[73]=F):F=e[73];let W;e[74]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("thead",{className:"[&_tr]:border-b",children:t.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Fecha"}),t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Unidad"}),t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Gravedad"}),t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Descripción"}),t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Estado"}),t.jsx("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Reportado Por"})]})}),e[74]=W):W=e[74];let R;if(e[75]!==c.data){let l;e[77]===Symbol.for("react.memo_cache_sentinel")?(l=a=>t.jsxs("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[t.jsx("td",{className:"p-4 align-middle",children:a.date}),t.jsx("td",{className:"p-4 align-middle font-medium",children:a.vehicle.name}),t.jsx("td",{className:"p-4 align-middle",children:t.jsx(ae,{variant:me(a.severity),children:a.severity})}),t.jsx("td",{className:"max-w-[300px] truncate p-4 align-middle",children:a.description}),t.jsxs("td",{className:"p-4 align-middle",children:[a.is_stopped&&t.jsx(ae,{variant:"destructive",className:"mr-2",children:"Detenido"}),a.status]}),t.jsx("td",{className:"p-4 align-middle",children:a.reporter?.name||"Desconocido"})]},a.id),e[77]=l):l=e[77],R=c.data.map(l),e[75]=c.data,e[76]=R}else R=e[76];let M;e[78]!==c.data.length?(M=c.data.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-4 text-center text-muted-foreground",children:"No hay incidencias registradas."})}),e[78]=c.data.length,e[79]=M):M=e[79];let B;e[80]!==R||e[81]!==M?(B=t.jsx("div",{className:"rounded-md border",children:t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsxs("table",{className:"w-full caption-bottom text-sm",children:[W,t.jsxs("tbody",{className:"[&_tr:last-child]:border-0",children:[R,M]})]})})}),e[80]=R,e[81]=M,e[82]=B):B=e[82];let X;return e[83]!==F||e[84]!==B?(X=t.jsxs(we,{breadcrumbs:E,children:[P,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[F,B]})]}),e[83]=F,e[84]=B,e[85]=X):X=e[85],X}function Re(d){return t.jsx(L,{value:d.id.toString(),children:d.name},d.id)}function Me(d){switch(d){case"Critical":return"destructive";case"High":return"destructive";case"Medium":return"secondary";default:return"outline"}}export{Ye as default};
