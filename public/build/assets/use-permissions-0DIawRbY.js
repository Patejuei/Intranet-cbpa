import{c as y,b as m}from"./app-DqJRurs1.js";function g(){const s=y.c(14),{props:M}=m(),e=M.auth.user;let o;s[0]!==e?(o=i=>{if(!e)return!1;if(e.role==="admin"||e.role==="capitan"||e.role==="maquinista"&&["vehicles.logs","vehicles.checklist","vehicles.status","vehicles.incidents","vehicles.inventory"].includes(i)||e.role==="mechanic"&&["vehicles.workshop","vehicles.incidents","vehicles.status","vehicles.checklist","vehicles.logs","inventory","vehicles.inventory"].includes(i))return!0;if(e.role==="inspector"){const t=(e.department||"").trim();if(console.log("hasPermission check:",{module:i,dept:t,role:e.role}),t==="Material Mayor"){const r=["vehicles.status","vehicles.incidents","vehicles.inventory","vehicles.logs","vehicles.workshop","vehicles.checklist","vehicles"];if(r.some(l=>l===i||l.startsWith(i+"."))||r.includes(i))return!0}else if(t==="Material Menor"){const r=["inventory","tickets","batteries","deliveries","reception","equipment"];if(r.some(l=>l===i||l.startsWith(i+"."))||r.includes(i))return!0}}const n=e.permissions||[];return n.includes(i)||n.includes(`${i}.view`)||n.includes(`${i}.edit`)||n.includes(`${i}.full`)},s[0]=e,s[1]=o):o=s[1];const v=o;let a;s[2]!==e?(a=i=>{if(!e)return!1;if(e.role==="admin"||e.role==="capitan")return!0;if(e.role==="inspector"){const t=(e.department||"").trim();if(t==="Material Mayor"){if(["vehicles.status","vehicles.incidents","vehicles.inventory"].includes(i))return!0;if(["vehicles.workshop","vehicles.checklist","vehicles.logs"].includes(i))return!1}else if(t==="Material Menor"&&["inventory","tickets","batteries","deliveries","reception","equipment"].includes(i))return!0}if(e.role==="mechanic"){if(["vehicles.status","vehicles.checklist","vehicles.logs"].includes(i))return!1;if(["vehicles.workshop","vehicles.incidents","inventory","vehicles.inventory"].includes(i))return!0}const n=e.permissions||[];return n.includes(`${i}.edit`)||n.includes(`${i}.full`)},s[2]=e,s[3]=a):a=s[3];const c=a;let u;s[4]!==c?(u=i=>c(i),s[4]=c,s[5]=u):u=s[5];const d=u;let h;s[6]!==e?(h=i=>e?e.role==="admin"||e.role==="capitan"?!0:(e.permissions||[]).includes(`${i}.full`):!1,s[6]=e,s[7]=h):h=s[7];const p=h;let f;return s[8]!==d||s[9]!==p||s[10]!==c||s[11]!==v||s[12]!==e?(f={hasPermission:v,canEdit:c,canCreate:d,canDelete:p,user:e},s[8]=d,s[9]=p,s[10]=c,s[11]=v,s[12]=e,s[13]=f):f=s[13],f}export{g as u};
