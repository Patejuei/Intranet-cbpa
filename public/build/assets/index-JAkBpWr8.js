import{c as B,r as D,u as P,j as e,H as z}from"./app-BHG2hm5T.js";import{P as T}from"./Pagination-M29wqbjb.js";import{B as E,C as A,A as L}from"./app-layout-hnxNyFOA.js";import{C as F}from"./CompanyFilter-CmpXURuL.js";import{u as I}from"./use-permissions-DmctSSGk.js";import{C as R}from"./calendar-B8B7z-vp.js";import{S as H}from"./save-FjQUSf57.js";import{a as O}from"./button-Z6kmdew5.js";/* empty css            */import"./index-KJ8nIQ1N.js";import"./index-DM6PgUW3.js";import"./index-q7GIQJN5.js";import"./shield-Nszra4Fu.js";import"./select-CKEgZyTl.js";import"./index-Q1HKqKhG.js";import"./chevron-down-BbetoyTj.js";import"./check-CGeZhyYa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],M=O("Activity",$);function de(t){const s=B.c(30),{logs:x}=t,[r,y]=D.useState("log"),{canCreate:_}=I();let p;s[0]===Symbol.for("react.memo_cache_sentinel")?(p={change_date:new Date().toISOString().split("T")[0],equipment_id:"",equipment_type:"Equipo de Respiracion",responsible_name:"",observations:""},s[0]=p):p=s[0];const{data:o,setData:l,post:k,processing:w,reset:C,errors:i}=P(p);let b;s[1]!==k||s[2]!==C?(b=a=>{a.preventDefault(),k("/batteries",{onSuccess:()=>{C(),y("log")}})},s[1]=k,s[2]=C,s[3]=b):b=s[3];const S=b;let f,g;s[4]===Symbol.for("react.memo_cache_sentinel")?(f=[{title:"Panel Principal",href:"/dashboard"},{title:"Baterías",href:"/batteries"}],g=e.jsx(z,{title:"Control de Baterías"}),s[4]=f,s[5]=g):(f=s[4],g=s[5]);let h;s[6]===Symbol.for("react.memo_cache_sentinel")?(h=()=>y("log"),s[6]=h):h=s[6];const q=`flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${r==="log"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"}`;let j;s[7]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx(A,{className:"size-4"}),s[7]=j):j=s[7];let n;s[8]!==q?(n=e.jsxs("button",{onClick:h,className:q,children:[j,"Bitácora"]}),s[8]=q,s[9]=n):n=s[9];let d;s[10]!==r||s[11]!==_?(d=_("batteries")&&e.jsxs("button",{onClick:()=>y("new"),className:`flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all ${r==="new"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"}`,children:[e.jsx(E,{className:"size-4"}),"Nuevo Registro"]}),s[10]=r,s[11]=_,s[12]=d):d=s[12];let c;s[13]!==n||s[14]!==d?(c=e.jsxs("div",{className:"flex w-full space-x-1 rounded-xl bg-muted p-1 md:w-fit",children:[n,d]}),s[13]=n,s[14]=d,s[15]=c):c=s[15];let v;s[16]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx(F,{}),s[16]=v):v=s[16];let m;s[17]!==c?(m=e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c,v]}),s[17]=c,s[18]=m):m=s[18];let u;s[19]!==r||s[20]!==o||s[21]!==i||s[22]!==x||s[23]!==w||s[24]!==l||s[25]!==S?(u=r==="new"?e.jsxs("div",{className:"max-w-2xl rounded-xl border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-2 text-primary",children:[e.jsx(E,{className:"size-5"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Registrar Cambio de Batería"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Fecha de Cambio"}),e.jsx("input",{type:"date",value:o.change_date,onChange:a=>l("change_date",a.target.value),onClick:J,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),i.change_date&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.change_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"ID del Equipo"}),e.jsx("input",{type:"text",value:o.equipment_id,onChange:a=>l("equipment_id",a.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Ej: ERA-01"}),i.equipment_id&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.equipment_id})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Tipo de Equipo"}),e.jsxs("select",{value:o.equipment_type,onChange:a=>l("equipment_type",a.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",children:[e.jsx("option",{value:"Equipo de Respiracion",children:"Equipo de Respiración"}),e.jsx("option",{value:"Toma presion",children:"Toma Presión"}),e.jsx("option",{value:"Saturometro",children:"Saturómetro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Responsable del Cambio"}),e.jsx("input",{type:"text",value:o.responsible_name,onChange:a=>l("responsible_name",a.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Nombre del Bombero"}),i.responsible_name&&e.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.responsible_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Observaciones"}),e.jsx("textarea",{value:o.observations,onChange:a=>l("observations",a.target.value),className:"min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"Detalles adicionales..."})]}),e.jsx("div",{className:"rounded-lg bg-muted/50 p-4 text-sm text-muted-foreground",children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"size-4"}),"Próximo cambio programado:"," ",e.jsx("span",{className:"font-semibold text-foreground",children:"6 meses después de la fecha seleccionada"})]})}),e.jsxs("button",{type:"submit",disabled:w,className:"flex h-10 w-full items-center justify-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90",children:[e.jsx(H,{className:"size-4"}),"Registrar Cambio"]})]})]}):e.jsxs("div",{className:"rounded-xl border bg-card shadow-sm",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(M,{className:"size-5 text-primary"}),"Bitácora de Cambios"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-muted/50 text-muted-foreground",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-medium",children:"Fecha Cambio"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Equipo"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Responsable"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Próx. Cambio"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Observaciones"})]})}),e.jsx("tbody",{className:"divide-y",children:x.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-muted-foreground",children:"No hay registros en la bitácora."})}):x.data.map(G)})]})}),e.jsx(T,{links:x.links})]}),s[19]=r,s[20]=o,s[21]=i,s[22]=x,s[23]=w,s[24]=l,s[25]=S,s[26]=u):u=s[26];let N;return s[27]!==m||s[28]!==u?(N=e.jsxs(L,{breadcrumbs:f,children:[g,e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[m,u]})]}),s[27]=m,s[28]=u,s[29]=N):N=s[29],N}function G(t){return e.jsxs("tr",{className:"hover:bg-muted/30",children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:new Date(t.change_date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3",children:t.equipment_id}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"rounded-full bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:t.equipment_type})}),e.jsx("td",{className:"px-4 py-3",children:t.responsible_name}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"flex items-center gap-1 font-medium text-orange-600",children:[e.jsx(R,{className:"size-3"}),new Date(t.next_change_date).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})]})}),e.jsx("td",{className:"px-4 py-3 text-muted-foreground italic",children:t.observations||"-"})]},t.id)}function J(t){return t.currentTarget.showPicker()}export{de as default};
