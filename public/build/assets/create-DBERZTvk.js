import{c as ge,b as ve,u as _e,r as ye,j as t,H as Ce,L as Se}from"./app-C47ajvwZ.js";import{P as Ne,C as we,a as Ie,b as Ae,c as Pe,d as qe,e as Fe,f as De,g as Ee,M as Te}from"./MaterialSelector-D4ONLMMy.js";import{B as W,c as ke}from"./button-DVWjdZ4N.js";import{I as be}from"./input-CblF7ANJ.js";import{L as V}from"./label-DqjRn-RE.js";import{a as Le,b as Oe,c as ze,d as g,S as Me}from"./select-0NitHrxQ.js";import{b as Re,A as Be}from"./app-layout-B6KaDQVR.js";import{C as $e}from"./check-CACIjfi_.js";import{P as Ge}from"./plus-C4IXFyQP.js";import{S as He}from"./save-BHXrfrvd.js";import{T as Qe}from"./trash-DO5sdDpu.js";/* empty css            */import"./index-uxvNNlD4.js";import"./search-Dqacs-x-.js";import"./index-BtrKZ9Fe.js";import"./index-bHth5DbO.js";import"./chevron-down-CmnyaBXa.js";import"./index-C4J_hXM0.js";import"./shield-ip1xpS6g.js";function pt(U){const e=ge.c(107),{firefighters:l,materials:r}=U,{props:_}=ve(),{auth:f}=_,b=f.user;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Date().toISOString().split("T"),e[0]=m):m=e[0];const c=b.company==="Comandancia"||b.role==="admin"||b.role==="capitan"?"Segunda Compañía":b.company||"";let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=[{material_id:"",quantity:1}],e[1]=d):d=e[1];let n;e[2]!==c?(n={firefighter_id:"",date:m[0],observations:"",company:c,items:d},e[2]=c,e[3]=n):n=e[3];const{data:a,setData:s,post:u,processing:x,errors:o}=_e(n),[h,j]=ye.useState(!1);let v;e[4]!==a.items||e[5]!==s?(v=()=>{s("items",[...a.items,{material_id:"",quantity:1}])},e[4]=a.items,e[5]=s,e[6]=v):v=e[6];const y=v;let X;e[7]!==a.items||e[8]!==s?(X=i=>{const p=[...a.items];p.splice(i,1),s("items",p)},e[7]=a.items,e[8]=s,e[9]=X):X=e[9];const J=X;let Y;e[10]!==a.items||e[11]!==s?(Y=(i,p,ue)=>{const je=[...a.items];je[i][p]=ue,s("items",je)},e[10]=a.items,e[11]=s,e[12]=Y):Y=e[12];const K=Y;let Z;e[13]!==u?(Z=i=>{i.preventDefault(),u("/deliveries")},e[13]=u,e[14]=Z):Z=e[14];const xe=Z;let ee,te;e[15]===Symbol.for("react.memo_cache_sentinel")?(te=[{title:"Actas de Entrega",href:"/deliveries"},{title:"Nueva Acta",href:"/deliveries/create"}],ee=t.jsx(Ce,{title:"Nueva Acta de Entrega"}),e[15]=ee,e[16]=te):(ee=e[15],te=e[16]);let ae;e[17]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Nueva Acta de Entrega"}),t.jsx("p",{className:"text-muted-foreground",children:"Registre la entrega de material a un voluntario."})]}),e[17]=ae):ae=e[17];let se;e[18]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(V,{children:"Bombero Receptor"}),e[18]=se):se=e[18];let C;e[19]!==a.firefighter_id||e[20]!==l?(C=a.firefighter_id?l.find(i=>i.id.toString()===a.firefighter_id)?.full_name:"Seleccione bombero...",e[19]=a.firefighter_id,e[20]=l,e[21]=C):C=e[21];let ie;e[22]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(Re,{className:"opacity-50"}),e[22]=ie):ie=e[22];let S;e[23]!==h||e[24]!==C?(S=t.jsx(Ne,{asChild:!0,children:t.jsxs(W,{variant:"outline",role:"combobox","aria-expanded":h,className:"w-full justify-between",children:[C,ie]})}),e[23]=h,e[24]=C,e[25]=S):S=e[25];let le;e[26]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(we,{placeholder:"Buscar bombero..."}),e[26]=le):le=e[26];let re;e[27]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Ie,{children:"No se encontró bombero."}),e[27]=re):re=e[27];let N;if(e[28]!==a.firefighter_id||e[29]!==l||e[30]!==s){let i;e[32]!==a.firefighter_id||e[33]!==s?(i=p=>t.jsxs(Ae,{value:p.full_name,onSelect:()=>{s("firefighter_id",p.id.toString()),j(!1)},children:[p.full_name,t.jsx($e,{className:ke("ml-auto",a.firefighter_id===p.id.toString()?"opacity-100":"opacity-0")})]},p.id),e[32]=a.firefighter_id,e[33]=s,e[34]=i):i=e[34],N=l.map(i),e[28]=a.firefighter_id,e[29]=l,e[30]=s,e[31]=N}else N=e[31];let w;e[35]!==N?(w=t.jsx(Pe,{className:"w-[--radix-popover-trigger-width] p-0",children:t.jsxs(qe,{children:[le,t.jsxs(Fe,{children:[re,t.jsx(De,{children:N})]})]})}),e[35]=N,e[36]=w):w=e[36];let I;e[37]!==h||e[38]!==S||e[39]!==w?(I=t.jsxs(Ee,{open:h,onOpenChange:j,children:[S,w]}),e[37]=h,e[38]=S,e[39]=w,e[40]=I):I=e[40];let A;e[41]!==o.firefighter_id?(A=o.firefighter_id&&t.jsx("p",{className:"text-sm text-red-500",children:o.firefighter_id}),e[41]=o.firefighter_id,e[42]=A):A=e[42];let P;e[43]!==I||e[44]!==A?(P=t.jsxs("div",{className:"flex flex-col gap-2",children:[se,I,A]}),e[43]=I,e[44]=A,e[45]=P):P=e[45];let oe;e[46]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(V,{htmlFor:"date",children:"Fecha"}),e[46]=oe):oe=e[46];let q;e[47]!==s?(q=i=>s("date",i.target.value),e[47]=s,e[48]=q):q=e[48];let F;e[49]!==a.date||e[50]!==q?(F=t.jsx(be,{type:"date",id:"date",value:a.date,onChange:q,required:!0}),e[49]=a.date,e[50]=q,e[51]=F):F=e[51];let D;e[52]!==o.date?(D=o.date&&t.jsx("p",{className:"text-sm text-red-500",children:o.date}),e[52]=o.date,e[53]=D):D=e[53];let E;e[54]!==F||e[55]!==D?(E=t.jsxs("div",{className:"grid gap-2",children:[oe,F,D]}),e[54]=F,e[55]=D,e[56]=E):E=e[56];let T;e[57]!==P||e[58]!==E?(T=t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[P,E]}),e[57]=P,e[58]=E,e[59]=T):T=e[59];let ne;e[60]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(V,{htmlFor:"company",children:"Compañía"}),e[60]=ne):ne=e[60];let k;e[61]!==s?(k=i=>s("company",i),e[61]=s,e[62]=k):k=e[62];let L;e[63]!==a.company||e[64]!==k?(L=t.jsxs("div",{className:"grid gap-2",children:[ne,t.jsx(Ue,{value:a.company,onChange:k})]}),e[63]=a.company,e[64]=k,e[65]=L):L=e[65];let O;e[66]!==T||e[67]!==L?(O=t.jsxs("div",{className:"grid gap-4 rounded-xl border bg-card p-6 shadow-sm",children:[T,L]}),e[66]=T,e[67]=L,e[68]=O):O=e[68];let me;e[69]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("h3",{className:"text-lg font-semibold",children:"Materiales"}),e[69]=me):me=e[69];let ce;e[70]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(Ge,{className:"mr-2 size-4"}),e[70]=ce):ce=e[70];let z;e[71]!==y?(z=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[me,t.jsxs(W,{type:"button",variant:"outline",size:"sm",onClick:y,children:[ce," Agregar Item"]})]}),e[71]=y,e[72]=z):z=e[72];let M;if(e[73]!==a.items||e[74]!==r||e[75]!==J||e[76]!==K){let i;e[78]!==a.items.length||e[79]!==r||e[80]!==J||e[81]!==K?(i=(p,ue)=>t.jsx(Ve,{item:p,index:ue,materials:r,updateItem:K,removeItem:J,isSingle:a.items.length===1},ue),e[78]=a.items.length,e[79]=r,e[80]=J,e[81]=K,e[82]=i):i=e[82],M=a.items.map(i),e[73]=a.items,e[74]=r,e[75]=J,e[76]=K,e[77]=M}else M=e[77];let R;e[83]!==M?(R=t.jsx("div",{className:"space-y-4",children:M}),e[83]=M,e[84]=R):R=e[84];let B;e[85]!==o.items?(B=o.items&&t.jsx("p",{className:"mt-2 text-sm text-red-500",children:o.items}),e[85]=o.items,e[86]=B):B=e[86];let $;e[87]!==z||e[88]!==R||e[89]!==B?($=t.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[z,R,B]}),e[87]=z,e[88]=R,e[89]=B,e[90]=$):$=e[90];let de;e[91]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(V,{htmlFor:"observations",children:"Observaciones"}),e[91]=de):de=e[91];let G;e[92]!==s?(G=i=>s("observations",i.target.value),e[92]=s,e[93]=G):G=e[93];let H;e[94]!==a.observations||e[95]!==G?(H=t.jsxs("div",{className:"grid gap-2 rounded-xl border bg-card p-6 shadow-sm",children:[de,t.jsx("textarea",{id:"observations",value:a.observations,onChange:G,className:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50"})]}),e[94]=a.observations,e[95]=G,e[96]=H):H=e[96];let fe;e[97]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(Se,{href:"/deliveries",children:t.jsx(W,{type:"button",variant:"outline",children:"Cancelar"})}),e[97]=fe):fe=e[97];let pe;e[98]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(He,{className:"size-4"}),e[98]=pe):pe=e[98];let Q;e[99]!==x?(Q=t.jsxs("div",{className:"flex justify-end gap-4",children:[fe,t.jsxs(W,{type:"submit",disabled:x,className:"gap-2",children:[pe," Guardar Acta"]})]}),e[99]=x,e[100]=Q):Q=e[100];let he;return e[101]!==xe||e[102]!==O||e[103]!==$||e[104]!==H||e[105]!==Q?(he=t.jsxs(Be,{breadcrumbs:te,children:[ee,t.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-6 p-4",children:[ae,t.jsxs("form",{onSubmit:xe,className:"flex flex-col gap-6",children:[O,$,H,Q]})]})]}),e[101]=xe,e[102]=O,e[103]=$,e[104]=H,e[105]=Q,e[106]=he):he=e[106],he}function Ve(U){const e=ge.c(26),{item:l,index:r,materials:_,updateItem:f,removeItem:b,isSingle:m}=U;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(V,{children:"Material"}),e[0]=c):c=e[0];const d=l.material_id?parseInt(l.material_id):void 0;let n;e[1]!==r||e[2]!==f?(n=y=>f(r,"material_id",y.toString()),e[1]=r,e[2]=f,e[3]=n):n=e[3];let a;e[4]!==_||e[5]!==d||e[6]!==n?(a=t.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[c,t.jsx(Te,{materials:_,value:d,onChange:n,placeholder:"Seleccione material (Nombre, Cód, o S/N)..."})]}),e[4]=_,e[5]=d,e[6]=n,e[7]=a):a=e[7];let s;e[8]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(V,{children:"Cantidad"}),e[8]=s):s=e[8];let u;e[9]!==r||e[10]!==f?(u=y=>f(r,"quantity",parseInt(y.target.value)),e[9]=r,e[10]=f,e[11]=u):u=e[11];let x;e[12]!==l.quantity||e[13]!==u?(x=t.jsxs("div",{className:"grid w-32 gap-2",children:[s,t.jsx(be,{type:"number",min:"1",value:l.quantity,onChange:u,required:!0})]}),e[12]=l.quantity,e[13]=u,e[14]=x):x=e[14];let o;e[15]!==r||e[16]!==b?(o=()=>b(r),e[15]=r,e[16]=b,e[17]=o):o=e[17];let h;e[18]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Qe,{className:"size-4"}),e[18]=h):h=e[18];let j;e[19]!==m||e[20]!==o?(j=t.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-50 hover:text-red-600",onClick:o,disabled:m,children:h}),e[19]=m,e[20]=o,e[21]=j):j=e[21];let v;return e[22]!==j||e[23]!==a||e[24]!==x?(v=t.jsxs("div",{className:"flex items-end gap-4 border-b pb-4 last:border-0 last:pb-0",children:[a,x,j]}),e[22]=j,e[23]=a,e[24]=x,e[25]=v):v=e[25],v}function Ue(U){const e=ge.c(7),{value:l,onChange:r}=U,{auth:_}=ve().props,f=_.user;if(!(f.role==="admin"||f.role==="capitan"||f.company==="Comandancia")){let n;return e[0]!==l?(n=t.jsx(be,{value:l,disabled:!0,className:"bg-muted text-muted-foreground opacity-100"}),e[0]=l,e[1]=n):n=e[1],n}let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(Le,{className:"w-full",children:t.jsx(Oe,{placeholder:"Seleccione Compañía"})}),e[2]=m):m=e[2];let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsxs(ze,{children:[t.jsx(g,{value:"Primera Compañía",children:"Primera Compañía"}),t.jsx(g,{value:"Segunda Compañía",children:"Segunda Compañía"}),t.jsx(g,{value:"Tercera Compañía",children:"Tercera Compañía"}),t.jsx(g,{value:"Cuarta Compañía",children:"Cuarta Compañía"}),t.jsx(g,{value:"Quinta Compañía",children:"Quinta Compañía"}),t.jsx(g,{value:"Séptima Compañía",children:"Séptima Compañía"}),t.jsx(g,{value:"Octava Compañía",children:"Octava Compañía"}),t.jsx(g,{value:"Novena Compañía",children:"Novena Compañía"}),t.jsx(g,{value:"Décima Compañía",children:"Décima Compañía"}),t.jsx(g,{value:"Comandancia",children:"Comandancia"})]}),e[3]=c):c=e[3];let d;return e[4]!==r||e[5]!==l?(d=t.jsxs(Me,{value:l,onValueChange:r,children:[m,c]}),e[4]=r,e[5]=l,e[6]=d):d=e[6],d}export{pt as default};
