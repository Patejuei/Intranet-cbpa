import{c as F,r as I,j as s,L as U,a as D,H as K}from"./app-BdiyVtwP.js";import{B as V}from"./badge-CjAOFmVA.js";import{B}from"./button-xAfePOcQ.js";import{I as q}from"./input-BjaQHf93.js";import{a as G,b as J,c as O,d as E,S as Q}from"./select-DOU_d7Pk.js";import{T as M,a as l,b as W,c,d as X,e as Y}from"./table-DUs4X4Ou.js";import{A as Z}from"./app-layout-CSJ5C79X.js";import{S as ee}from"./square-pen-_zuLOtYR.js";import{T as se}from"./trash-2-B-Vzxb9S.js";import{D as te}from"./download-D7WgxGU9.js";import{P as ae}from"./plus-CB9EhXD0.js";import{S as re}from"./search-DxV1-ySb.js";/* empty css            */import"./index-CqnVgCet.js";import"./index-BhFFVPsB.js";import"./index-8PdPfJj1.js";import"./check--A3dgnPr.js";import"./index-q7GIQJN5.js";import"./shield-CtYr_qvg.js";function we(x){const e=F.c(31),{items:u,filters:a}=x,[o,L]=I.useState(a.search||""),[r,R]=I.useState(a.category||"all");let f,j;e[0]!==r||e[1]!==a.category||e[2]!==a.search||e[3]!==o?(f=()=>{const t=setTimeout(()=>{const z=a.search||"",$=a.category||"all";(o!==z||r!==$)&&D.get("/vehicles/inventory",{search:o,category:r!=="all"?r:void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},j=[o,r,a.search,a.category],e[0]=r,e[1]=a.category,e[2]=a.search,e[3]=o,e[4]=f,e[5]=j):(f=e[4],j=e[5]),I.useEffect(f,j);let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=t=>{R(t)},e[6]=g):g=e[6];const A=g,H=oe,P=le;let p,b;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=[{title:"Material Mayor",href:"/vehicles/status"},{title:"Bodega",href:"/vehicles/inventory"}],b=s.jsx(K,{title:"Bodega Material Mayor"}),e[7]=p,e[8]=b):(p=e[7],b=e[8]);let v;e[9]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Bodega Material Mayor"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestión de repuestos, insumos y control de stock."})]}),e[9]=v):v=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(B,{variant:"outline",asChild:!0,children:s.jsxs("a",{href:"/vehicles/inventory/export",children:[s.jsx(te,{className:"mr-2 h-4 w-4"}),"Descargar Excel"]})}),e[10]=y):y=e[10];let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[v,s.jsxs("div",{className:"flex items-center gap-2",children:[y,s.jsx(B,{asChild:!0,children:s.jsxs(U,{href:"/vehicles/inventory/create",children:[s.jsx(ae,{className:"mr-2 h-4 w-4"}),"Nuevo Ítem"]})})]})]}),e[11]=N):N=e[11];let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(re,{className:"absolute top-2.5 left-2.5 h-4 w-4 text-muted-foreground"}),e[12]=S):S=e[12];let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=t=>L(t.target.value),e[13]=_):_=e[13];let n;e[14]!==o?(n=s.jsxs("div",{className:"relative flex-1",children:[S,s.jsx(q,{placeholder:"Buscar por nombre, SKU o ubicación...",className:"pl-9",value:o,onChange:_})]}),e[14]=o,e[15]=n):n=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(G,{className:"w-[180px]",children:s.jsx(J,{placeholder:"Categoría"})}),e[16]=C):C=e[16];let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs(O,{children:[s.jsx(E,{value:"all",children:"Todas"}),s.jsx(E,{value:"insumo",children:"Insumos"}),s.jsx(E,{value:"repuesto",children:"Repuestos"})]}),e[17]=w):w=e[17];let i;e[18]!==r?(i=s.jsxs(Q,{value:r,onValueChange:A,children:[C,w]}),e[18]=r,e[19]=i):i=e[19];let d;e[20]!==n||e[21]!==i?(d=s.jsxs("div",{className:"flex items-center gap-4 rounded-lg border bg-card p-4 shadow-sm",children:[n,i]}),e[20]=n,e[21]=i,e[22]=d):d=e[22];let T;e[23]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(W,{className:"bg-muted/50",children:s.jsxs(M,{children:[s.jsx(c,{className:"w-[100px]",children:"SKU"}),s.jsx(c,{children:"Nombre"}),s.jsx(c,{children:"Categoría"}),s.jsx(c,{children:"Unidad"}),s.jsx(c,{className:"text-right",children:"Stock"}),s.jsx(c,{className:"text-right",children:"Costo Unit."}),s.jsx(c,{children:"Ubicación"}),s.jsx(c,{className:"text-right",children:"Acciones"})]})}),e[23]=T):T=e[23];let m;e[24]!==u.data?(m=u.data.length===0?s.jsx(M,{children:s.jsx(l,{colSpan:8,className:"h-24 text-center text-muted-foreground",children:"No se encontraron ítems en la bodega."})}):u.data.map(t=>s.jsxs(M,{className:"transition-colors hover:bg-muted/50",children:[s.jsx(l,{className:"font-mono text-xs font-medium text-muted-foreground",children:t.sku||"N/A"}),s.jsx(l,{className:"font-medium",children:t.name}),s.jsx(l,{children:s.jsx(V,{variant:t.category==="insumo"?"secondary":"outline",className:t.category==="insumo"?"bg-blue-100 text-blue-700 hover:bg-blue-100":"border-orange-200 text-orange-700",children:t.category==="insumo"?"Insumo":"Repuesto"})}),s.jsx(l,{className:"capitalize",children:t.unit_of_measure||"Unidades"}),s.jsx(l,{className:"text-right",children:s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:t.stock<=t.min_stock?"font-bold text-red-600":"font-medium",children:t.stock}),t.stock<=t.min_stock&&s.jsx("span",{className:"text-[10px] font-medium text-red-500",children:"Bajo Stock"})]})}),s.jsx(l,{className:"text-right text-muted-foreground tabular-nums",children:P(t.unit_cost)}),s.jsx(l,{className:"text-muted-foreground",children:t.location||"-"}),s.jsx(l,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(B,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 hover:bg-blue-50 hover:text-blue-600",children:s.jsx(U,{href:`/vehicles/inventory/${t.id}/edit`,children:s.jsx(ee,{className:"h-4 w-4"})})}),s.jsx(B,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:bg-red-50 hover:text-red-600",onClick:()=>H(t.id),children:s.jsx(se,{className:"h-4 w-4"})})]})})]},t.id)),e[24]=u.data,e[25]=m):m=e[25];let h;e[26]!==m?(h=s.jsx("div",{className:"overflow-hidden rounded-xl border bg-card shadow-sm",children:s.jsxs(X,{children:[T,s.jsx(Y,{children:m})]})}),e[26]=m,e[27]=h):h=e[27];let k;return e[28]!==d||e[29]!==h?(k=s.jsxs(Z,{breadcrumbs:p,children:[b,s.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[N,d,h]})]}),e[28]=d,e[29]=h,e[30]=k):k=e[30],k}function le(x){return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(x)}function oe(x){confirm("¿Está seguro de eliminar este ítem?")&&D.delete(`/vehicles/inventory/${x}`)}export{we as default};
