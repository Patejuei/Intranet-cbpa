import{c as q,b as J,r as H,j as s,L as R,a as A,H as K}from"./app-C47ajvwZ.js";import{B as Q}from"./badge-DZe8-Xs4.js";import{B as M,f as D}from"./button-DVWjdZ4N.js";import{b as U,c as X}from"./card-CeHVsmD0.js";import{I as Y}from"./input-CblF7ANJ.js";import{a as Z,b as ee,c as se,d as V,S as te}from"./select-0NitHrxQ.js";import{b as F,e as i,a as le,c as o,T as ae,d as re}from"./table-q-l7kzQy.js";import{u as ie}from"./use-permissions-DOQFHan-.js";import{F as ce,A as oe}from"./app-layout-B6KaDQVR.js";import{P as ne}from"./plus-C4IXFyQP.js";import{E as de}from"./eye-CdBUzsY0.js";import{S as he}from"./search-Dqacs-x-.js";/* empty css            */import"./index-uxvNNlD4.js";import"./index-BtrKZ9Fe.js";import"./index-bHth5DbO.js";import"./chevron-down-CmnyaBXa.js";import"./check-CACIjfi_.js";import"./index-C4J_hXM0.js";import"./shield-ip1xpS6g.js";function Be(){const e=q.c(43),{maintenances:l,filters:r}=J().props,{canCreate:B}=ie(),[a,G]=H.useState(r.search||""),[c,O]=H.useState(a);let j,v;e[0]!==a?(j=()=>{const t=setTimeout(()=>{O(a)},300);return()=>clearTimeout(t)},v=[a],e[0]=a,e[1]=j,e[2]=v):(j=e[1],v=e[2]),H.useEffect(j,v);let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=t=>{G(t)},e[3]=g):g=e[3];const W=g;let b;e[4]!==a?(b=t=>{A.get("/vehicles/workshop",{status:t,search:a},{preserveState:!0,replace:!0})},e[4]=a,e[5]=b):b=e[5];const L=b;let _;e[6]!==c||e[7]!==r.search||e[8]!==r.status?(_=()=>{c!==r.search&&A.get("/vehicles/workshop",{status:r.status,search:c},{preserveState:!0,replace:!0})},e[6]=c,e[7]=r.search,e[8]=r.status,e[9]=_):_=e[9];let S;e[10]!==c?(S=[c],e[10]=c,e[11]=S):S=e[11],H.useEffect(_,S);const $=xe;let N,y;e[12]===Symbol.for("react.memo_cache_sentinel")?(N=[{title:"Panel Principal",href:"/dashboard"},{title:"Material Mayor",href:"/vehicles/dashboard"},{title:"Taller Mecánico",href:"/vehicles/workshop"}],y=s.jsx(K,{title:"Taller Mecánico"}),e[12]=N,e[13]=y):(N=e[12],y=e[13]);let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Taller Mecánico"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestión de ingresos y reparaciones de vehículos."})]}),e[14]=T):T=e[14];let n;e[15]!==B?(n=B("vehicles.workshop")&&s.jsx(M,{asChild:!0,children:s.jsxs(R,{href:"/vehicles/workshop/create",children:[s.jsx(ne,{className:"mr-2 size-4"})," Nuevo Ingreso"]})}),e[15]=B,e[16]=n):n=e[16];let d;e[17]!==n?(d=s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[T,s.jsx("div",{className:"flex items-center gap-2",children:n})]}),e[17]=n,e[18]=d):d=e[18];let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(he,{className:"absolute top-2.5 left-2 h-4 w-4 text-muted-foreground"}),e[19]=w):w=e[19];let C;e[20]===Symbol.for("react.memo_cache_sentinel")?(C=t=>W(t.target.value),e[20]=C):C=e[20];let h;e[21]!==a?(h=s.jsxs("div",{className:"relative w-full md:w-64",children:[w,s.jsx(Y,{placeholder:"Buscar vehículo...",value:a,onChange:C,className:"pl-8"})]}),e[21]=a,e[22]=h):h=e[22];const P=r.status||"active";let E;e[23]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(Z,{className:"w-full md:w-[200px]",children:s.jsx(ee,{placeholder:"Filtrar por estado"})}),e[23]=E):E=e[23];let k;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs(se,{children:[s.jsx(V,{value:"active",children:"Activos (En Taller)"}),s.jsx(V,{value:"history",children:"Historial (Finalizados)"}),s.jsx(V,{value:"all",children:"Todos"})]}),e[24]=k):k=e[24];let m;e[25]!==L||e[26]!==P?(m=s.jsxs(te,{defaultValue:P,onValueChange:L,children:[E,k]}),e[25]=L,e[26]=P,e[27]=m):m=e[27];let x;e[28]!==h||e[29]!==m?(x=s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[h,m]}),e[28]=h,e[29]=m,e[30]=x):x=e[30];let I;e[31]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(le,{children:s.jsxs(F,{children:[s.jsx(o,{children:"Vehículo"}),s.jsx(o,{children:"Compañía"}),s.jsx(o,{children:"Taller"}),s.jsx(o,{children:"Fecha Ingreso"}),s.jsx(o,{children:"Salida Est."}),s.jsx(o,{children:"Estado"}),s.jsx(o,{className:"text-right",children:"Acciones"})]})}),e[31]=I):I=e[31];let f;e[32]!==l.data?(f=l.data.length===0?s.jsx(F,{children:s.jsx(i,{colSpan:7,className:"h-24 text-center",children:"No hay registros encontrados."})}):l.data.map(t=>s.jsxs(F,{children:[s.jsxs(i,{className:"font-medium",children:[t.vehicle.name,s.jsx("div",{className:"text-xs text-muted-foreground",children:t.vehicle.plate})]}),s.jsx(i,{children:t.vehicle.company}),s.jsx(i,{children:t.workshop_name}),s.jsx(i,{children:D(t.entry_date)}),s.jsx(i,{children:t.tentative_exit_date?D(t.tentative_exit_date):"-"}),s.jsx(i,{children:s.jsx(Q,{className:`${$(t.status)} hover:${$(t.status)}`,children:t.status})}),s.jsx(i,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(M,{variant:"ghost",size:"icon",asChild:!0,title:"Ver Detalle",children:s.jsx(R,{href:`/vehicles/workshop/${t.id}`,children:s.jsx(de,{className:"size-4"})})}),s.jsx(M,{variant:"ghost",size:"icon",asChild:!0,title:"Imprimir Orden",children:s.jsx("a",{href:`/vehicles/workshop/${t.id}/print`,target:"_blank",rel:"noreferrer",children:s.jsx(ce,{className:"size-4"})})})]})})]},t.id)),e[32]=l.data,e[33]=f):f=e[33];let u;e[34]!==f?(u=s.jsx(U,{children:s.jsx(X,{className:"p-0",children:s.jsxs(ae,{children:[I,s.jsx(re,{children:f})]})})}),e[34]=f,e[35]=u):u=e[35];let p;e[36]!==l.links?(p=l.links.length>3&&s.jsx("div",{className:"flex justify-center gap-2",children:l.links.map(me)}),e[36]=l.links,e[37]=p):p=e[37];let z;return e[38]!==d||e[39]!==x||e[40]!==u||e[41]!==p?(z=s.jsxs(oe,{breadcrumbs:N,children:[y,s.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[d,x,u,p]})]}),e[38]=d,e[39]=x,e[40]=u,e[41]=p,e[42]=z):z=e[42],z}function me(e,l){return e.url?s.jsx(M,{variant:e.active?"default":"outline",size:"sm",asChild:!0,children:s.jsx(R,{href:e.url,dangerouslySetInnerHTML:{__html:e.label}})},l):s.jsx("span",{className:"px-2 text-sm text-muted-foreground",dangerouslySetInnerHTML:{__html:e.label}},l)}function xe(e){switch(e){case"En Taller":return"bg-blue-500";case"Esperando Repuestos":return"bg-yellow-500";case"Listo para Retiro":return"bg-green-500";default:return"bg-gray-500"}}export{Be as default};
