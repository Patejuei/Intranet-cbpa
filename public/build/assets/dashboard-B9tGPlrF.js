import{c as J,r as A,j as e,H as K,L as l}from"./app-DzYONblR.js";import{B as Y,M as F,A as G}from"./app-layout-DRncw1WE.js";import{a as Q,f as V}from"./button-D4aJ6-mY.js";/* empty css            */import"./index-DxUIriey.js";import"./index-C66545D9.js";import"./index-C4J_hXM0.js";import"./shield-BbymYV2N.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Z=Q("Clock",X),ee=[{title:"Panel Principal",href:"/dashboard"}],se="recent_modules";function ve(t){const s=J.c(43),{upcomingBatteries:h,pendingTickets:a,respondedTickets:u,vehiclesStopped:f,pendingIncidents:g,vehiclesInWorkshop:j}=t;let b;s[0]!==h?(b=h===void 0?[]:h,s[0]=h,s[1]=b):b=s[1];const N=b;let v;s[2]!==a?(v=a===void 0?[]:a,s[2]=a,s[3]=v):v=s[3];const y=v;let _;s[4]!==u?(_=u===void 0?[]:u,s[4]=u,s[5]=_):_=s[5];const w=_;let S;s[6]!==f?(S=f===void 0?[]:f,s[6]=f,s[7]=S):S=s[7];const k=S;let E;s[8]!==g?(E=g===void 0?[]:g,s[8]=g,s[9]=E):E=s[9];const T=E;let z;s[10]!==j?(z=j===void 0?[]:j,s[10]=j,s[11]=z):z=s[11];const I=z;let M;s[12]===Symbol.for("react.memo_cache_sentinel")?(M=[],s[12]=M):M=s[12];const[R,U]=A.useState(M);let D,q;s[13]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{try{const r=localStorage.getItem(se);if(r){const H=JSON.parse(r).map(xe).filter(me);U(H)}}catch(r){console.error("Error loading recent modules",r)}},q=[],s[13]=D,s[14]=q):(D=s[13],q=s[14]),A.useEffect(D,q);const W=oe;let B;s[15]===Symbol.for("react.memo_cache_sentinel")?(B=e.jsx(K,{title:"Material Menor - CBPA"}),s[15]=B):B=s[15];let d;s[16]!==y?(d=y.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-yellow-500"}),"Tickets Pendientes"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes que requieren atención."})]}),e.jsx("div",{className:"space-y-3",children:y.map(ce)})]}),s[16]=y,s[17]=d):d=s[17];let n;s[18]!==w?(n=w.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-blue-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-blue-500"}),"Tickets en Proceso"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes con respuesta de Comandancia."})]}),e.jsx("div",{className:"space-y-3",children:w.map(ie)})]}),s[18]=w,s[19]=n):n=s[19];let i;s[20]!==k?(i=k.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-red-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-red-500"}),"Material Fuera de Servicio"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos detenidos o en taller."})]}),e.jsx("div",{className:"space-y-3",children:k.map(ne)})]}),s[20]=k,s[21]=i):i=s[21];let c;s[22]!==T?(c=T.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-orange-500 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-orange-500"}),"Incidencias Pendientes"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Novedades reportadas sin resolver."})]}),e.jsx("div",{className:"space-y-3",children:T.map(de)})]}),s[22]=T,s[23]=c):c=s[23];let o;s[24]!==i||s[25]!==c?(o=e.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[i,c]}),s[24]=i,s[25]=c,s[26]=o):o=s[26];let m;s[27]!==I?(m=I.length>0&&e.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-600 bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[e.jsx("span",{className:"flex size-3 rounded-full bg-yellow-600"}),"Unidades en Taller"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos con orden de trabajo activa."})]}),e.jsx("div",{className:"space-y-3",children:I.map(ae)})]}),s[27]=I,s[28]=m):m=s[28];let x;s[29]!==N?(x=N.length>0&&e.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary",children:e.jsx(Y,{className:"size-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Próximos Cambios de Baterías"}),e.jsx("p",{className:"text-muted-foreground",children:"Equipos que requieren atención pronto"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-left font-medium text-muted-foreground",children:[e.jsx("th",{className:"pb-2",children:"Fecha"}),e.jsx("th",{className:"pb-2",children:"Días"}),e.jsx("th",{className:"pb-2",children:"Equipo"}),e.jsx("th",{className:"pb-2",children:"Responsable"}),e.jsx("th",{className:"pb-2",children:"Compañía"})]})}),e.jsx("tbody",{className:"divide-y",children:N.map(r=>{const O=W(r.next_change_date);return e.jsxs("tr",{children:[e.jsx("td",{className:"py-3",children:V(r.next_change_date)}),e.jsx("td",{className:"py-3",children:e.jsxs("span",{className:`rounded px-2 py-1 font-bold ${O<=3?"bg-destructive/20 text-destructive":"bg-muted text-muted-foreground"}`,children:[O," días"]})}),e.jsx("td",{className:"py-3",children:r.equipment_type}),e.jsx("td",{className:"py-3",children:r.responsible_name}),e.jsx("td",{className:"py-3",children:r.company})]},r.id)})})]})})]}),s[29]=N,s[30]=x):x=s[30];let p;s[31]!==R?(p=R.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Z,{className:"size-4"}),e.jsx("h2",{className:"text-sm font-medium tracking-wider uppercase",children:"Visitados Recientemente"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:R.map(le)})]}),s[31]=R,s[32]=p):p=s[32];let C;s[33]===Symbol.for("react.memo_cache_sentinel")?(C=e.jsx("h2",{className:"text-sm font-medium tracking-wider text-muted-foreground uppercase",children:"Todos los Módulos"}),s[33]=C):C=s[33];let P;s[34]===Symbol.for("react.memo_cache_sentinel")?(P=e.jsxs("div",{className:"space-y-4",children:[C,e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:F.filter(re).map(te)})]}),s[34]=P):P=s[34];let $;s[35]===Symbol.for("react.memo_cache_sentinel")?($=e.jsxs("div",{className:"rounded-xl border bg-muted/40 p-6",children:[e.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Bienvenido al Sistema de Material Menor"}),e.jsx("p",{className:"text-muted-foreground",children:"Seleccione una opción de arriba para comenzar sus operaciones."})]}),s[35]=$):$=s[35];let L;return s[36]!==d||s[37]!==n||s[38]!==o||s[39]!==m||s[40]!==x||s[41]!==p?(L=e.jsxs(G,{breadcrumbs:ee,children:[B,e.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[d,n,o,m,x,p,P,$]})]}),s[36]=d,s[37]=n,s[38]=o,s[39]=m,s[40]=x,s[41]=p,s[42]=L):L=s[42],L}function te(t){const s=t.icon;return e.jsx(l,{href:t.href,className:"group relative overflow-hidden rounded-xl border bg-card p-6 shadow-sm transition-all hover:border-primary hover:shadow-md",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:e.jsx(s,{className:"size-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]})},t.key)}function re(t){return!t.key.startsWith("admin-")}function le(t){const s=t.icon;return e.jsxs(l,{href:t.href,className:"group relative flex items-center gap-3 overflow-hidden rounded-lg border bg-card p-4 shadow-sm transition-all hover:border-primary hover:shadow-md",children:[e.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:e.jsx(s,{className:"size-5"})}),e.jsx("div",{children:e.jsx("h3",{className:"leading-none font-medium",children:t.title})})]},t.key)}function ae(t){const s=t.maintenances?.[0];return e.jsx(l,{href:`/vehicles/status/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold",children:t.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.company,")"]})]}),s?e.jsxs("p",{className:"text-xs font-medium text-yellow-700",children:[s.workshop_name," ","-"," ",s.description]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sin detalles de orden."})]}),s?.entry_date&&e.jsxs("div",{className:"flex items-center gap-1 font-mono text-xs text-muted-foreground",children:["Ingreso:"," ",V(s.entry_date)]})]})},t.id)}function de(t){return e.jsx(l,{href:"/vehicles/incidents",className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"line-clamp-1 font-medium",children:[t.vehicle.name," -"," ",t.description]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reportado:"," ",V(t.created_at)]})]}),e.jsx("div",{className:"rounded bg-orange-100 px-2 py-1 text-xs text-orange-700",children:t.severity})]})},t.id)}function ne(t){return e.jsx(l,{href:`/vehicles/status/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.company})]}),e.jsx("div",{className:`rounded px-2 py-1 text-xs font-medium ${t.status==="Out of Service"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.status==="Out of Service"?"Fuera de Servicio":"En Taller"})]})},t.id)}function ie(t){return e.jsx(l,{href:`/tickets/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estado: ",t.status]})]}),e.jsx("div",{className:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-700",children:"Ver Respuesta"})]})},t.id)}function ce(t){return e.jsx(l,{href:`/tickets/${t.id}`,className:"block",children:e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.user.company," -"," ",t.user.name]})]}),e.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:V(t.created_at)})]})},t.id)}function oe(t){const s=new Date,a=new Date(t).getTime()-s.getTime();return Math.ceil(a/864e5)}function me(t){return!!t}function xe(t){return F.find(s=>s.key===t)}export{ve as default};
