import{c as rs,u as os,r as is,j as s,H as ds}from"./app-7T3l1Qi3.js";import{B as Qe}from"./button-BkJ9ctea.js";import{C as ms,a as hs,b as xs,c as ps}from"./card-BROKrNBm.js";import{C as fs}from"./checkbox-CgK03wsL.js";import{I as xe}from"./input-CUQHxuGa.js";import{L as r}from"./label-DznkfWkB.js";import{a as us,b as _s,c as js,S as vs,d as gs}from"./select-B_iHn1kO.js";import{T as ys}from"./textarea-LRchF7yt.js";import{K as bs,A as Ns}from"./app-layout-BHffE17Q.js";/* empty css            */import"./index-4gzLtCu3.js";import"./index-de_OD_BN.js";import"./index-Cb5BQB3p.js";import"./check-BiDMPmor.js";import"./chevron-down-CUXFwhnx.js";import"./index-C4J_hXM0.js";import"./shield-C01C4vrL.js";function Ls(m){const e=rs.c(191),{vehicles:h}=m;let fe;e[0]===Symbol.for("react.memo_cache_sentinel")?(fe=new Date().toISOString().split("T"),e[0]=fe):fe=e[0];let ue;e[1]===Symbol.for("react.memo_cache_sentinel")?(ue=[],e[1]=ue):ue=e[1];let _e;e[2]===Symbol.for("react.memo_cache_sentinel")?(_e=[],e[2]=_e):_e=e[2];let je;e[3]===Symbol.for("react.memo_cache_sentinel")?(je={},e[3]=je):je=e[3];let ve;e[4]===Symbol.for("react.memo_cache_sentinel")?(ve={vehicle_id:"",entry_date:fe[0],tentative_exit_date:"",workshop_name:"Nemesio Vicuña 275, Puente Alto",description:"",tasks:ue,issue_ids:_e,responsible_person:"",mileage_in:"",traction:"4x2",fuel_type:"Diesel",transmission:"Manual",entry_checklist:je},e[4]=ve):ve=e[4];const{data:l,setData:a,post:Ue,processing:Xe,errors:i}=os(ve);let ge;e[5]===Symbol.for("react.memo_cache_sentinel")?(ge=["Sistema de frenos (Incluye ABS)","Sistema Eléctrico y luces de emergencia","Motor y sistema de refrigeración","Suspensión y dirección","Cabina de Mando (Tableros, mando, radiocomunicación)","Equipamiento Hidraulico / Bombas de Agua","Escala / Sistema Extensible (si aplica)","Compartimientos de Herramientas","Sistema de carga de agua / estanque","Neumáticos y repuestos","Alarma sonora y luces baliza","Fugas de líquidos"],e[5]=ge):ge=e[5];const cs=ge;let ye;e[6]!==l.tasks||e[7]!==a?(ye=(t,c)=>{const o=`Revisar: ${t}`;let d=[...l.tasks];c==="Fallas"?d.includes(o)||d.push(o):d=d.filter(he=>he!==o),a(he=>({...he,entry_checklist:{...he.entry_checklist,[t]:c},tasks:d}))},e[6]=l.tasks,e[7]=a,e[8]=ye):ye=e[8];const pe=ye,[n,as]=is.useState(null);let be;e[9]!==l.vehicle_id||e[10]!==a||e[11]!==h?(be=()=>{if(l.vehicle_id){const t=h.find(c=>c.id.toString()===l.vehicle_id);as(t||null),a("issue_ids",[])}else as(null)},e[9]=l.vehicle_id,e[10]=a,e[11]=h,e[12]=be):be=e[12];let Ne;e[13]!==l.vehicle_id?(Ne=[l.vehicle_id],e[13]=l.vehicle_id,e[14]=Ne):Ne=e[14],is.useEffect(be,Ne);let ke;e[15]!==l.issue_ids||e[16]!==a?(ke=t=>{const c=l.issue_ids;c.includes(t)?a("issue_ids",c.filter(o=>o!==t)):a("issue_ids",[...c,t])},e[15]=l.issue_ids,e[16]=a,e[17]=ke):ke=e[17];const Ye=ke;let Se;e[18]!==Ue?(Se=t=>{t.preventDefault(),Ue("/vehicles/workshop")},e[18]=Ue,e[19]=Se):Se=e[19];const Ze=Se;let Ce,we;e[20]===Symbol.for("react.memo_cache_sentinel")?(Ce=[{title:"Panel Principal",href:"/dashboard"},{title:"Taller Mecánico",href:"/vehicles/workshop"},{title:"Nuevo Ingreso",href:"/vehicles/workshop/create"}],we=s.jsx(ds,{title:"Ingresar Vehículo a Taller"}),e[20]=Ce,e[21]=we):(Ce=e[20],we=e[21]);let Te;e[22]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx(ms,{children:s.jsx(hs,{children:"Ingresar Vehículo a Taller"})}),e[22]=Te):Te=e[22];let Ae;e[23]===Symbol.for("react.memo_cache_sentinel")?(Ae=s.jsx(r,{children:"Vehículo"}),e[23]=Ae):Ae=e[23];let x;e[24]!==a?(x=t=>a("vehicle_id",t),e[24]=a,e[25]=x):x=e[25];const ns=l.vehicle_id;let Ie;e[26]===Symbol.for("react.memo_cache_sentinel")?(Ie=s.jsx(us,{children:s.jsx(_s,{placeholder:"Seleccione un vehículo"})}),e[26]=Ie):Ie=e[26];let p;e[27]!==h?(p=h.map(ks),e[27]=h,e[28]=p):p=e[28];let f;e[29]!==p?(f=s.jsx(js,{children:p}),e[29]=p,e[30]=f):f=e[30];let u;e[31]!==l.vehicle_id||e[32]!==x||e[33]!==f?(u=s.jsxs(vs,{onValueChange:x,value:ns,children:[Ie,f]}),e[31]=l.vehicle_id,e[32]=x,e[33]=f,e[34]=u):u=e[34];let _;e[35]!==i.vehicle_id?(_=i.vehicle_id&&s.jsx("p",{className:"text-sm text-destructive",children:i.vehicle_id}),e[35]=i.vehicle_id,e[36]=_):_=e[36];let j;e[37]!==u||e[38]!==_?(j=s.jsxs("div",{className:"space-y-2",children:[Ae,u,_]}),e[37]=u,e[38]=_,e[39]=j):j=e[39];let Fe;e[40]===Symbol.for("react.memo_cache_sentinel")?(Fe=s.jsx(r,{children:"Taller / Lugar"}),e[40]=Fe):Fe=e[40];let v;e[41]!==l.workshop_name?(v=s.jsx(xe,{value:l.workshop_name,readOnly:!0,className:"bg-muted text-muted-foreground"}),e[41]=l.workshop_name,e[42]=v):v=e[42];let g;e[43]!==i.workshop_name?(g=i.workshop_name&&s.jsx("p",{className:"text-sm text-destructive",children:i.workshop_name}),e[43]=i.workshop_name,e[44]=g):g=e[44];let y;e[45]!==v||e[46]!==g?(y=s.jsxs("div",{className:"space-y-2",children:[Fe,v,g]}),e[45]=v,e[46]=g,e[47]=y):y=e[47];let b;e[48]!==j||e[49]!==y?(b=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[j,y]}),e[48]=j,e[49]=y,e[50]=b):b=e[50];let N;e[51]!==n?(N=n&&s.jsxs("div",{className:"rounded-md border bg-muted/50 p-4",children:[s.jsx("h3",{className:"mb-2 font-semibold",children:"Detalles del Vehículo"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Patente:"})," ",n.plate||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Marca/Modelo:"})," ",n.make," ",n.model]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-muted-foreground",children:"Compañía:"})," ",n.company]})]}),n.active_maintenance_id&&s.jsxs("div",{className:"mt-4 rounded-md border border-yellow-500/20 bg-yellow-500/10 p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"font-bold text-yellow-500",children:"⚠️ Este vehículo ya se encuentra en taller."}),s.jsx(Qe,{asChild:!0,variant:"secondary",size:"sm",children:s.jsx("a",{href:`/vehicles/workshop/${n.active_maintenance_id}`,children:"Ver Orden Activa"})})]}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Si desea ingresar un nuevo registro, por favor finalice la orden anterior primero."})]})]}),e[51]=n,e[52]=N):N=e[52];let Ee;e[53]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(r,{children:"Fecha de Ingreso"}),e[53]=Ee):Ee=e[53];let k;e[54]!==a?(k=t=>a("entry_date",t.target.value),e[54]=a,e[55]=k):k=e[55];let S;e[56]!==l.entry_date||e[57]!==k?(S=s.jsx(xe,{type:"date",value:l.entry_date,onChange:k}),e[56]=l.entry_date,e[57]=k,e[58]=S):S=e[58];let C;e[59]!==i.entry_date?(C=i.entry_date&&s.jsx("p",{className:"text-sm text-destructive",children:i.entry_date}),e[59]=i.entry_date,e[60]=C):C=e[60];let w;e[61]!==S||e[62]!==C?(w=s.jsxs("div",{className:"space-y-2",children:[Ee,S,C]}),e[61]=S,e[62]=C,e[63]=w):w=e[63];let Ve;e[64]===Symbol.for("react.memo_cache_sentinel")?(Ve=s.jsx(r,{children:"Fecha Tentativa Salida (Opcional)"}),e[64]=Ve):Ve=e[64];let T;e[65]!==a?(T=t=>a("tentative_exit_date",t.target.value),e[65]=a,e[66]=T):T=e[66];let A;e[67]!==l.tentative_exit_date||e[68]!==T?(A=s.jsxs("div",{className:"space-y-2",children:[Ve,s.jsx(xe,{type:"date",value:l.tentative_exit_date,onChange:T})]}),e[67]=l.tentative_exit_date,e[68]=T,e[69]=A):A=e[69];let I;e[70]!==w||e[71]!==A?(I=s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[w,A]}),e[70]=w,e[71]=A,e[72]=I):I=e[72];let Me;e[73]===Symbol.for("react.memo_cache_sentinel")?(Me=s.jsx(r,{className:"mb-1 block text-sm font-medium",children:"Bombero Responsable"}),e[73]=Me):Me=e[73];let F;e[74]!==a?(F=t=>a("responsible_person",t.target.value),e[74]=a,e[75]=F):F=e[75];let E;e[76]!==l.responsible_person||e[77]!==F?(E=s.jsx(xe,{type:"text",value:l.responsible_person,onChange:F,placeholder:"Nombre del responsable"}),e[76]=l.responsible_person,e[77]=F,e[78]=E):E=e[78];let V;e[79]!==i.responsible_person?(V=i.responsible_person&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.responsible_person}),e[79]=i.responsible_person,e[80]=V):V=e[80];let M;e[81]!==E||e[82]!==V?(M=s.jsxs("div",{children:[Me,E,V]}),e[81]=E,e[82]=V,e[83]=M):M=e[83];let $e;e[84]===Symbol.for("react.memo_cache_sentinel")?($e=s.jsx(r,{className:"mb-1 block text-sm font-medium",children:"Kilometraje de Ingreso"}),e[84]=$e):$e=e[84];let $;e[85]!==a?($=t=>a("mileage_in",t.target.value),e[85]=a,e[86]=$):$=e[86];let R;e[87]!==l.mileage_in||e[88]!==$?(R=s.jsx(xe,{type:"number",value:l.mileage_in,onChange:$,placeholder:"0"}),e[87]=l.mileage_in,e[88]=$,e[89]=R):R=e[89];let D;e[90]!==i.mileage_in?(D=i.mileage_in&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:i.mileage_in}),e[90]=i.mileage_in,e[91]=D):D=e[91];let O;e[92]!==R||e[93]!==D?(O=s.jsxs("div",{children:[$e,R,D]}),e[92]=R,e[93]=D,e[94]=O):O=e[94];let z;e[95]!==M||e[96]!==O?(z=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[M,O]}),e[95]=M,e[96]=O,e[97]=z):z=e[97];let Re;e[98]===Symbol.for("react.memo_cache_sentinel")?(Re=s.jsx(r,{className:"mb-2 block text-sm font-medium",children:"Tracción"}),e[98]=Re):Re=e[98];const es=l.traction==="4x2";let B;e[99]!==a?(B=t=>a("traction",t.target.value),e[99]=a,e[100]=B):B=e[100];let H;e[101]!==es||e[102]!==B?(H=s.jsx("input",{type:"radio",name:"traction",value:"4x2",checked:es,onChange:B}),e[101]=es,e[102]=B,e[103]=H):H=e[103];let De;e[104]===Symbol.for("react.memo_cache_sentinel")?(De=s.jsx("span",{className:"text-sm",children:"4x2"}),e[104]=De):De=e[104];let L;e[105]!==H?(L=s.jsxs("label",{className:"flex items-center gap-2",children:[H,De]}),e[105]=H,e[106]=L):L=e[106];const ss=l.traction==="4x4";let P;e[107]!==a?(P=t=>a("traction",t.target.value),e[107]=a,e[108]=P):P=e[108];let q;e[109]!==ss||e[110]!==P?(q=s.jsx("input",{type:"radio",name:"traction",value:"4x4",checked:ss,onChange:P}),e[109]=ss,e[110]=P,e[111]=q):q=e[111];let Oe;e[112]===Symbol.for("react.memo_cache_sentinel")?(Oe=s.jsx("span",{className:"text-sm",children:"4x4"}),e[112]=Oe):Oe=e[112];let G;e[113]!==q?(G=s.jsxs("label",{className:"flex items-center gap-2",children:[q,Oe]}),e[113]=q,e[114]=G):G=e[114];let K;e[115]!==L||e[116]!==G?(K=s.jsxs("div",{children:[Re,s.jsxs("div",{className:"flex gap-4",children:[L,G]})]}),e[115]=L,e[116]=G,e[117]=K):K=e[117];let ze;e[118]===Symbol.for("react.memo_cache_sentinel")?(ze=s.jsx(r,{className:"mb-2 block text-sm font-medium",children:"Transmisión"}),e[118]=ze):ze=e[118];const ts=l.transmission==="Manual";let W;e[119]!==a?(W=t=>a("transmission",t.target.value),e[119]=a,e[120]=W):W=e[120];let J;e[121]!==ts||e[122]!==W?(J=s.jsx("input",{type:"radio",name:"transmission",value:"Manual",checked:ts,onChange:W}),e[121]=ts,e[122]=W,e[123]=J):J=e[123];let Be;e[124]===Symbol.for("react.memo_cache_sentinel")?(Be=s.jsx("span",{className:"text-sm",children:"Manual"}),e[124]=Be):Be=e[124];let Q;e[125]!==J?(Q=s.jsxs("label",{className:"flex items-center gap-2",children:[J,Be]}),e[125]=J,e[126]=Q):Q=e[126];const ls=l.transmission==="Automática";let U;e[127]!==a?(U=t=>a("transmission",t.target.value),e[127]=a,e[128]=U):U=e[128];let X;e[129]!==ls||e[130]!==U?(X=s.jsx("input",{type:"radio",name:"transmission",value:"Automática",checked:ls,onChange:U}),e[129]=ls,e[130]=U,e[131]=X):X=e[131];let He;e[132]===Symbol.for("react.memo_cache_sentinel")?(He=s.jsx("span",{className:"text-sm",children:"Automática"}),e[132]=He):He=e[132];let Y;e[133]!==X?(Y=s.jsxs("label",{className:"flex items-center gap-2",children:[X,He]}),e[133]=X,e[134]=Y):Y=e[134];let Z;e[135]!==Q||e[136]!==Y?(Z=s.jsxs("div",{children:[ze,s.jsxs("div",{className:"flex gap-4",children:[Q,Y]})]}),e[135]=Q,e[136]=Y,e[137]=Z):Z=e[137];let Le;e[138]===Symbol.for("react.memo_cache_sentinel")?(Le=s.jsx(r,{className:"mb-2 block text-sm font-medium",children:"Combustible"}),e[138]=Le):Le=e[138];let Pe;e[139]===Symbol.for("react.memo_cache_sentinel")?(Pe=["Diesel","Gasolina","Eléctrico","Otro"],e[139]=Pe):Pe=e[139];let ee;e[140]!==l.fuel_type||e[141]!==a?(ee=s.jsxs("div",{children:[Le,s.jsx("div",{className:"flex flex-wrap gap-4",children:Pe.map(t=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"fuel_type",value:t,checked:l.fuel_type===t,onChange:c=>a("fuel_type",c.target.value)}),s.jsx("span",{className:"text-sm",children:t})]},t))})]}),e[140]=l.fuel_type,e[141]=a,e[142]=ee):ee=e[142];let se;e[143]!==K||e[144]!==Z||e[145]!==ee?(se=s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[K,Z,ee]}),e[143]=K,e[144]=Z,e[145]=ee,e[146]=se):se=e[146];let qe;e[147]===Symbol.for("react.memo_cache_sentinel")?(qe=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(bs,{className:"size-4"})," ","Checklist de Ingreso"]}),e[147]=qe):qe=e[147];let Ge;e[148]===Symbol.for("react.memo_cache_sentinel")?(Ge=s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Elemento"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium",children:"Funcional"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium",children:"Fallas"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium",children:"N/A"})]})}),e[148]=Ge):Ge=e[148];let te;e[149]!==l.entry_checklist||e[150]!==pe?(te=s.jsxs("div",{className:"rounded-lg border p-4",children:[qe,s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[Ge,s.jsx("tbody",{className:"divide-y",children:cs.map(t=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-2 py-2",children:t}),s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("input",{type:"radio",name:`chk_${t}`,value:"Funcional",checked:l.entry_checklist[t]==="Funcional",onChange:()=>pe(t,"Funcional")})}),s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("input",{type:"radio",name:`chk_${t}`,value:"Fallas",checked:l.entry_checklist[t]==="Fallas",onChange:()=>pe(t,"Fallas")})}),s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("input",{type:"radio",name:`chk_${t}`,value:"N/A",checked:l.entry_checklist[t]==="N/A",onChange:()=>pe(t,"N/A")})})]},t))})]})})]}),e[149]=l.entry_checklist,e[150]=pe,e[151]=te):te=e[151];let le;e[152]!==l.issue_ids||e[153]!==Ye||e[154]!==n?(le=n&&n.issues.length>0&&s.jsxs("div",{className:"space-y-2 rounded-md border p-4",children:[s.jsx(r,{className:"text-base font-semibold",children:"Reportar Incidencias Existentes"}),s.jsx("div",{className:"space-y-2",children:n.issues.map(t=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(fs,{id:`issue-${t.id}`,checked:l.issue_ids.includes(t.id),onCheckedChange:()=>Ye(t.id)}),s.jsxs(r,{htmlFor:`issue-${t.id}`,className:"font-normal",children:[s.jsxs("span",{className:"font-semibold",children:[t.date,":"]})," ",t.description," ",s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.severity,")"]})]})]},t.id))})]}),e[152]=l.issue_ids,e[153]=Ye,e[154]=n,e[155]=le):le=e[155];let Ke;e[156]===Symbol.for("react.memo_cache_sentinel")?(Ke=s.jsx(r,{children:"Trabajos a Realizar (Lista)"}),e[156]=Ke):Ke=e[156];let ae;e[157]!==l.tasks||e[158]!==a?(ae=l.tasks.map((t,c)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(xe,{value:t,onChange:o=>{const d=[...l.tasks];d[c]=o.target.value,a("tasks",d)},placeholder:`Trabajo #${c+1}`}),s.jsxs(Qe,{type:"button",variant:"destructive",size:"icon",onClick:()=>{const o=l.tasks.filter((d,he)=>he!==c);a("tasks",o)},children:[s.jsx("span",{className:"sr-only",children:"Eliminar"}),"×"]})]},c)),e[157]=l.tasks,e[158]=a,e[159]=ae):ae=e[159];let ie;e[160]!==l.tasks||e[161]!==a?(ie=s.jsx(Qe,{type:"button",variant:"outline",onClick:()=>a("tasks",[...l.tasks,""]),children:"+ Agregar Trabajo"}),e[160]=l.tasks,e[161]=a,e[162]=ie):ie=e[162];let ce;e[163]!==ae||e[164]!==ie?(ce=s.jsxs("div",{className:"space-y-2",children:[Ke,s.jsxs("div",{className:"space-y-2",children:[ae,ie]})]}),e[163]=ae,e[164]=ie,e[165]=ce):ce=e[165];let We;e[166]===Symbol.for("react.memo_cache_sentinel")?(We=s.jsx(r,{children:"Observaciones Generales"}),e[166]=We):We=e[166];let ne;e[167]!==a?(ne=t=>a("description",t.target.value),e[167]=a,e[168]=ne):ne=e[168];let re;e[169]!==l.description||e[170]!==ne?(re=s.jsx(ys,{value:l.description,onChange:ne,placeholder:"Detalles adicionales...",rows:3}),e[169]=l.description,e[170]=ne,e[171]=re):re=e[171];let oe;e[172]!==i.description?(oe=i.description&&s.jsx("p",{className:"text-sm text-destructive",children:i.description}),e[172]=i.description,e[173]=oe):oe=e[173];let de;e[174]!==re||e[175]!==oe?(de=s.jsxs("div",{className:"space-y-2",children:[We,re,oe]}),e[174]=re,e[175]=oe,e[176]=de):de=e[176];let me;e[177]!==Xe?(me=s.jsx("div",{className:"flex justify-end gap-4",children:s.jsx(Qe,{type:"submit",disabled:Xe,children:"Registrar Ingreso"})}),e[177]=Xe,e[178]=me):me=e[178];let Je;return e[179]!==Ze||e[180]!==b||e[181]!==N||e[182]!==I||e[183]!==z||e[184]!==se||e[185]!==te||e[186]!==le||e[187]!==ce||e[188]!==de||e[189]!==me?(Je=s.jsxs(Ns,{breadcrumbs:Ce,children:[we,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsx("div",{className:"mx-auto w-full max-w-3xl",children:s.jsxs(xs,{children:[Te,s.jsx(ps,{children:s.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[b,N,I,z,se,te,le,ce,de,me]})})]})})})]}),e[179]=Ze,e[180]=b,e[181]=N,e[182]=I,e[183]=z,e[184]=se,e[185]=te,e[186]=le,e[187]=ce,e[188]=de,e[189]=me,e[190]=Je):Je=e[190],Je}function ks(m){return s.jsxs(gs,{value:m.id.toString(),children:[m.name," (",m.company,")"]},m.id)}export{Ls as default};
