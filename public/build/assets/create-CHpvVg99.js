import{c as fe,u as pe,j as s,H as he}from"./app-DjgDN_3r.js";import{C as be}from"./checkbox-DMnCQw3L.js";import{S as ge}from"./scroll-area-C76lEq8L.js";import{S as ce,a as me,b as de,c as ue,d as E}from"./select-D32rM1KY.js";import{T as ve,A as je}from"./app-layout-CxcElSpn.js";import{S as ye}from"./shield-zvWDQbaZ.js";/* empty css            */import"./button-CV3RnsLL.js";import"./index-S44m8F93.js";import"./index-IJkOD3lW.js";import"./index-DqCh8O2b.js";import"./check-aKTKhJFR.js";import"./chevron-down-C2MCJbfA.js";import"./index-C4J_hXM0.js";const Ne=[{id:"inventory",label:"Inventario"},{id:"tickets",label:"Ticketera"},{id:"batteries",label:"Baterías"},{id:"equipment",label:"Material Menor"},{id:"deliveries",label:"Actas de Entrega"},{id:"firefighters",label:"Bomberos"},{id:"vehicles",label:"Material Mayor (General)"},{id:"vehicles.incidents",label:"M. Mayor - Incidencias"},{id:"vehicles.logs",label:"M. Mayor - Bitácora"},{id:"vehicles.workshop",label:"M. Mayor - Taller"},{id:"vehicles.inventory",label:"M. Mayor - Inventario"}],_e=["Primera Compañía","Segunda Compañía","Tercera Compañía","Cuarta Compañía","Quinta Compañía","Sexta Compañía","Séptima Compañía","Octava Compañía","Novena Compañía","Décima Compañía","Brigada Juvenil","Comandancia"];function qe(U){const e=fe.c(99),{availableVehicles:A}=U;let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D=[],e[0]=D):D=e[0];let q;e[1]===Symbol.for("react.memo_cache_sentinel")?(q=[],e[1]=q):q=e[1];let z;e[2]===Symbol.for("react.memo_cache_sentinel")?(z={name:"",email:"",password:"",company:"",role:"user",permissions:D,driver_vehicles:q},e[2]=z):z=e[2];const{data:l,setData:t,post:ae,processing:re,errors:a}=pe(z);let F;e[3]!==l.driver_vehicles||e[4]!==t?(F=i=>{const r=l.driver_vehicles;r.includes(i)?t("driver_vehicles",r.filter(o=>o!==i)):t("driver_vehicles",[...r,i])},e[3]=l.driver_vehicles,e[4]=t,e[5]=F):F=e[5];const oe=F;let H;e[6]!==ae?(H=i=>{i.preventDefault(),ae("/admin/users")},e[6]=ae,e[7]=H):H=e[7];const ne=H;let G;e[8]!==l.permissions||e[9]!==t?(G=(i,r)=>{const o=l.permissions.filter(xe=>!xe.startsWith(`${i}.`));r==="view"?o.push(`${i}.view`):r==="edit"&&o.push(`${i}.view`,`${i}.edit`),t("permissions",o)},e[8]=l.permissions,e[9]=t,e[10]=G):G=e[10];const R=G;let J;e[11]!==l.permissions?(J=i=>{const r=l.permissions.includes(`${i}.edit`),o=l.permissions.includes(`${i}.view`);return r?"edit":o?"view":"none"},e[11]=l.permissions,e[12]=J):J=e[12];const B=J;let L,O;e[13]===Symbol.for("react.memo_cache_sentinel")?(L=[{title:"Panel Principal",href:"/dashboard"},{title:"Usuarios",href:"/admin/users"},{title:"Nuevo Usuario",href:"/admin/users/create"}],O=s.jsx(he,{title:"Crear Usuario"}),e[13]=L,e[14]=O):(L=e[13],O=e[14]);let Q;e[15]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Crear Nuevo Usuario"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete los detalles para registrar un nuevo usuario en el sistema."})]}),e[15]=Q):Q=e[15];let W;e[16]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre Completo"}),e[16]=W):W=e[16];let n;e[17]!==t?(n=i=>t("name",i.target.value),e[17]=t,e[18]=n):n=e[18];let c;e[19]!==l.name||e[20]!==n?(c=s.jsx("input",{type:"text",value:l.name,onChange:n,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[19]=l.name,e[20]=n,e[21]=c):c=e[21];let m;e[22]!==a.name?(m=a.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.name}),e[22]=a.name,e[23]=m):m=e[23];let d;e[24]!==c||e[25]!==m?(d=s.jsxs("div",{children:[W,c,m]}),e[24]=c,e[25]=m,e[26]=d):d=e[26];let I;e[27]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Correo Electrónico"}),e[27]=I):I=e[27];let u;e[28]!==t?(u=i=>t("email",i.target.value),e[28]=t,e[29]=u):u=e[29];let x;e[30]!==l.email||e[31]!==u?(x=s.jsx("input",{type:"email",value:l.email,onChange:u,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[30]=l.email,e[31]=u,e[32]=x):x=e[32];let f;e[33]!==a.email?(f=a.email&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.email}),e[33]=a.email,e[34]=f):f=e[34];let p;e[35]!==x||e[36]!==f?(p=s.jsxs("div",{children:[I,x,f]}),e[35]=x,e[36]=f,e[37]=p):p=e[37];let h;e[38]!==d||e[39]!==p?(h=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[d,p]}),e[38]=d,e[39]=p,e[40]=h):h=e[40];let K;e[41]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Contraseña"}),e[41]=K):K=e[41];let b;e[42]!==t?(b=i=>t("password",i.target.value),e[42]=t,e[43]=b):b=e[43];let g;e[44]!==l.password||e[45]!==b?(g=s.jsx("input",{type:"password",value:l.password,onChange:b,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[44]=l.password,e[45]=b,e[46]=g):g=e[46];let v;e[47]!==a.password?(v=a.password&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.password}),e[47]=a.password,e[48]=v):v=e[48];let j;e[49]!==g||e[50]!==v?(j=s.jsxs("div",{children:[K,g,v]}),e[49]=g,e[50]=v,e[51]=j):j=e[51];let X;e[52]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Compañía"}),e[52]=X):X=e[52];let y;e[53]!==t?(y=i=>t("company",i),e[53]=t,e[54]=y):y=e[54];let Y;e[55]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(me,{className:"w-full",children:s.jsx(de,{placeholder:"Seleccione una Compañía"})}),e[55]=Y):Y=e[55];let Z;e[56]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(ue,{children:_e.map(Ce)}),e[56]=Z):Z=e[56];let N;e[57]!==l.company||e[58]!==y?(N=s.jsxs(ce,{value:l.company,onValueChange:y,children:[Y,Z]}),e[57]=l.company,e[58]=y,e[59]=N):N=e[59];let _;e[60]!==a.company?(_=a.company&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:a.company}),e[60]=a.company,e[61]=_):_=e[61];let C;e[62]!==N||e[63]!==_?(C=s.jsxs("div",{children:[X,N,_]}),e[62]=N,e[63]=_,e[64]=C):C=e[64];let w;e[65]!==j||e[66]!==C?(w=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[j,C]}),e[65]=j,e[66]=C,e[67]=w):w=e[67];let S;e[68]!==h||e[69]!==w?(S=s.jsxs("div",{className:"space-y-4",children:[h,w]}),e[68]=h,e[69]=w,e[70]=S):S=e[70];let ee;e[71]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(ye,{className:"size-4"})," Roles y Permisos"]}),e[71]=ee):ee=e[71];let se;e[72]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Rol del Sistema"}),e[72]=se):se=e[72];let k;e[73]!==t?(k=i=>t("role",i),e[73]=t,e[74]=k):k=e[74];let ie;e[75]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(me,{className:"w-full",children:s.jsx(de,{placeholder:"Seleccione un Rol"})}),e[75]=ie):ie=e[75];let le;e[76]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs(ue,{children:[s.jsx(E,{value:"user",children:"Usuario (Por Defecto)"}),s.jsx(E,{value:"admin",children:"Administrador"}),s.jsx(E,{value:"capitan",children:"Capitán"}),s.jsx(E,{value:"cuartelero",children:"Cuartelero"}),s.jsx(E,{value:"mechanic",children:"Taller Mecánico"})]}),e[76]=le):le=e[76];let M;e[77]!==l.role||e[78]!==k?(M=s.jsxs("div",{className:"mb-6",children:[se,s.jsxs(ce,{value:l.role,onValueChange:k,children:[ie,le]})]}),e[77]=l.role,e[78]=k,e[79]=M):M=e[79];let $;e[80]!==l.role||e[81]!==B||e[82]!==R?($=l.role!=="admin"&&l.role!=="capitan"&&s.jsxs("div",{children:[s.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Permisos por Módulo"}),s.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-muted-foreground",children:[s.jsx("th",{className:"pb-2 font-medium",children:"Módulo"}),s.jsx("th",{className:"pb-2 font-medium",children:"Nivel de Acceso"})]})}),s.jsx("tbody",{className:"divide-y",children:Ne.map(i=>s.jsxs("tr",{children:[s.jsx("td",{className:"py-2.5 font-medium",children:i.label}),s.jsx("td",{className:"py-2",children:s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>R(i.id,"none"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${B(i.id)==="none"?"bg-background shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ninguno"}),s.jsx("button",{type:"button",onClick:()=>R(i.id,"view"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${B(i.id)==="view"?"bg-blue-100 text-blue-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ver"}),s.jsx("button",{type:"button",onClick:()=>R(i.id,"edit"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${B(i.id)==="edit"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Editar"})]})})]},i.id))})]})}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"'Editar' incluye permisos de 'Ver'."})]}),e[80]=l.role,e[81]=B,e[82]=R,e[83]=$):$=e[83];let P;e[84]!==M||e[85]!==$?(P=s.jsxs("div",{className:"rounded-lg border p-4",children:[ee,M,$]}),e[84]=M,e[85]=$,e[86]=P):P=e[86];let V;e[87]!==A||e[88]!==l.driver_vehicles||e[89]!==oe?(V=A&&A.length>0&&s.jsxs("div",{className:"rounded-lg border p-4",children:[s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(ve,{className:"size-4"})," Vehículos Permitidos (Maquinistas)"]}),s.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:"Seleccione los vehículos que este usuario está autorizado a conducir y registrar en bitácora."}),s.jsx(ge,{className:"h-[200px] w-full rounded-md border p-4",children:s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:A.map(i=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(be,{id:`v-${i.id}`,checked:l.driver_vehicles.includes(i.id),onCheckedChange:()=>oe(i.id)}),s.jsxs("label",{htmlFor:`v-${i.id}`,className:"text-sm leading-none font-medium peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[i.name," ",s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.company,")"]})]})]},i.id))})})]}),e[87]=A,e[88]=l.driver_vehicles,e[89]=oe,e[90]=V):V=e[90];let T;e[91]!==re?(T=s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:re,className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-primary focus-visible:outline-none disabled:opacity-50",children:"Registrar Usuario"})}),e[91]=re,e[92]=T):T=e[92];let te;return e[93]!==ne||e[94]!==S||e[95]!==P||e[96]!==V||e[97]!==T?(te=s.jsxs(je,{breadcrumbs:L,children:[O,s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsxs("div",{className:"max-w-4xl rounded-xl border bg-card p-6 shadow-sm",children:[Q,s.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[S,P,V,T]})]})})]}),e[93]=ne,e[94]=S,e[95]=P,e[96]=V,e[97]=T,e[98]=te):te=e[98],te}function Ce(U){return s.jsx(E,{value:U,children:U},U)}export{qe as default};
