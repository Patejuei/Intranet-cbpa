import{c as he,u as ge,j as s,H as ve}from"./app-f77woEWo.js";import{S as de,c as ue,a as fe,b as pe,d as xe}from"./select-CUASvSPl.js";import{A as je}from"./app-layout-B4XzD86h.js";import{S as ye}from"./shield-R2tHue2s.js";/* empty css            */import"./index-CE2_aldF.js";import"./button-BUox-IYX.js";import"./index-BJkESKFP.js";import"./index-CPAQGPCJ.js";import"./check-DZ06pTr0.js";import"./index-C4J_hXM0.js";const Ne=[{id:"inventory",label:"Inventario"},{id:"tickets",label:"Ticketera"},{id:"batteries",label:"Baterías"},{id:"equipment",label:"Material Menor"},{id:"deliveries",label:"Actas de Entrega"},{id:"firefighters",label:"Bomberos"}],we=["Primera Compañía","Segunda Compañía","Tercera Compañía","Cuarta Compañía","Quinta Compañía","Sexta Compañía","Séptima Compañía","Octava Compañía","Novena Compañía","Décima Compañía","Brigada Juvenil","Comandancia"],Ce=[{value:"user",label:"Usuario Estándar"},{value:"admin",label:"Administrador del Sistema"},{value:"capitan",label:"Capitán"},{value:"teniente",label:"Teniente"},{value:"maquinista",label:"Maquinista"},{value:"ayudante",label:"Ayudante"},{value:"comandancia",label:"Comandancia"}];function Be(n){const e=he.c(110),{user:i}=n;let o;e[0]!==i.permissions?(o=i.permissions??[],e[0]=i.permissions,e[1]=o):o=e[1];let O;e[2]!==o||e[3]!==i.company||e[4]!==i.email||e[5]!==i.name||e[6]!==i.role?(O={name:i.name,email:i.email,password:"",company:i.company,role:i.role,permissions:o},e[2]=o,e[3]=i.company,e[4]=i.email,e[5]=i.name,e[6]=i.role,e[7]=O):O=e[7];const{data:l,setData:a,put:ne,processing:oe,errors:r}=ge(O);let z;e[8]!==ne||e[9]!==i.id?(z=t=>{t.preventDefault(),ne(`/admin/users/${i.id}`)},e[8]=ne,e[9]=i.id,e[10]=z):z=e[10];const me=z;let F;e[11]!==l.permissions||e[12]!==a?(F=(t,re)=>{const H=l.permissions.filter(be=>!be.startsWith(`${t}.`));re==="view"?H.push(`${t}.view`):re==="edit"&&H.push(`${t}.view`,`${t}.edit`),a("permissions",H)},e[11]=l.permissions,e[12]=a,e[13]=F):F=e[13];const B=F;let G;e[14]!==l.permissions?(G=t=>{const re=l.permissions.includes(`${t}.edit`),H=l.permissions.includes(`${t}.view`);return re?"edit":H?"view":"none"},e[14]=l.permissions,e[15]=G):G=e[15];const D=G;let J,L;e[16]===Symbol.for("react.memo_cache_sentinel")?(J={title:"Panel Principal",href:"/dashboard"},L={title:"Usuarios",href:"/admin/users"},e[16]=J,e[17]=L):(J=e[16],L=e[17]);const ce=`/admin/users/${i.id}/edit`;let m;e[18]!==ce?(m=[J,L,{title:"Editar Usuario",href:ce}],e[18]=ce,e[19]=m):m=e[19];let Q;e[20]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(ve,{title:"Editar Usuario"}),e[20]=Q):Q=e[20];let c;e[21]!==i.name?(c=s.jsxs("h2",{className:"text-lg font-semibold text-foreground",children:["Editar Usuario: ",i.name]}),e[21]=i.name,e[22]=c):c=e[22];let W;e[23]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Modifique los detalles del usuario."}),e[23]=W):W=e[23];let d;e[24]!==c?(d=s.jsxs("div",{className:"mb-6",children:[c,W]}),e[24]=c,e[25]=d):d=e[25];let K;e[26]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Nombre Completo"}),e[26]=K):K=e[26];let u;e[27]!==a?(u=t=>a("name",t.target.value),e[27]=a,e[28]=u):u=e[28];let f;e[29]!==l.name||e[30]!==u?(f=s.jsx("input",{type:"text",value:l.name,onChange:u,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[29]=l.name,e[30]=u,e[31]=f):f=e[31];let p;e[32]!==r.name?(p=r.name&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.name}),e[32]=r.name,e[33]=p):p=e[33];let x;e[34]!==f||e[35]!==p?(x=s.jsxs("div",{children:[K,f,p]}),e[34]=f,e[35]=p,e[36]=x):x=e[36];let X;e[37]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Correo Electrónico"}),e[37]=X):X=e[37];let b;e[38]!==a?(b=t=>a("email",t.target.value),e[38]=a,e[39]=b):b=e[39];let h;e[40]!==l.email||e[41]!==b?(h=s.jsx("input",{type:"email",value:l.email,onChange:b,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none"}),e[40]=l.email,e[41]=b,e[42]=h):h=e[42];let g;e[43]!==r.email?(g=r.email&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.email}),e[43]=r.email,e[44]=g):g=e[44];let v;e[45]!==h||e[46]!==g?(v=s.jsxs("div",{children:[X,h,g]}),e[45]=h,e[46]=g,e[47]=v):v=e[47];let j;e[48]!==x||e[49]!==v?(j=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[x,v]}),e[48]=x,e[49]=v,e[50]=j):j=e[50];let Y;e[51]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Contraseña (Opcional)"}),e[51]=Y):Y=e[51];let y;e[52]!==a?(y=t=>a("password",t.target.value),e[52]=a,e[53]=y):y=e[53];let N;e[54]!==l.password||e[55]!==y?(N=s.jsx("input",{type:"password",value:l.password,onChange:y,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none",placeholder:"••••••••"}),e[54]=l.password,e[55]=y,e[56]=N):N=e[56];let w;e[57]!==r.password?(w=r.password&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.password}),e[57]=r.password,e[58]=w):w=e[58];let C;e[59]!==N||e[60]!==w?(C=s.jsxs("div",{children:[Y,N,w]}),e[59]=N,e[60]=w,e[61]=C):C=e[61];let Z;e[62]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Compañía"}),e[62]=Z):Z=e[62];let S;e[63]!==a?(S=t=>a("company",t),e[63]=a,e[64]=S):S=e[64];let I;e[65]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(fe,{className:"w-full",children:s.jsx(pe,{placeholder:"Seleccione una Compañía"})}),e[65]=I):I=e[65];let ee;e[66]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(ue,{children:we.map(_e)}),e[66]=ee):ee=e[66];let _;e[67]!==l.company||e[68]!==S?(_=s.jsxs(de,{value:l.company,onValueChange:S,children:[I,ee]}),e[67]=l.company,e[68]=S,e[69]=_):_=e[69];let k;e[70]!==r.company?(k=r.company&&s.jsx("p",{className:"mt-1 text-xs text-destructive",children:r.company}),e[70]=r.company,e[71]=k):k=e[71];let E;e[72]!==_||e[73]!==k?(E=s.jsxs("div",{children:[Z,_,k]}),e[72]=_,e[73]=k,e[74]=E):E=e[74];let $;e[75]!==C||e[76]!==E?($=s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[C,E]}),e[75]=C,e[76]=E,e[77]=$):$=e[77];let P;e[78]!==j||e[79]!==$?(P=s.jsxs("div",{className:"space-y-4",children:[j,$]}),e[78]=j,e[79]=$,e[80]=P):P=e[80];let se;e[81]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsxs("h3",{className:"mb-4 flex items-center gap-2 font-medium",children:[s.jsx(ye,{className:"size-4"})," Roles y Permisos"]}),e[81]=se):se=e[81];let te;e[82]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Rol del Sistema"}),e[82]=te):te=e[82];let V;e[83]!==a?(V=t=>a("role",t),e[83]=a,e[84]=V):V=e[84];let le;e[85]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(fe,{className:"w-full",children:s.jsx(pe,{placeholder:"Seleccione un Rol"})}),e[85]=le):le=e[85];let ie;e[86]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(ue,{children:Ce.map(Se)}),e[86]=ie):ie=e[86];let A;e[87]!==l.role||e[88]!==V?(A=s.jsxs("div",{className:"mb-6",children:[te,s.jsxs(de,{value:l.role,onValueChange:V,children:[le,ie]})]}),e[87]=l.role,e[88]=V,e[89]=A):A=e[89];let M;e[90]!==l.role||e[91]!==D||e[92]!==B?(M=l.role!=="admin"&&l.role!=="capitan"&&s.jsxs("div",{children:[s.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Permisos por Módulo"}),s.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-muted-foreground",children:[s.jsx("th",{className:"pb-2 font-medium",children:"Módulo"}),s.jsx("th",{className:"pb-2 font-medium",children:"Nivel de Acceso"})]})}),s.jsx("tbody",{className:"divide-y",children:Ne.map(t=>s.jsxs("tr",{children:[s.jsx("td",{className:"py-2.5 font-medium",children:t.label}),s.jsx("td",{className:"py-2",children:s.jsxs("div",{className:"flex gap-1 rounded-md bg-muted/50 p-1",children:[s.jsx("button",{type:"button",onClick:()=>B(t.id,"none"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${D(t.id)==="none"?"bg-background shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ninguno"}),s.jsx("button",{type:"button",onClick:()=>B(t.id,"view"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${D(t.id)==="view"?"bg-blue-100 text-blue-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Ver"}),s.jsx("button",{type:"button",onClick:()=>B(t.id,"edit"),className:`flex-1 rounded px-2 py-1 text-xs font-medium transition-colors ${D(t.id)==="edit"?"bg-green-100 text-green-700 shadow-sm":"text-muted-foreground hover:bg-background/50"}`,children:"Editar"})]})})]},t.id))})]})}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"'Editar' incluye permisos de 'Ver'."})]}),e[90]=l.role,e[91]=D,e[92]=B,e[93]=M):M=e[93];let U;e[94]!==A||e[95]!==M?(U=s.jsxs("div",{className:"rounded-lg border p-4",children:[se,A,M]}),e[94]=A,e[95]=M,e[96]=U):U=e[96];let R;e[97]!==oe?(R=s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{type:"submit",disabled:oe,className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground text-white transition-colors hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-primary focus-visible:outline-none disabled:opacity-50",children:"Guardar Cambios"})}),e[97]=oe,e[98]=R):R=e[98];let q;e[99]!==me||e[100]!==P||e[101]!==U||e[102]!==R?(q=s.jsxs("form",{onSubmit:me,className:"space-y-6",children:[P,U,R]}),e[99]=me,e[100]=P,e[101]=U,e[102]=R,e[103]=q):q=e[103];let T;e[104]!==d||e[105]!==q?(T=s.jsx("div",{className:"flex flex-col gap-6 p-4",children:s.jsxs("div",{className:"max-w-4xl rounded-xl border bg-card p-6 shadow-sm",children:[d,q]})}),e[104]=d,e[105]=q,e[106]=T):T=e[106];let ae;return e[107]!==T||e[108]!==m?(ae=s.jsxs(je,{breadcrumbs:m,children:[Q,T]}),e[107]=T,e[108]=m,e[109]=ae):ae=e[109],ae}function Se(n){return s.jsx(xe,{value:n.value,children:n.label},n.value)}function _e(n){return s.jsx(xe,{value:n,children:n},n)}export{Be as default};
