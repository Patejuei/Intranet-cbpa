import{c as Ae,r as H,u as Oe,j as t,L as Be,a as Le,H as $e}from"./app-BIf_3_yO.js";import{B as R}from"./button-ocm-JKIV.js";import{D as Ve,a as He,b as Re,c as Je,d as Qe}from"./dialog-CXDxHZHr.js";import{I as o}from"./input-ItEhFpaY.js";import{L as n}from"./label-BXBbvaNv.js";import{S as Ge,a as Ue,b as Ke,c as We,d as r}from"./select-DLMhXFYt.js";import{F as Xe,A as Ye}from"./app-layout-BummZ3R_.js";import{C as Ze}from"./CompanyFilter-C7NFXakh.js";import{P as et}from"./Pagination-BQ6dAf1_.js";import{E as tt}from"./eye-BzFdY8ky.js";import{P as at}from"./pencil--xshjK_g.js";import{P as st}from"./plus-C4quhEna.js";import{S as lt}from"./search-fIHQi_7U.js";/* empty css            */import"./index-Biy2Phsi.js";import"./index-cS1n-4PE.js";import"./index-ATgpkBzy.js";import"./chevron-down-Ikrv-Emw.js";import"./check-Co4t-Wzi.js";import"./index-C4J_hXM0.js";import"./shield-f5WHSZI-.js";function kt(we){const e=Ae.c(124),{materials:J,filters:Te}=we,[i,ze]=H.useState(Te?.search||""),[be,c]=H.useState(!1),[d,Ee]=H.useState(!1),[Q,Fe]=H.useState(null);let G;e[0]===Symbol.for("react.memo_cache_sentinel")?(G={product_name:"",brand:"",model:"",code:"",stock_quantity:0,company:"Segunda Compañía",category:"",document_path:null},e[0]=G):G=e[0];const{data:l,setData:s,post:Ne,put:_e,processing:Ce,reset:Se}=Oe(G);let U;e[1]!==Se?(U=()=>{Se(),Ee(!1),Fe(null),c(!0)},e[1]=Se,e[2]=U):U=e[2];const ke=U;let K;e[3]!==s?(K=a=>{s({product_name:a.product_name,brand:a.brand||"",model:a.model||"",code:a.code||"",stock_quantity:a.stock_quantity,company:a.company,category:a.category||"",document_path:null}),Ee(!0),Fe(a.id),c(!0)},e[3]=s,e[4]=K):K=e[4];const Ie=K;let W;e[5]!==Q||e[6]!==d||e[7]!==Ne||e[8]!==_e?(W=a=>{a.preventDefault(),d&&Q?_e(`/inventory/${Q}`,{onSuccess:()=>c(!1)}):Ne("/inventory",{onSuccess:()=>c(!1)})},e[5]=Q,e[6]=d,e[7]=Ne,e[8]=_e,e[9]=W):W=e[9];const qe=W;let X,Y;e[10]!==i?(X=()=>{const a=setTimeout(()=>{Le.get("/inventory",{search:i},{preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(a)},Y=[i],e[10]=i,e[11]=X,e[12]=Y):(X=e[11],Y=e[12]),H.useEffect(X,Y);const Z=J.data;let ee,te;e[13]===Symbol.for("react.memo_cache_sentinel")?(ee=[{title:"Panel Principal",href:"/dashboard"},{title:"Inventario",href:"/inventory"}],te=t.jsx($e,{title:"Inventario de Material Menor"}),e[13]=ee,e[14]=te):(ee=e[13],te=e[14]);let ae;e[15]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Inventario de Material Menor"}),t.jsx("p",{className:"text-muted-foreground",children:"Control de stock de materiales y equipos."})]}),e[15]=ae):ae=e[15];let se;e[16]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(st,{className:"size-4"}),e[16]=se):se=e[16];let m;e[17]!==ke?(m=t.jsxs("div",{className:"flex items-center justify-between",children:[ae,t.jsxs(R,{onClick:ke,className:"gap-2",children:[se,"Agregar Material"]})]}),e[17]=ke,e[18]=m):m=e[18];let le;e[19]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(lt,{className:"size-4 text-muted-foreground"}),e[19]=le):le=e[19];let re;e[20]===Symbol.for("react.memo_cache_sentinel")?(re=a=>ze(a.target.value),e[20]=re):re=e[20];let u;e[21]!==i?(u=t.jsxs("div",{className:"flex max-w-sm items-center gap-2",children:[le,t.jsx(o,{placeholder:"Buscar en esta página...",value:i,onChange:re,className:"h-9"})]}),e[21]=i,e[22]=u):u=e[22];let oe;e[23]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Ze,{}),e[23]=oe):oe=e[23];let p;e[24]!==u?(p=t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[u,oe]}),e[24]=u,e[25]=p):p=e[25];let ne;e[26]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("thead",{className:"bg-muted/50 text-muted-foreground",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 font-medium",children:"Cód / N° Inv"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Producto"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Marca / Modelo"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Stock"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Categoría"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Compañía"}),t.jsx("th",{className:"px-4 py-3 font-medium",children:"Acciones"})]})}),e[26]=ne):ne=e[26];let h;e[27]!==Z||e[28]!==Ie?(h=Z.length>0?Z.map(a=>t.jsxs("tr",{className:"hover:bg-muted/30",children:[t.jsx("td",{className:"px-4 py-3 font-mono text-muted-foreground",children:a.code||"-"}),t.jsx("td",{className:"px-4 py-3 font-medium",children:a.product_name}),t.jsxs("td",{className:"px-4 py-3",children:[a.brand," ",a.model]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium ${a.stock_quantity>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[a.stock_quantity," ","un."]})}),t.jsx("td",{className:"px-4 py-3",children:a.category||"-"}),t.jsx("td",{className:"px-4 py-3",children:a.company}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(R,{variant:"ghost",size:"icon",asChild:!0,title:"Ver Detalle",children:t.jsx(Be,{href:`/inventory/${a.id}`,children:t.jsx(tt,{className:"size-4"})})}),a.document_path&&t.jsx("a",{href:`/storage/${a.document_path}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-input bg-background text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground",title:"Ver Documento",children:t.jsx(Xe,{className:"size-4"})}),t.jsx(R,{variant:"ghost",size:"icon",onClick:()=>Ie(a),children:t.jsx(at,{className:"size-4"})})]})})]},a.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-muted-foreground",children:"No se encontraron materiales en esta página."})}),e[27]=Z,e[28]=Ie,e[29]=h):h=e[29];let f;e[30]!==h?(f=t.jsx("div",{className:"rounded-xl border bg-card shadow-sm",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-sm",children:[ne,t.jsx("tbody",{className:"divide-y",children:h})]})})}),e[30]=h,e[31]=f):f=e[31];let x;e[32]!==J.links?(x=t.jsx(et,{links:J.links}),e[32]=J.links,e[33]=x):x=e[33];let g;e[34]!==m||e[35]!==p||e[36]!==f||e[37]!==x?(g=t.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[m,p,f,x]}),e[34]=m,e[35]=p,e[36]=f,e[37]=x,e[38]=g):g=e[38];const Pe=d?"Editar Material":"Agregar Nuevo Material";let j;e[39]!==Pe?(j=t.jsx(Ve,{children:Pe}),e[39]=Pe,e[40]=j):j=e[40];const Me=d?"Modifique los detalles del material.":"Ingrese los detalles del nuevo material para inventario.";let y;e[41]!==Me?(y=t.jsx(He,{children:Me}),e[41]=Me,e[42]=y):y=e[42];let v;e[43]!==j||e[44]!==y?(v=t.jsxs(Re,{children:[j,y]}),e[43]=j,e[44]=y,e[45]=v):v=e[45];let ie;e[46]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(n,{htmlFor:"company",children:"Compañía"}),e[46]=ie):ie=e[46];let b;e[47]!==s?(b=a=>s("company",a),e[47]=s,e[48]=b):b=e[48];let ce;e[49]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(Ue,{className:"w-full",children:t.jsx(Ke,{placeholder:"Seleccione Compañía"})}),e[49]=ce):ce=e[49];let de;e[50]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsxs(We,{children:[t.jsx(r,{value:"Primera Compañía",children:"Primera Compañía"}),t.jsx(r,{value:"Segunda Compañía",children:"Segunda Compañía"}),t.jsx(r,{value:"Tercera Compañía",children:"Tercera Compañía"}),t.jsx(r,{value:"Cuarta Compañía",children:"Cuarta Compañía"}),t.jsx(r,{value:"Quinta Compañía",children:"Quinta Compañía"}),t.jsx(r,{value:"Sexta Compañía",children:"Sexta Compañía"}),t.jsx(r,{value:"Séptima Compañía",children:"Séptima Compañía"}),t.jsx(r,{value:"Octava Compañía",children:"Octava Compañía"}),t.jsx(r,{value:"Novena Compañía",children:"Novena Compañía"}),t.jsx(r,{value:"Brigada Juvenil",children:"Brigada Juvenil"}),t.jsx(r,{value:"Comandancia",children:"Comandancia"})]}),e[50]=de):de=e[50];let N;e[51]!==l.company||e[52]!==b?(N=t.jsxs("div",{className:"grid gap-2",children:[ie,t.jsxs(Ge,{value:l.company,onValueChange:b,children:[ce,de]})]}),e[51]=l.company,e[52]=b,e[53]=N):N=e[53];let me;e[54]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(n,{htmlFor:"product_name",children:"Nombre del Producto"}),e[54]=me):me=e[54];let _;e[55]!==s?(_=a=>s("product_name",a.target.value),e[55]=s,e[56]=_):_=e[56];let C;e[57]!==l.product_name||e[58]!==_?(C=t.jsxs("div",{className:"grid gap-2",children:[me,t.jsx(o,{id:"product_name",value:l.product_name,onChange:_,required:!0})]}),e[57]=l.product_name,e[58]=_,e[59]=C):C=e[59];let ue;e[60]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(n,{htmlFor:"brand",children:"Marca"}),e[60]=ue):ue=e[60];let S;e[61]!==s?(S=a=>s("brand",a.target.value),e[61]=s,e[62]=S):S=e[62];let k;e[63]!==l.brand||e[64]!==S?(k=t.jsxs("div",{className:"grid gap-2",children:[ue,t.jsx(o,{id:"brand",value:l.brand,onChange:S})]}),e[63]=l.brand,e[64]=S,e[65]=k):k=e[65];let pe;e[66]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(n,{htmlFor:"model",children:"Modelo"}),e[66]=pe):pe=e[66];let I;e[67]!==s?(I=a=>s("model",a.target.value),e[67]=s,e[68]=I):I=e[68];let q;e[69]!==l.model||e[70]!==I?(q=t.jsxs("div",{className:"grid gap-2",children:[pe,t.jsx(o,{id:"model",value:l.model,onChange:I})]}),e[69]=l.model,e[70]=I,e[71]=q):q=e[71];let P;e[72]!==k||e[73]!==q?(P=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k,q]}),e[72]=k,e[73]=q,e[74]=P):P=e[74];let he;e[75]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(n,{htmlFor:"code",children:"Código Interno"}),e[75]=he):he=e[75];let M;e[76]!==s?(M=a=>s("code",a.target.value),e[76]=s,e[77]=M):M=e[77];let D;e[78]!==l.code||e[79]!==M?(D=t.jsxs("div",{className:"grid gap-2",children:[he,t.jsx(o,{id:"code",value:l.code,onChange:M})]}),e[78]=l.code,e[79]=M,e[80]=D):D=e[80];let fe;e[81]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(n,{htmlFor:"stock_quantity",children:"Cantidad Inicial"}),e[81]=fe):fe=e[81];let E;e[82]!==s?(E=a=>s("stock_quantity",parseInt(a.target.value)),e[82]=s,e[83]=E):E=e[83];let F;e[84]!==l.stock_quantity||e[85]!==E?(F=t.jsxs("div",{className:"grid gap-2",children:[fe,t.jsx(o,{id:"stock_quantity",type:"number",min:"0",value:l.stock_quantity,onChange:E,required:!0})]}),e[84]=l.stock_quantity,e[85]=E,e[86]=F):F=e[86];let w;e[87]!==D||e[88]!==F?(w=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[D,F]}),e[87]=D,e[88]=F,e[89]=w):w=e[89];let xe;e[90]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(n,{htmlFor:"category",children:"Categoría"}),e[90]=xe):xe=e[90];let T;e[91]!==s?(T=a=>s("category",a.target.value),e[91]=s,e[92]=T):T=e[92];let z;e[93]!==l.category||e[94]!==T?(z=t.jsxs("div",{className:"grid gap-2",children:[xe,t.jsx(o,{id:"category",value:l.category,onChange:T,placeholder:"Ej: EPP, Uniforme, Radio..."})]}),e[93]=l.category,e[94]=T,e[95]=z):z=e[95];let ge;e[96]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(n,{htmlFor:"document_path",children:"Documento de Alta (Opcional)"}),e[96]=ge):ge=e[96];let A;e[97]!==s?(A=t.jsx(o,{id:"document_path",type:"file",onChange:a=>s("document_path",a.target.files?a.target.files[0]:null),className:"cursor-pointer"}),e[97]=s,e[98]=A):A=e[98];let je;e[99]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("p",{className:"text-[0.8rem] text-muted-foreground",children:"Adjuntar factura, guía de despacho o acta de alta."}),e[99]=je):je=e[99];let O;e[100]!==A?(O=t.jsxs("div",{className:"grid gap-2",children:[ge,A,je]}),e[100]=A,e[101]=O):O=e[101];let ye;e[102]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(R,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),e[102]=ye):ye=e[102];const De=d?"Actualizar":"Guardar";let B;e[103]!==Ce||e[104]!==De?(B=t.jsxs("div",{className:"flex justify-end gap-2",children:[ye,t.jsx(R,{type:"submit",disabled:Ce,children:De})]}),e[103]=Ce,e[104]=De,e[105]=B):B=e[105];let L;e[106]!==qe||e[107]!==N||e[108]!==C||e[109]!==P||e[110]!==w||e[111]!==z||e[112]!==O||e[113]!==B?(L=t.jsxs("form",{onSubmit:qe,className:"grid gap-4 py-4",children:[N,C,P,w,z,O,B]}),e[106]=qe,e[107]=N,e[108]=C,e[109]=P,e[110]=w,e[111]=z,e[112]=O,e[113]=B,e[114]=L):L=e[114];let $;e[115]!==v||e[116]!==L?($=t.jsxs(Je,{children:[v,L]}),e[115]=v,e[116]=L,e[117]=$):$=e[117];let V;e[118]!==be||e[119]!==$?(V=t.jsx(Qe,{open:be,onOpenChange:c,children:$}),e[118]=be,e[119]=$,e[120]=V):V=e[120];let ve;return e[121]!==g||e[122]!==V?(ve=t.jsxs(Ye,{breadcrumbs:ee,children:[te,g,V]}),e[121]=g,e[122]=V,e[123]=ve):ve=e[123],ve}export{kt as default};
