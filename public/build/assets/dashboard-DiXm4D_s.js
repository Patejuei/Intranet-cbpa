import{c as te,r as X,b as re,j as s,L as a,H as le}from"./app-POeEJ9jb.js";import{B as ae,M as Z,A as ne}from"./app-layout-D8iWbJXT.js";import{a as de,f as Q}from"./button-b-d64DVq.js";/* empty css            */import"./index-BSOmSsQS.js";import"./index-DdLfwd3F.js";import"./index-C4J_hXM0.js";import"./shield-BJxPqUTl.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ce=de("Clock",ie),oe=[{title:"Panel Principal",href:"/dashboard"}],me="recent_modules";function $e(t){const e=te.c(56),{upcomingBatteries:v,pendingTickets:n,respondedTickets:w,vehiclesStopped:k,pendingIncidents:S,vehiclesInWorkshop:_,expiringDocuments:E}=t;let T;e[0]!==v?(T=v===void 0?[]:v,e[0]=v,e[1]=T):T=e[1];const z=T;let D;e[2]!==n?(D=n===void 0?[]:n,e[2]=n,e[3]=D):D=e[3];const $=D;let I;e[4]!==w?(I=w===void 0?[]:w,e[4]=w,e[5]=I):I=e[5];const M=I;let P;e[6]!==k?(P=k===void 0?[]:k,e[6]=k,e[7]=P):P=e[7];const R=P;let q;e[8]!==S?(q=S===void 0?[]:S,e[8]=S,e[9]=q):q=e[9];const B=q;let C;e[10]!==_?(C=_===void 0?[]:_,e[10]=_,e[11]=C):C=e[11];const L=C;let V;e[12]!==E?(V=E===void 0?[]:E,e[12]=E,e[13]=V):V=e[13];const O=V;let A;e[14]===Symbol.for("react.memo_cache_sentinel")?(A=[],e[14]=A):A=e[14];const[F,ee]=X.useState(A),{auth:d}=re().props;let U;e[15]!==d.user?(U=r=>{const l=d.user;if(!l)return!1;if(l.role==="admin"||l.role==="capitan"||r.permission==="vehicles"&&["cuartelero","mechanic"].includes(l.role||""))return!0;const y=l.permissions||[],N=r.permission;return y.includes(N)||y.includes(`${N}.view`)||y.includes(`${N}.edit`)},e[15]=d.user,e[16]=U):U=e[16];const i=U;let W;e[17]!==i?(W=()=>{try{const r=localStorage.getItem(me);if(r){const y=JSON.parse(r).map(ye).filter(N=>!!N&&i(N));ee(y)}}catch(r){console.error("Error loading recent modules",r)}},e[17]=i,e[18]=W):W=e[18];let H;e[19]!==d.user?(H=[d.user],e[19]=d.user,e[20]=H):H=e[20],X.useEffect(W,H);const se=ve;let K;e[21]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(le,{title:"Material Menor - CBPA"}),e[21]=K):K=e[21];let c;e[22]!==O?(c=O.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-red-600 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 animate-pulse rounded-full bg-red-600"}),"Vencimiento de Documentación"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos con documentación próxima a vencer o vencida."})]}),s.jsx("div",{className:"space-y-3",children:O.map(be)})]}),e[22]=O,e[23]=c):c=e[23];let o;e[24]!==$?(o=$.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-yellow-500"}),"Tickets Pendientes"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes que requieren atención."})]}),s.jsx("div",{className:"space-y-3",children:$.map(ge)})]}),e[24]=$,e[25]=o):o=e[25];let m;e[26]!==M?(m=M.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-blue-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-blue-500"}),"Tickets en Proceso"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Solicitudes con respuesta de Comandancia."})]}),s.jsx("div",{className:"space-y-3",children:M.map(je)})]}),e[26]=M,e[27]=m):m=e[27];let x;e[28]!==R?(x=R.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-red-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-red-500"}),"Material Fuera de Servicio"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos detenidos o en taller."})]}),s.jsx("div",{className:"space-y-3",children:R.map(fe)})]}),e[28]=R,e[29]=x):x=e[29];let u;e[30]!==B?(u=B.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-orange-500 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-orange-500"}),"Incidencias Pendientes"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Novedades reportadas sin resolver."})]}),s.jsx("div",{className:"space-y-3",children:B.map(he)})]}),e[30]=B,e[31]=u):u=e[31];let p;e[32]!==x||e[33]!==u?(p=s.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[x,u]}),e[32]=x,e[33]=u,e[34]=p):p=e[34];let h;e[35]!==L?(h=L.length>0&&s.jsxs("div",{className:"rounded-xl border border-l-4 border-l-yellow-600 bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("h2",{className:"flex items-center gap-2 text-xl font-bold",children:[s.jsx("span",{className:"flex size-3 rounded-full bg-yellow-600"}),"Unidades en Taller"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehículos con orden de trabajo activa."})]}),s.jsx("div",{className:"space-y-3",children:L.map(pe)})]}),e[35]=L,e[36]=h):h=e[36];let f;e[37]!==z?(f=z.length>0&&s.jsxs("div",{className:"rounded-xl border bg-card p-6 shadow-sm",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-4",children:[s.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary",children:s.jsx(ae,{className:"size-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"Próximos Cambios de Baterías"}),s.jsx("p",{className:"text-muted-foreground",children:"Equipos que requieren atención pronto"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left font-medium text-muted-foreground",children:[s.jsx("th",{className:"pb-2",children:"Fecha"}),s.jsx("th",{className:"pb-2",children:"Días"}),s.jsx("th",{className:"pb-2",children:"Equipo"}),s.jsx("th",{className:"pb-2",children:"Responsable"}),s.jsx("th",{className:"pb-2",children:"Compañía"})]})}),s.jsx("tbody",{className:"divide-y",children:z.map(r=>{const l=se(r.next_change_date);return s.jsxs("tr",{children:[s.jsx("td",{className:"py-3",children:Q(r.next_change_date)}),s.jsx("td",{className:"py-3",children:s.jsxs("span",{className:`rounded px-2 py-1 font-bold ${l<=3?"bg-destructive/20 text-destructive":"bg-muted text-muted-foreground"}`,children:[l," días"]})}),s.jsx("td",{className:"py-3",children:r.equipment_type}),s.jsx("td",{className:"py-3",children:r.responsible_name}),s.jsx("td",{className:"py-3",children:r.company})]},r.id)})})]})})]}),e[37]=z,e[38]=f):f=e[38];let j;e[39]!==F?(j=F.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(ce,{className:"size-4"}),s.jsx("h2",{className:"text-sm font-medium tracking-wider uppercase",children:"Visitados Recientemente"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:F.map(ue)})]}),e[39]=F,e[40]=j):j=e[40];let J;e[41]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("h2",{className:"text-sm font-medium tracking-wider text-muted-foreground uppercase",children:"Todos los Módulos"}),e[41]=J):J=e[41];let g;e[42]!==i?(g=Z.filter(xe).map(r=>{if(!i(r))return null;const l=r.icon;return s.jsx(a,{href:r.href,className:"group relative overflow-hidden rounded-xl border bg-card p-6 shadow-sm transition-all hover:border-primary hover:shadow-md",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"rounded-lg bg-primary/10 p-3 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:s.jsx(l,{className:"size-6"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:r.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]})]})},r.key)}),e[42]=i,e[43]=g):g=e[43];let b;e[44]!==g?(b=s.jsxs("div",{className:"space-y-4",children:[J,s.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:g})]}),e[44]=g,e[45]=b):b=e[45];let Y;e[46]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsxs("div",{className:"rounded-xl border bg-muted/40 p-6",children:[s.jsx("h2",{className:"mb-2 text-xl font-semibold",children:"Bienvenido al Sistema de Material Menor"}),s.jsx("p",{className:"text-muted-foreground",children:"Seleccione una opción de arriba para comenzar sus operaciones."})]}),e[46]=Y):Y=e[46];let G;return e[47]!==c||e[48]!==o||e[49]!==m||e[50]!==p||e[51]!==h||e[52]!==f||e[53]!==j||e[54]!==b?(G=s.jsxs(ne,{breadcrumbs:oe,children:[K,s.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[c,o,m,p,h,f,j,b,Y]})]}),e[47]=c,e[48]=o,e[49]=m,e[50]=p,e[51]=h,e[52]=f,e[53]=j,e[54]=b,e[55]=G):G=e[55],G}function xe(t){return!t.key.startsWith("admin-")}function ue(t){const e=t.icon;return s.jsxs(a,{href:t.href,className:"group relative flex items-center gap-3 overflow-hidden rounded-lg border bg-card p-4 shadow-sm transition-all hover:border-primary hover:shadow-md",children:[s.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary transition-colors group-hover:bg-primary group-hover:text-primary-foreground",children:s.jsx(e,{className:"size-5"})}),s.jsx("div",{children:s.jsx("h3",{className:"leading-none font-medium",children:t.title})})]},t.key)}function pe(t){const e=t.maintenances?.[0];return s.jsx(a,{href:`/vehicles/status/${t.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-bold",children:t.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.company,")"]})]}),e?s.jsxs("p",{className:"text-xs font-medium text-yellow-700",children:[e.workshop_name," ","-"," ",e.description]}):s.jsx("p",{className:"text-xs text-muted-foreground",children:"Sin detalles de orden."})]}),e?.entry_date&&s.jsxs("div",{className:"flex items-center gap-1 font-mono text-xs text-muted-foreground",children:["Ingreso:"," ",Q(e.entry_date)]})]})},t.id)}function he(t){return s.jsx(a,{href:"/vehicles/incidents",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"line-clamp-1 font-medium",children:[t.vehicle.name," -"," ",t.description]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reportado:"," ",Q(t.created_at)]})]}),s.jsx("div",{className:"rounded bg-orange-100 px-2 py-1 text-xs text-orange-700",children:t.severity})]})},t.id)}function fe(t){return s.jsx(a,{href:`/vehicles/status/${t.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:t.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.company})]}),s.jsx("div",{className:`rounded px-2 py-1 text-xs font-medium ${t.status==="Out of Service"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t.status==="Out of Service"?"Fuera de Servicio":"En Taller"})]})},t.id)}function je(t){return s.jsx(a,{href:`/tickets/${t.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:t.subject}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Estado: ",t.status]})]}),s.jsx("div",{className:"rounded bg-blue-100 px-2 py-1 text-xs text-blue-700",children:"Ver Respuesta"})]})},t.id)}function ge(t){return s.jsx(a,{href:`/tickets/${t.id}`,className:"block",children:s.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:t.subject}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.user.company," -"," ",t.user.name]})]}),s.jsx("div",{className:"font-mono text-xs text-muted-foreground",children:Q(t.created_at)})]})},t.id)}function be(t){return s.jsx(a,{href:`/vehicles/status/${t.id}`,className:"block",children:s.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border p-3 transition-colors hover:bg-muted/50",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-bold",children:t.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t.company})]}),s.jsx("div",{className:"flex flex-col gap-1",children:t.alerts.map(Ne)})]})},t.id)}function Ne(t,e){return s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:t.label}),s.jsxs("span",{className:`font-medium ${t.status==="danger"?"text-red-600":"text-orange-600"}`,children:[t.date," (",t.days," días)"]})]},e)}function ve(t){const e=new Date,n=new Date(t).getTime()-e.getTime();return Math.ceil(n/864e5)}function ye(t){return Z.find(e=>e.key===t)}export{$e as default};
