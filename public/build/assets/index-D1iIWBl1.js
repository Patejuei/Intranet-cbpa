import{R as p,j as t,c as _,L as $,H as ee}from"./app-B61HxmhB.js";import{c as oe,b as L,a as te}from"./index-DnuNE2iH.js";import{y as re,N as U,d as se,Q as ae,S as ne,U as ce,u as le,z as ie,A as de,W as me}from"./app-layout-B6JJyxYC.js";import{u as pe,c as O,B as H}from"./button-DEfvv7zK.js";import{P as W}from"./index-0lwPlNm7.js";import{B as M}from"./badge-vEvJTU3_.js";import{b as ue,C as fe,a as xe,d as he,c as ve}from"./card-BSIOn_Bx.js";import{u as ge}from"./use-permissions-CjVjEqdZ.js";import{P as be}from"./plus-DEtsulu_.js";import{C as Ce}from"./circle-alert-DKhGQTuf.js";import{C as je}from"./circle-check-BxRBnB_T.js";/* empty css            */import"./index-q7GIQJN5.js";import"./shield-BxyVENHa.js";var h="Accordion",Ae=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[V,Ne,we]=re(h),[R,to]=oe(h,[we,U]),D=U(),z=p.forwardRef((s,e)=>{const{type:o,...r}=s,n=r,a=r;return t.jsx(V.Provider,{scope:s.__scopeAccordion,children:o==="multiple"?t.jsx(Pe,{...a,ref:e}):t.jsx(_e,{...n,ref:e})})});z.displayName=h;var[B,ye]=R(h),[K,Ie]=R(h,{collapsible:!1}),_e=p.forwardRef((s,e)=>{const{value:o,defaultValue:r,onValueChange:n=()=>{},collapsible:a=!1,...c}=s,[l,f]=L({prop:o,defaultProp:r??"",onChange:n,caller:h});return t.jsx(B,{scope:s.__scopeAccordion,value:p.useMemo(()=>l?[l]:[],[l]),onItemOpen:f,onItemClose:p.useCallback(()=>a&&f(""),[a,f]),children:t.jsx(K,{scope:s.__scopeAccordion,collapsible:a,children:t.jsx(G,{...c,ref:e})})})}),Pe=p.forwardRef((s,e)=>{const{value:o,defaultValue:r,onValueChange:n=()=>{},...a}=s,[c,l]=L({prop:o,defaultProp:r??[],onChange:n,caller:h}),f=p.useCallback(v=>l((m=[])=>[...m,v]),[l]),u=p.useCallback(v=>l((m=[])=>m.filter(A=>A!==v)),[l]);return t.jsx(B,{scope:s.__scopeAccordion,value:c,onItemOpen:f,onItemClose:u,children:t.jsx(K,{scope:s.__scopeAccordion,collapsible:!0,children:t.jsx(G,{...a,ref:e})})})}),[Se,E]=R(h),G=p.forwardRef((s,e)=>{const{__scopeAccordion:o,disabled:r,dir:n,orientation:a="vertical",...c}=s,l=p.useRef(null),f=pe(l,e),u=Ne(o),m=le(n)==="ltr",A=te(s.onKeyDown,C=>{if(!Ae.includes(C.key))return;const I=C.target,g=u().filter(y=>!y.ref.current?.disabled),x=g.findIndex(y=>y.ref.current===I),j=g.length;if(x===-1)return;C.preventDefault();let i=x;const N=0,b=j-1,d=()=>{i=x+1,i>b&&(i=N)},w=()=>{i=x-1,i<N&&(i=b)};switch(C.key){case"Home":i=N;break;case"End":i=b;break;case"ArrowRight":a==="horizontal"&&(m?d():w());break;case"ArrowDown":a==="vertical"&&d();break;case"ArrowLeft":a==="horizontal"&&(m?w():d());break;case"ArrowUp":a==="vertical"&&w();break}const P=i%j;g[P].ref.current?.focus()});return t.jsx(Se,{scope:o,disabled:r,direction:n,orientation:a,children:t.jsx(V.Slot,{scope:o,children:t.jsx(W.div,{...c,"data-orientation":a,ref:f,onKeyDown:r?void 0:A})})})}),S="AccordionItem",[Re,T]=R(S),F=p.forwardRef((s,e)=>{const{__scopeAccordion:o,value:r,...n}=s,a=E(S,o),c=ye(S,o),l=D(o),f=se(),u=r&&c.value.includes(r)||!1,v=a.disabled||s.disabled;return t.jsx(Re,{scope:o,open:u,disabled:v,triggerId:f,children:t.jsx(ae,{"data-orientation":a.orientation,"data-state":Z(u),...l,...n,ref:e,disabled:v,open:u,onOpenChange:m=>{m?c.onItemOpen(r):c.onItemClose(r)}})})});F.displayName=S;var Q="AccordionHeader",Y=p.forwardRef((s,e)=>{const{__scopeAccordion:o,...r}=s,n=E(h,o),a=T(Q,o);return t.jsx(W.h3,{"data-orientation":n.orientation,"data-state":Z(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:e})});Y.displayName=Q;var k="AccordionTrigger",q=p.forwardRef((s,e)=>{const{__scopeAccordion:o,...r}=s,n=E(h,o),a=T(k,o),c=Ie(k,o),l=D(o);return t.jsx(V.ItemSlot,{scope:o,children:t.jsx(ne,{"aria-disabled":a.open&&!c.collapsible||void 0,"data-orientation":n.orientation,id:a.triggerId,...l,...r,ref:e})})});q.displayName=k;var J="AccordionContent",X=p.forwardRef((s,e)=>{const{__scopeAccordion:o,...r}=s,n=E(h,o),a=T(J,o),c=D(o);return t.jsx(ce,{role:"region","aria-labelledby":a.triggerId,"data-orientation":n.orientation,...c,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...s.style}})});X.displayName=J;function Z(s){return s?"open":"closed"}var Ee=z,ke=F,Oe=Y,Ve=q,De=X;function Te(s){const e=_.c(4);let o;e[0]!==s?({...o}=s,e[0]=s,e[1]=o):o=e[1];let r;return e[2]!==o?(r=t.jsx(Ee,{"data-slot":"accordion",...o}),e[2]=o,e[3]=r):r=e[3],r}function $e(s){const e=_.c(8);let o,r;e[0]!==s?({className:o,...r}=s,e[0]=s,e[1]=o,e[2]=r):(o=e[1],r=e[2]);let n;e[3]!==o?(n=O("border-b last:border-b-0",o),e[3]=o,e[4]=n):n=e[4];let a;return e[5]!==r||e[6]!==n?(a=t.jsx(ke,{"data-slot":"accordion-item",className:n,...r}),e[5]=r,e[6]=n,e[7]=a):a=e[7],a}function He(s){const e=_.c(11);let o,r,n;e[0]!==s?({className:r,children:o,...n}=s,e[0]=s,e[1]=o,e[2]=r,e[3]=n):(o=e[1],r=e[2],n=e[3]);let a;e[4]!==r?(a=O("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",r),e[4]=r,e[5]=a):a=e[5];let c;e[6]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(ie,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"}),e[6]=c):c=e[6];let l;return e[7]!==o||e[8]!==n||e[9]!==a?(l=t.jsx(Oe,{className:"flex",children:t.jsxs(Ve,{"data-slot":"accordion-trigger",className:a,...n,children:[o,c]})}),e[7]=o,e[8]=n,e[9]=a,e[10]=l):l=e[10],l}function Me(s){const e=_.c(12);let o,r,n;e[0]!==s?({className:r,children:o,...n}=s,e[0]=s,e[1]=o,e[2]=r,e[3]=n):(o=e[1],r=e[2],n=e[3]);let a;e[4]!==r?(a=O("pt-0 pb-4",r),e[4]=r,e[5]=a):a=e[5];let c;e[6]!==o||e[7]!==a?(c=t.jsx("div",{className:a,children:o}),e[6]=o,e[7]=a,e[8]=c):c=e[8];let l;return e[9]!==n||e[10]!==c?(l=t.jsx(De,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:c}),e[9]=n,e[10]=c,e[11]=l):l=e[11],l}function ro(s){const e=_.c(18),{groupedVehicles:o,vehicles:r,isComandancia:n,userCompany:a}=s,{canCreate:c}=ge(),l=Ue,f=Le;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=b=>{const{vehicle:d}=b;return t.jsx($,{href:`/vehicles/status/${d.id}`,children:t.jsxs(ue,{className:"h-full transition-all hover:shadow-md",children:[t.jsxs(fe,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(xe,{className:"text-2xl font-bold",children:d.name}),t.jsx(M,{variant:"secondary",className:l(d.status),children:t.jsxs("span",{className:"flex items-center gap-1",children:[f(d.status),d.status==="Operative"?"En Servicio":d.status==="Workshop"?"En Taller":"Fuera de Servicio"]})})]}),t.jsxs(he,{children:[d.make," ",d.model]})]}),t.jsxs(ve,{children:[t.jsxs("p",{className:"mb-2 text-sm text-muted-foreground",children:["PPU: ",d.plate]}),t.jsx(H,{variant:"outline",className:"w-full",children:"Ver Detalles"})]})]})})},e[0]=u):u=e[0];const v=u;let m,A;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=[{title:"Panel Principal",href:"/dashboard"},{title:"Estado de Carros",href:"/vehicles/status"}],A=t.jsx(ee,{title:"Estado de Carros"}),e[1]=m,e[2]=A):(m=e[1],A=e[2]);let C;e[3]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Estado de la Flota"}),e[3]=C):C=e[3];const I=n?"Vista General de todas las compañías.":`Vehículos de ${a}`;let g;e[4]!==I?(g=t.jsxs("div",{children:[C,t.jsx("p",{className:"text-muted-foreground",children:I})]}),e[4]=I,e[5]=g):g=e[5];let x;e[6]!==c?(x=c("vehicles.status")&&t.jsx(H,{asChild:!0,children:t.jsxs($,{href:"/vehicles/create",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Nuevo Vehículo"]})}),e[6]=c,e[7]=x):x=e[7];let j;e[8]!==g||e[9]!==x?(j=t.jsxs("div",{className:"flex items-center justify-between",children:[g,x]}),e[8]=g,e[9]=x,e[10]=j):j=e[10];let i;e[11]!==o||e[12]!==n||e[13]!==r?(i=n&&o?t.jsx(Te,{type:"multiple",className:"w-full space-y-4",children:Object.entries(o).map((b,d)=>{const[w,P]=b;return t.jsxs($e,{value:w,className:"rounded-lg border px-4",children:[t.jsx(He,{className:"py-4 hover:no-underline",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-lg font-semibold",children:w}),t.jsxs(M,{variant:"outline",children:[P.length," ","Unidades"]})]})}),t.jsx(Me,{className:"pt-4 pb-4",children:t.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:P.map(y=>t.jsx(v,{vehicle:y},y.id))})})]},w)})}):t.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:r?.map(b=>t.jsx(v,{vehicle:b},b.id))}),e[11]=o,e[12]=n,e[13]=r,e[14]=i):i=e[14];let N;return e[15]!==j||e[16]!==i?(N=t.jsxs(de,{breadcrumbs:m,children:[A,t.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[j,i]})]}),e[15]=j,e[16]=i,e[17]=N):N=e[17],N}function Le(s){switch(s){case"Operative":return t.jsx(je,{className:"h-4 w-4 text-green-600"});case"Workshop":return t.jsx(me,{className:"h-4 w-4 text-yellow-600"});case"Out of Service":return t.jsx(Ce,{className:"h-4 w-4 text-red-600"});default:return null}}function Ue(s){switch(s){case"Operative":return"bg-green-100 text-green-800 hover:bg-green-100";case"Workshop":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-100";case"Out of Service":return"bg-red-100 text-red-800 hover:bg-red-100";default:return"bg-gray-100 text-gray-800"}}export{ro as default};
