import{c as Q,u as V,r as X,j as t,H as Y,L as Z}from"./app-DTzGg31E.js";import{a as ee,B as J}from"./button-C4eVOrdx.js";import{C as te,a as se,d as ae,b as le,c as ie}from"./card-DKIuBdkK.js";import{I as K}from"./input-B20kPqeN.js";import{L as $}from"./label-DXmgNe88.js";import{A as re}from"./app-layout-DbAy9MxU.js";import{T as ce}from"./trash-2-xFOARszJ.js";import{A as ne}from"./arrow-left-CPkZo3iv.js";import{S as oe}from"./save-BH6sG7wu.js";/* empty css            */import"./index-hZcGNbU4.js";import"./index-BqADuB3m.js";import"./index-q7GIQJN5.js";import"./shield-DFV9Q0l-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],de=ee("CloudUpload",me);function Le(){const e=Q.c(66);let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[0]=C):C=e[0];let w;e[1]===Symbol.for("react.memo_cache_sentinel")?(w={amount:"",description:"",attachments:C},e[1]=w):w=e[1];const{data:s,setData:l,post:T,processing:I,errors:i}=V(w);let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=[],e[2]=S):S=e[2];const[r,G]=X.useState(S);let L;e[3]!==s.attachments||e[4]!==r||e[5]!==l?(L=a=>{if(a.target.files){const c=Array.from(a.target.files);l("attachments",[...s.attachments,...c]);const _=c.map(he);G([...r,..._])}},e[3]=s.attachments,e[4]=r,e[5]=l,e[6]=L):L=e[6];const O=L;let R;e[7]!==s.attachments||e[8]!==r||e[9]!==l?(R=a=>{const c=[...s.attachments];c.splice(a,1),l("attachments",c);const _=[...r];URL.revokeObjectURL(_[a]),_.splice(a,1),G(_)},e[7]=s.attachments,e[8]=r,e[9]=l,e[10]=R):R=e[10];const z=R;let F;e[11]!==T?(F=a=>{a.preventDefault(),T("/vehicles/petty-cash")},e[11]=T,e[12]=F):F=e[12];const W=F;let A,P;e[13]===Symbol.for("react.memo_cache_sentinel")?(A=[{title:"Caja Chica",href:"/vehicles/petty-cash"},{title:"Nueva Rendición",href:"#"}],P=t.jsx(Y,{title:"Nueva Rendición | Caja Chica"}),e[13]=A,e[14]=P):(A=e[13],P=e[14]);let k;e[15]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(J,{variant:"ghost",size:"icon",asChild:!0,children:t.jsx(Z,{href:"/vehicles/petty-cash",children:t.jsx(ne,{className:"h-5 w-5"})})}),t.jsx("h1",{className:"text-2xl font-bold",children:"Nueva Rendición"})]}),e[15]=k):k=e[15];let D;e[16]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs(te,{children:[t.jsx(se,{children:"Detalles de la Boleta / Recibo"}),t.jsx(ae,{children:"Adjunte las imágenes de los recibos y especifique el monto total."})]}),e[16]=D):D=e[16];let E;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx($,{children:"Monto Total (CLP)"}),e[17]=E):E=e[17];let n;e[18]!==l?(n=a=>l("amount",a.target.value),e[18]=l,e[19]=n):n=e[19];let o;e[20]!==s.amount||e[21]!==n?(o=t.jsx(K,{type:"number",min:"1",placeholder:"Ej: 15000",value:s.amount,onChange:n,required:!0}),e[20]=s.amount,e[21]=n,e[22]=o):o=e[22];let m;e[23]!==i.amount?(m=i.amount&&t.jsx("p",{className:"text-sm text-red-500",children:i.amount}),e[23]=i.amount,e[24]=m):m=e[24];let d;e[25]!==o||e[26]!==m?(d=t.jsxs("div",{className:"space-y-2",children:[E,o,m]}),e[25]=o,e[26]=m,e[27]=d):d=e[27];let U;e[28]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx($,{children:"Descripción / Motivo"}),e[28]=U):U=e[28];let h;e[29]!==l?(h=a=>l("description",a.target.value),e[29]=l,e[30]=h):h=e[30];let p;e[31]!==s.description||e[32]!==h?(p=t.jsx(K,{placeholder:"Ej: Compra de ampolletas para B-2",value:s.description,onChange:h}),e[31]=s.description,e[32]=h,e[33]=p):p=e[33];let f;e[34]!==i.description?(f=i.description&&t.jsx("p",{className:"text-sm text-red-500",children:i.description}),e[34]=i.description,e[35]=f):f=e[35];let u;e[36]!==p||e[37]!==f?(u=t.jsxs("div",{className:"space-y-2",children:[U,p,f]}),e[36]=p,e[37]=f,e[38]=u):u=e[38];let x;e[39]!==d||e[40]!==u?(x=t.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[d,u]}),e[39]=d,e[40]=u,e[41]=x):x=e[41];let q;e[42]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx($,{children:"Comprobantes (Boletas/Facturas)"}),e[42]=q):q=e[42];let j;e[43]!==O?(j=t.jsx("input",{type:"file",id:"attachments",multiple:!0,accept:"image/*,application/pdf",className:"hidden",onChange:O}),e[43]=O,e[44]=j):j=e[44];let B;e[45]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs("label",{htmlFor:"attachments",className:"flex cursor-pointer flex-col items-center justify-center gap-2",children:[t.jsx("div",{className:"rounded-full bg-primary/10 p-4 text-primary",children:t.jsx(de,{className:"h-6 w-6"})}),t.jsx("div",{className:"text-sm font-medium",children:"Haga clic para subir archivos"}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Se permiten múltiples imágenes o PDF."})]}),e[45]=B):B=e[45];let v;e[46]!==j?(v=t.jsxs("div",{className:"rounded-lg border border-dashed p-8 text-center transition-colors hover:bg-muted/50",children:[j,B]}),e[46]=j,e[47]=v):v=e[47];let b;e[48]!==i.attachments?(b=i.attachments&&t.jsx("p",{className:"text-sm text-red-500",children:i.attachments}),e[48]=i.attachments,e[49]=b):b=e[49];let g;e[50]!==s.attachments||e[51]!==r||e[52]!==z?(g=s.attachments.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4 lg:grid-cols-6",children:s.attachments.map((a,c)=>t.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-md border bg-muted",children:[a.type.startsWith("image/")?t.jsx("img",{src:r[c],alt:"Preview",className:"h-full w-full object-cover"}):t.jsx("div",{className:"flex h-full items-center justify-center p-2 text-center text-xs",children:a.name}),t.jsx("button",{type:"button",onClick:()=>z(c),className:"absolute top-1 right-1 rounded-full bg-red-500 p-1 text-white opacity-0 transition-opacity group-hover:opacity-100",children:t.jsx(ce,{className:"h-3 w-3"})})]},c))}),e[50]=s.attachments,e[51]=r,e[52]=z,e[53]=g):g=e[53];let y;e[54]!==v||e[55]!==b||e[56]!==g?(y=t.jsxs("div",{className:"space-y-4",children:[q,v,b,g]}),e[54]=v,e[55]=b,e[56]=g,e[57]=y):y=e[57];let H;e[58]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(oe,{className:"mr-2 h-4 w-4"}),e[58]=H):H=e[58];let N;e[59]!==I?(N=t.jsx("div",{className:"flex justify-end pt-4",children:t.jsxs(J,{type:"submit",disabled:I,children:[H,"Enviar Rendición"]})}),e[59]=I,e[60]=N):N=e[60];let M;return e[61]!==W||e[62]!==x||e[63]!==y||e[64]!==N?(M=t.jsxs(re,{breadcrumbs:A,children:[P,t.jsxs("div",{className:"flex flex-1 flex-col gap-8 p-4",children:[k,t.jsxs(le,{children:[D,t.jsx(ie,{children:t.jsxs("form",{onSubmit:W,className:"space-y-6",children:[x,y,N]})})]})]})]}),e[61]=W,e[62]=x,e[63]=y,e[64]=N,e[65]=M):M=e[65],M}function he(e){return URL.createObjectURL(e)}export{Le as default};
